(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"0EUg":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("bHdf");function i(){return Object(r.a)(1)}},"1uah":function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("yCtX"),i=n("DH7j"),o=n("7o/Q"),s=n("Lhse"),a=n("zx2A");function u(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(r.a)(t,void 0).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new l(t,this.resultSelector))}}class l extends o.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(i.a)(t)?e.push(new d(t)):e.push("function"==typeof t[s.a]?new h(t[s.a]()):new f(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class h{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class d{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[s.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class f extends a.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[s.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(a.c)(this.observable,new a.a(this))}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"32Ea":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new s(t,this.predicate))}}class s extends r.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}},"3E0/":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("D0XW"),i=n("mlxB"),o=n("7o/Q"),s=n("WMd4");function a(t,e=r.a){const n=Object(i.a)(t)?+t-e.now():Math.abs(t);return t=>t.lift(new u(n,e))}class u{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new c(t,this.delay,this.scheduler))}}class c extends o.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(c.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new l(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(s.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(s.a.createComplete()),this.unsubscribe()}}class l{constructor(t,e){this.time=t,this.notification=e}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"4XzM":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("89kA")},"5+tZ":function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return c});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const c=s},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},y=null,b=!0,v=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===y&&!0===d.get("logging_enabled")&&v(!0)),y){var n=m.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw f.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},A=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D=function(t){var e,n,r,i,s;Object(o.d)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},R=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(R.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw S("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Q(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function W(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function J(t,e){for(var n=Q(t,0),r=Q(e,0),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function X(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Z(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=Q(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);et(this)}}();function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",st=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function at(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ut,ct,lt,ht,dt,ft,pt,gt=function(t,e){var n=mt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new st(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},mt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},yt=/[\[\].#$\/\u0000-\u001F\u007F]/,bt=/[\[\].#$\u0000-\u001F\u007F]/,vt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!yt.test(t)},wt=function(t){return"string"==typeof t&&0!==t.length&&!bt.test(t)},Ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Ct=function(t,e,n,r,i){i&&void 0===n||St(Object(o.l)(t,e,i),n,r)},St=function(t,e,n){var r=n instanceof V?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nt(r));if("function"==typeof e)throw new Error(t+"contains a function "+nt(r)+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+nt(r));if("string"==typeof e&&e.length>vt/3&&Object(o.D)(e)>vt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+nt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.D)(u),et(a),St(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.D)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nt(r)+" in addition to actual children.")}},Et=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new V(t);if(St(s,e,K(r,n)),".priority"===z(n)&&!Ot(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Q(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Z(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Tt=function(t,e,n,r){if(!r||void 0!==n){if(E(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ot(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},It=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jt=function(t,e,n,r){if(!(r&&void 0===n||wt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jt(t,e,n,r)},kt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},At=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Pt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Dt=function(t){return"number"==typeof t?"number:"+D(t):"string:"+t},Rt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===ut||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return ct},set:function(t){ct=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Dt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?D(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}(),qt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Bt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new qt(T,t),r=new qt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return qt.MIN},t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(x,new Mt("[PRIORITY-POST]",ht))},e.prototype.makePost=function(t,e){var n=lt(t);return new qt(e,new Mt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Bt)),zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return dt},set:function(t){dt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(x,dt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qt(t,dt)},e.prototype.toString=function(){return".key"},e}(Bt),Gt=new zt,Qt=Math.log(2),Wt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Qt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Kt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Wt(t.length));return new Ut(r||e,o)},$t={},Yt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)($t&&Ht,"ChildrenNode.ts has not been loaded"),ft=ft||new t({".priority":$t},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Gt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(qt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Kt(s,e.getCompare()):$t;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var d=Object(i.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===$t){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(qt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Kt(a,s.getCompare())}return $t}var l=n.get(e.name),h=t;return l&&(h=h.remove(new qt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===$t)return t;var r=n.get(e.name);return r?t.remove(new qt(e.name,r)):t}),this.indexSet_)},t}();function Jt(t,e){return I(t.name,e.name)}function Xt(t,e){return I(t,e)}var Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Rt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return pt||(pt=new t(new Ut(Xt),null,Yt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?pt:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new qt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?pt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Dt(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===te?-1:0},t.prototype.withIndex=function(e){if(e===Gt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Gt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Gt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),te=new(function(t){function e(){return t.call(this,new Ut(Xt),Zt.EMPTY_NODE,Yt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function ee(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Mt(t,ee(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ee(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ee(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=ee(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qt(t,n)))}}),0===r.length)return Zt.EMPTY_NODE;var s=Kt(r,Jt,function(t){return t.name},Xt);if(i){var a=Kt(r,Ht.getCompare());return new Zt(s,ee(e),new Yt({".priority":a},{".priority":Ht}))}return new Zt(s,ee(e),Yt.Default)}Object.defineProperties(qt,{MIN:{value:new qt(T,Zt.EMPTY_NODE)},MAX:{value:new qt(x,te)}}),zt.__EMPTY_NODE=Zt.EMPTY_NODE,Mt.__childrenNodeConstructor=Zt,ut=te,ht=te,lt=ee;var ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ie,oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(ie||(ie=new Ut(j)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new V(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:K(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(K(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(K(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U()):new t(this.source,H(this.path))},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ne.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ne.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new ue(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function he(t,e){return{eventCache:t,serverCache:e}}function de(t,e,n,r){return he(new le(e,n,r),t.serverCache)}function fe(t,e,n,r){return he(t.eventCache,new le(e,n,r))}function pe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function me(t){return{type:"value",snapshotNode:t}}function ye(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function be(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(be(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ye(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(be(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(ye(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,be(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ye(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Oe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new se(null))},t}();function Ce(t,e,n){if($(e))return new Oe(new se(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new Oe(t.writeTree_.set(i,o))}var a=new se(n),u=t.writeTree_.setTree(e,a);return new Oe(u)}function Se(t,e,n){var r=t;return P(n,function(t,n){r=Ce(r,K(e,t),n)}),r}function Ee(t,e){if($(e))return Oe.empty();var n=t.writeTree_.setTree(e,new se(null));return new Oe(n)}function Te(t,e){return null!=xe(t,e)}function xe(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function Ie(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new qt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new qt(t,n.value))}),e}function je(t,e){if($(e))return t;var n=xe(t,e);return new Oe(null!=n?new se(n):t.writeTree_.subtree(e))}function Ne(t){return t.writeTree_.isEmpty()}function ke(t,e){return Ae(U(),t.writeTree_,e)}function Ae(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ae(K(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(K(t,".priority"),r)),n}function Pe(t,e){return ze(e,t)}function De(t,e){if(t.snap)return Z(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Z(K(t.path,n),e))return!0;return!1}function Re(t){return t.visible}function Me(t,e,n){for(var r=Oe.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Z(n,a)?r=Ce(r,u=Y(n,a),s.snap):Z(a,n)&&(u=Y(a,n),r=Ce(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Z(n,a))r=Se(r,u=Y(n,a),s.children);else if(Z(a,n))if($(u=Y(a,n)))r=Se(r,U(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(H(u));r=Ce(r,U(),l)}}}}}return r}function Le(t,e,n,r,i){if(r||i){var o=je(t.visibleWrites,e);return!i&&Ne(o)?n:i||null!=n||Te(o,U())?ke(Me(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Z(t.path,e)||Z(e,t.path))},e),n||Zt.EMPTY_NODE):null}var s=xe(t.visibleWrites,e);if(null!=s)return s;var a=je(t.visibleWrites,e);return Ne(a)?n:null!=n||Te(a,U())?ke(a,n||Zt.EMPTY_NODE):null}function Fe(t,e,n,r){return Le(t.writeTree,t.treePath,e,n,r)}function Ve(t,e){return function(t,e,n){var r=Zt.EMPTY_NODE,i=xe(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=je(t.visibleWrites,e);return n.forEachChild(Ht,function(t,e){var n=ke(je(o,new V(t)),e);r=r.updateImmediateChild(t,n)}),Ie(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Ie(je(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Ue(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=K(e,n);if(Te(t.visibleWrites,s))return null;var a=je(t.visibleWrites,s);return Ne(a)?i.getChild(n):ke(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function qe(t,e){return function(t,e){return xe(t.visibleWrites,e)}(t.writeTree,K(t.treePath,e))}function Be(t,e,n){return function(t,e,n,r){var i=K(e,n),o=xe(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ke(je(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function He(t,e){return ze(K(t.treePath,e),t.writeTree)}function ze(t,e){return{treePath:t,writeTree:e}}var Ge=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Qe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Be(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=je(t.visibleWrites,e),c=xe(u,U());if(null!=c)a=c;else{if(null==n)return[];a=ke(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function We(t,e,n,r,i,s){var a=e.eventCache;if(null!=qe(r,n))return e;var u=void 0,c=void 0;if($(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=ge(e),h=Ve(r,l instanceof Zt?l:Zt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=Fe(r,ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=q(n);if(".priority"===f){Object(o.d)(1===B(n),"Can't have a priority with additional path components");var p=a.getNode(),g=Ue(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=H(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var b=Ue(r,n,a.getNode(),c);y=null!=b?a.getNode().getImmediateChild(f).updateChild(m,b):a.getNode().getImmediateChild(f)}else y=Be(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return de(e,u,a.isFullyInitialized()||$(n),t.filter.filtersNodes())}function Ke(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if($(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=q(n);if(!c.isCompleteForPath(n)&&B(n)>1)return e;var f=H(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Ge,null)}var g=fe(e,u,c.isFullyInitialized()||$(n),l.filtersNodes());return We(t,g,n,i,new Qe(i,g,o),a)}function $e(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Qe(i,e,o);if($(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=de(e,u,!0,t.filter.filtersNodes());else{var h=q(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=de(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=H(n),f=c.getNode().getImmediateChild(h),p=void 0;if($(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===z(d)&&g.getChild(W(d)).isEmpty()?g:g.updateChild(d,r):Zt.EMPTY_NODE}a=f.equals(p)?e:de(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Ye(t,e){return t.eventCache.isCompleteForChild(e)}function Je(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Xe(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=$(n)?r:new se(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new V(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new V(n),h,i,o,s,a)}}),c}var Ze=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new qt(e.childName,e.snapshotNode),i=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn,rn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",on=(en=0,nn=[],function(t){var e,n=t===en;en=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=rn.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===nn[e];e--)nn[e]=0;nn[e]++}else for(e=0;e<12;e++)nn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=rn.charAt(nn[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),sn=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=rn.charAt(rn.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},an=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=rn.charAt(rn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},un=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return qt.MAX},e.prototype.makePost=function(t,e){var n=ee(t);return new qt(e,n)},e.prototype.toString=function(){return".value"},e}(Bt)),cn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ee(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qt(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,te);return new qt(x,t)},e.prototype.toString=function(){return Q(this.indexPath_,0).join("/")},e}(Bt),ln=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new qt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new qt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ve(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(be(e,d));var g=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ye(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(be(l.name,l.node)),i.trackChildChange(ye(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),dn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function fn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function pn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function gn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function mn(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=sn(e)),r=gn(t,e,n)):r=gn(t,e,null==n?x:sn(n)),r.startAfterSet_=!0,r}function yn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function bn(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=an(e)),r=yn(t,e,n)):r=yn(t,e,null==n?T:an(n)),r.endBeforeSet_=!0,r}function vn(t,e){var n=t.copy();return n.index_=e,n}function _n(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===un?e="$value":t.index_===Gt?e="$key":(Object(o.d)(t.index_ instanceof cn,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var wn,On=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new hn(n):new ln(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),l=new le(u,s.isFullyInitialized(),i.filtersNodes()),h=new le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=he(h,l),this.eventGenerator_=new Ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Cn(t,e){var n=ge(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!$(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function Sn(t){return 0===t.eventRegistrations_.length}function En(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Tn(t,e,n,r){e.type===ne.MERGE&&null!==e.source.queryId&&(Object(o.d)(ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(pe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new we;if(n.type===ne.OVERWRITE){var c=n;c.source.fromUser?s=$e(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),s=Ke(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ne.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=K(n,r);Ye(e,q(c))&&(a=$e(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=K(n,r);Ye(e,q(c))||(a=$e(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Xe(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ne.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=qe(r,n))return e;var u=new Qe(r,e,i),c=e.eventCache.getNode(),l=void 0;if($(n)||".priority"===q(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Fe(r,ge(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof Zt,"serverChildren would be complete if leaf node"),h=Ve(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=q(n),p=Be(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,H(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,Zt.EMPTY_NODE,H(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Fe(r,ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=qe(r,U()),de(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=qe(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if($(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ke(t,e,n,u.getNode().getChild(n),i,o,a,s);if($(n)){var c=new se(null);return u.getNode().forEachChild(Gt,function(t,e){c=c.set(new V(t),e)}),Xe(t,e,n,c,i,o,a,s)}return e}var l=new se(null);return r.foreach(function(t,e){var r=K(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Xe(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ne.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return We(t,fe(e,o.getNode(),o.isFullyInitialized()||$(n),o.isFiltered()),n,r,Ge,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me(pe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,xn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function xn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var In=function(){return function(){this.views=new Map}}();function jn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Tn(c,e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Tn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Nn(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=Fe(n,i?r:null),u=!1;a?u=!0:r instanceof Zt?(a=Ve(n,r),u=!1):(a=Zt.EMPTY_NODE,u=!1);var c=he(new le(a,u,!1),new le(r,i,!1));return new On(e,c)}return s}function kn(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function An(t,e){var n,r,o=null;try{for(var s=Object(i.g)(t.views.values()),a=s.next();!a.done;a=s.next())o=o||Cn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function Pn(t,e){if(e.getQueryParams().loadsAllData())return Mn(t);var n=e.queryIdentifier();return t.views.get(n)}function Dn(t,e){return null!=Pn(t,e)}function Rn(t){return null!=Mn(t)}function Mn(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.query.getQueryParams().loadsAllData())return s}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Ln=1,Fn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new se(null),this.pendingWriteTree_={visibleWrites:Oe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Vn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ce(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Gn(t,new ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Un(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&De(u,r.path)?i=!1:Z(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=Me(t.allWrites,Re,U()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Ee(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=Ee(t.visibleWrites,K(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new se(null);return null!=r.snap?i=i.set(U(),!0):P(r.children,function(t){i=i.set(new V(t),!0)}),Gn(t,new oe(r.path,i,n))}return[]}function qn(t,e,n){return Gn(t,new ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Bn(t,e,n,r){var s=e.path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e.queryIdentifier()||Dn(a,e))){var c=function(t,e,n,r){var s,a,u=e.queryIdentifier(),c=[],l=[],h=Rn(t);if("default"===u)try{for(var d=Object(i.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(i.e)(f.value,2),m=g[0];l=l.concat(En(p=g[1],n,r)),Sn(p)&&(t.views.delete(m),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(En(p,n,r)),Sn(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Rn(t)&&c.push(new(Object(o.d)(wn,"Reference.ts has not been loaded"),wn)(e.repo,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Rn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Rn(e))return[Mn(e)];var r=[];return e&&(r=kn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,b=Kn(t,m);t.listenProvider_.startListening(tr(y),$n(t,y),b.hashFn,b.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(tr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(Yn(e));t.listenProvider_.stopListening(tr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=Yn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Hn(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||An(e,n),s=s||Rn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Rn(u),i=i||An(u,U())):(u=new In,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=An(e,U());n&&(i=i.updateImmediateChild(t,n))}));var c=Dn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=Yn(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Ln++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Nn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,function(t,e){r.push(ye(t,e))}),n.isFullyInitialized()&&r.push(me(n.getNode())),xn(t,r,n.getNode(),e)}(s,n)}(u,e,n,Pe(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Pn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=$n(t,e),s=Kn(t,n),a=t.listenProvider_.startListening(tr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Rn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&Rn(e))return[Mn(e).query];var r=[];return e&&(r=r.concat(kn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(tr(h),$n(t,h))}return a}(t,e,f))}return d}function zn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=An(n,Y(t,e));if(r)return r});return Le(r,e,i,n,!0)}function Gn(t,e){return Qn(e,t.syncPointTree_,null,Pe(t.pendingWriteTree_,U()))}function Qn(t,e,n,r){if($(t.path))return Wn(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=An(i,U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=He(r,s);o=o.concat(Qn(a,u,c,l))}return i&&(o=o.concat(jn(i,t,r,n))),o}function Wn(t,e,n,r){var i=e.get(U());null==n&&null!=i&&(n=An(i,U()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=He(r,e),u=t.operationForChild(e);u&&(o=o.concat(Wn(u,i,s,a)))}),i&&(o=o.concat(jn(i,t,r,n))),o}function Kn(t,e){var n=e.query,r=$n(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Jn(t,n);if(r){var i=Xn(r),o=i.path,s=i.queryId,a=Y(o,e);return Zn(t,o,new ae(re(s),a))}return[]}(t,n.path,r):function(t,e){return Gn(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Bn(t,n,null,i)}}}function $n(t,e){var n=Yn(e);return t.queryToTagMap.get(n)}function Yn(t){return t.path.toString()+"$"+t.queryIdentifier()}function Jn(t,e){return t.tagToQueryMap.get(e)}function Xn(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function Zn(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,Pe(t.pendingWriteTree_,e),null)}function tr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var er=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),nr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return zn(this.syncTree_,this.path_)},t}(),rr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ir(t[".sv"],e,n):"object"==typeof t[".sv"]?or(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ir=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},or=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},sr=function(t,e,n,r){return ur(e,new nr(n,t),r)},ar=function(t,e,n){return ur(t,new er(e),n)};function ur(t,e,n){var r,i=t.getPriority().val(),o=rr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=rr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Mt(a,ee(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Mt(o))),u.forEachChild(Ht,function(t,i){var o=ur(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}function cr(){return{value:null,children:new Map}}function lr(t,e,n){if($(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,cr()),lr(t.children.get(r),e=H(e),n)}}function hr(t,e){if($(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Ht,function(e,n){lr(t,new V(e),n)}),hr(t,e)}if(t.children.size>0){var r=q(e);return e=H(e),t.children.has(r)&&hr(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function dr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){dr(r,new V(e.toString()+"/"+t),n)})}var fr=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),pr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),gr={},mr={};function yr(t){var e=t.toString();return gr[e]||(gr[e]=new pr),gr[e]}var br=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),vr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new br(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),_r=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||X(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Or(t,e,n){wr(t,n),Sr(t,function(t){return X(t,e)})}function Cr(t,e,n){wr(t,n),Sr(t,function(t){return Z(t,e)||Z(e,t)})}function Sr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Er(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Er(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),L(r)}}}var Tr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),xr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Tr),Ir=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Tr),jr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Nr="start",kr="close",Ar=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=yr(e),this.urlFn=function(t){return at(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Pr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Nr)n.id=s,n.password=a;else{if(o!==kr)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=A(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Pr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Dr="";function Rr(t){Dr=t}var Mr=null;"undefined"!=typeof MozWebSocket?Mr=MozWebSocket:"undefined"!=typeof WebSocket&&(Mr=WebSocket);var Lr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=yr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),at(t,it,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Dr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Mr(this.connURL,[],r)}else this.mySock=new Mr(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Mr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=A(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Fr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ar,Lr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Lr&&Lr.isAvailable(),s=o&&!Lr.previouslyFailed();if(e.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Lr];else{var a=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Vr=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Fr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ur=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),qr=1e3,Br=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=qr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),xr.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ir.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Vr(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Dr.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ir.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ur),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_n(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_n(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Ur),zr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),jt("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),jt("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Gr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Qr(t,e){for(var n=e instanceof V?e:new V(e),r=t,i=q(n);null!==i;){var s=Object(o.C)(r.node.children,i)||{children:{},childCount:0};r=new Gr(i,r,s),i=q(n=H(n))}return r}function Wr(t){return t.node.value}function Kr(t,e){t.node.value=e,Zr(t)}function $r(t){return t.node.childCount>0}function Yr(t,e){P(t.node.children,function(n,r){e(new Gr(n,t,r))})}function Jr(t,e,n,r){n&&!r&&e(t),Yr(t,function(t){Jr(t,e,!0,r)}),n&&r&&e(t)}function Xr(t){return new V(null===t.parent?t.name:Xr(t.parent)+"/"+t.name)}function Zr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Wr(t)&&!$r(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Zr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Zr(t))}(t.parent,t.name,t)}var ti="repo_interrupt",ei=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cr(),this.transactionQueueTree_=new Gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ni(t){var e=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ri(t){return(e=(e={timestamp:ni(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ii(t,e,n,r,i){t.dataUpdateCount++;var s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n,r){var i=Jn(t,r);if(i){var o=Xn(i),s=o.path,a=o.queryId,u=Y(s,e),c=se.fromObject(n);return Zn(t,s,new ce(re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ee(n);a=function(t,e,n,r){var i=Jn(t,r);if(null!=i){var o=Xn(i),s=o.path,a=o.queryId,u=Y(s,e);return Zn(t,s,new ue(re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n){var r=se.fromObject(n);return Gn(t,new ce({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ee(n);a=qn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Si(t,s)),Cr(t.eventQueue_,d,a)}function oi(t,e){si(t,"connected",e),!1===e&&function(t){bi(t,"onDisconnectEvents");var e=ri(t),n=cr();dr(t.onDisconnect_,U(),function(r,i){var o=sr(r,i,t.serverSyncTree_,e);lr(n,r,o)});var r=[];dr(n,U(),function(e,n){r=r.concat(qn(t.serverSyncTree_,e,n));var i=ji(t,e);Si(t,i)}),t.onDisconnect_=cr(),Cr(t.eventQueue_,U(),r)}(t)}function si(t,e,n){var r=new V("/.info/"+e),i=ee(n);t.infoData_.updateSnapshot(r,i);var o=qn(t.infoSyncTree_,r,i);Cr(t.eventQueue_,r,o)}function ai(t){return t.nextWriteId_++}function ui(t,e,n,r,i){bi(t,"set",{path:e.toString(),value:n,priority:r});var o=ri(t),s=ee(n,r),a=zn(t.serverSyncTree_,e),u=ar(s,a,o),c=ai(t),l=Vn(t.serverSyncTree_,e,u,c,!0);wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||S("set at "+e+" failed: "+n);var s=Un(t.serverSyncTree_,c,!o);Cr(t.eventQueue_,e,s),vi(0,i,n,r)});var h=ji(t,e);Si(t,h),Cr(t.eventQueue_,h,[])}function ci(t,e,n,r){bi(t,"update",{path:e.toString(),value:n});var i=!0,s=ri(t),a={};if(P(n,function(n,r){i=!1,a[n]=sr(K(e,n),ee(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),vi(0,r,"ok",void 0);else{var u=ai(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Se(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=se.fromObject(n);return Gn(t,new ce({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||S("update at "+e+" failed: "+n);var s=Un(t.serverSyncTree_,u,!o),a=s.length>0?Si(t,e):e;Cr(t.eventQueue_,a,s),vi(0,r,n,i)}),P(n,function(n){var r=ji(t,K(e,n));Si(t,r)}),Cr(t.eventQueue_,e,[])}}function li(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&hr(t.onDisconnect_,e),vi(0,n,r,i)})}function hi(t,e,n,r){var i=ee(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&lr(t.onDisconnect_,e,i),vi(0,r,n,o)})}function di(t,e,n,r,i){var o=ee(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&lr(t.onDisconnect_,e,o),vi(0,i,n,r)})}function fi(t,e,n,r){if(Object(o.r)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void vi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=ee(r);lr(t.onDisconnect_,K(e,n),i)}),vi(0,r,i,o)})}function pi(t,e,n){var r;r=".info"===q(e.path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Or(t.eventQueue_,e.path,r)}function gi(t,e,n){var r;r=".info"===q(e.path)?Bn(t.infoSyncTree_,e,n):Bn(t.serverSyncTree_,e,n),Or(t.eventQueue_,e.path,r)}function mi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ti)}function yi(t){t.persistentConnection_&&t.persistentConnection_.resume(ti)}function bi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function vi(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function _i(t){return t.__database||(t.__database=new Gi(t))}function wi(t,e,n,r,i){bi(t,"transaction on "+e);var s=function(){},a=new Vi(t,e);a.on("value",s);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Oi(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new zr(u.currentInputSnapshot,new Vi(t,u.path),Ht);u.onComplete(null,!1,h)}}else{St("transaction failed: Data returned ",l,u.path),u.status=0;var d=Qr(t.transactionQueueTree_,e),f=Wr(d)||[];f.push(u),Kr(d,f);var g=void 0;"object"==typeof l&&null!==l&&Object(o.h)(l,".priority")?(g=Object(o.C)(l,".priority"),Object(o.d)(Ot(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(zn(t.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();var m=ri(t),y=ee(l,g),b=ar(y,c,m);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=b,u.currentWriteId=ai(t);var v=Vn(t.serverSyncTree_,e,b,u.currentWriteId,u.applyLocally);Cr(t.eventQueue_,e,v),Ci(t,t.transactionQueueTree_)}}function Oi(t,e,n){return zn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function Ci(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Ii(t,e),Wr(e)){var n=Ti(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=Oi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Y(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){bi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<n.length;s++){if(n[s].status=2,i=i.concat(Un(t.serverSyncTree_,n[s].currentWriteId)),n[s].onComplete){var a=n[s].currentOutputSnapshotResolved,u=new Vi(t,n[s].path),c=new zr(a,u,Ht);o.push(n[s].onComplete.bind(null,null,!0,c))}n[s].unwatcher()}for(Ii(t,Qr(t.transactionQueueTree_,e)),Ci(t,t.transactionQueueTree_),Cr(t.eventQueue_,e,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(S("transaction at "+d.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;Si(t,e)}},a)}(t,Xr(e),n)}else $r(e)&&Yr(e,function(e){Ci(t,e)})}function Si(t,e){var n=Ei(t,e),r=Xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=0;a<e.length;a++){var u=e[a],c=Y(n,u.path),l=!1,h=void 0;if(Object(o.d)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0));else{var d=Oi(t,u.path,s);u.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){St("transaction failed: Data returned ",f,u.path);var p=ee(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=u.currentWriteId,m=ri(t),y=ar(p,d,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=ai(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Vn(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(Un(t.serverSyncTree_,g,!0))}else l=!0,h="nodata",i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0))}if(Cr(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===h){var b=new Vi(t,e[a].path),v=new zr(e[a].currentInputSnapshot,b,Ht);r.push(e[a].onComplete.bind(null,null,!1,v))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}for(Ii(t,t.transactionQueueTree_),a=0;a<r.length;a++)L(r[a]);Ci(t,t.transactionQueueTree_)}}(t,Ti(t,n),r),r}function Ei(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Wr(r);)r=Qr(r,n),n=q(e=H(e));return r}function Ti(t,e){var n=[];return xi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function xi(t,e,n){var r=Wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yr(e,function(e){xi(t,e,n)})}function Ii(t,e){var n=Wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Kr(e,n.length>0?n:void 0)}Yr(e,function(e){Ii(t,e)})}function ji(t,e){var n=Xr(Ei(t,e)),r=Qr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){Ni(t,e)}),Ni(t,r),Jr(r,function(e){Ni(t,e)}),n}function Ni(t,e){var n=Wr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Un(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Kr(e,void 0):n.length=s+1,Cr(t.eventQueue_,Xr(e),i),a=0;a<r.length;a++)L(r[a])}}var ki,Ai=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),kt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return hi(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),kt("OnDisconnect.set",this.path_),Ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return hi(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),kt("OnDisconnect.setWithPriority",this.path_),Ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),Tt("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return di(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),kt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Et("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return fi(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Pi=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Di=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Ri=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Mi=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Di("value",this,new zr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ri(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Li=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ri(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Di(t.type,this,new zr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Fi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ki,"Reference.ts has not been loaded"),ki},set:function(t){ki=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!Ot(e)||null!=n&&!Ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof cn||t.getIndex()===un,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),xt("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Mi(t,e||null,n||null);pi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Li(t,e,n);pi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),xt("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Mi(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Li(i,null,n||null));gi(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Y(t,n);r=r||An(e,i)});var i=t.syncPointTree_.get(n);i?r=r||An(i,U()):(i=new In,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new le(r,!0,!1):null;return pe(Nn(i,e,Pe(t.pendingWriteTree_,e.path),o?s.getNode():Zt.EMPTY_NODE,o).viewCache_)}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new zr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then(function(n){var r=ee(n),i=qn(t.serverSyncTree_,e.path,r);return Or(t.eventQueue_,e.path,i),Promise.resolve(new zr(r,e.getRef(),e.getQueryParams().getIndex()))},function(n){return bi(t,"get for query "+Object(o.F)(e)+" failed: "+n),Promise.reject(new Error(n))});var t,e,n},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),xt("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,fn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,pn(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');jt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new cn(n),i=vn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=vn(this.queryParams_,Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=vn(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=vn(this.queryParams_,un);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),Ct("Query.startAt",1,e,this.path,!0),It("Query.startAt",2,n,!0);var r=gn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),Ct("Query.startAfter",1,e,this.path,!1),It("Query.startAfter",2,n,!0);var r=mn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),Ct("Query.endAt",1,e,this.path,!0),It("Query.endAt",2,n,!0);var r=yn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),Ct("Query.endBefore",1,e,this.path,!1),It("Query.endBefore",2,n,!0);var r=bn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),Ct("Query.equalTo",1,t,this.path,!1),It("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=X(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Vi=function(t){function e(e,n){if(!(e instanceof ei))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new dn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),$(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?Nt("Reference.child",1,t,!1):jt("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=W(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return _i(this.repo)},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),kt("Reference.set",this.path),Ct("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return ui(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),kt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Et("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return ci(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),kt("Reference.setWithPriority",this.path),Ct("Reference.setWithPriority",1,t,this.path,!1),Tt("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ui(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),kt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),kt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),Pt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Pi(n,i)),"function"==typeof e&&e(t,n,i)};return wi(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),kt("Reference.setPriority",this.path),Tt("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return ui(this.repo,K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),kt("Reference.push",this.path),Ct("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=ni(this.repo),i=on(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return kt("Reference.onDisconnect",this.path),new Ai(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fi);Fi.__referenceConstructor=Vi,function(t){Object(o.d)(!wn,"__referenceConstructor has already been defined"),wn=t}(Vi);var Ui=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),qi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Bi={},Hi=!1;function zi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=gt(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=gt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new qi:new Ui(t,e);return At("Invalid Firebase Database URL",1,a),$(a.path)||C("Database URL must point to the root of a Firebase Database (not including a child path)."),_i(function(t,e,n){var r=Object(o.C)(Bi,e.name);r||(Bi[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ei(t,Hi,e,n),r[t.toURLString()]=i,i}(u,t,l))}var Gi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.C)(Bi,e.app.name))&&Object(o.C)(n,e.key)===e||C("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),mi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ei||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=yr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Hr(t.repoInfo_,function(e,n,r,i){ii(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return oi(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Br(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ii(t,e,n,r,i)},function(e){oi(t,e)},function(e){!function(t,e){P(e,function(e,n){si(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new vr(t.stats_,t.server_)},r=t.repoInfo_.toString(),mr[r]||(mr[r]=n()),mr[r]),t.infoData_=new fr,t.infoSyncTree_=new Fn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=qn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),si(t,"connected",!1),t.serverSyncTree_=new Fn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Cr(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Vi(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new st(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new qi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof Vi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=gt(t,this.repo_.repoInfo_.nodeAdmin);At(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),mi(this.repo_)},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),yi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Qi=Object.freeze({__proto__:null,forceLongPolling:function(){Lr.forceDisallow(),Ar.forceAllow()},forceWebSockets:function(){Ar.forceDisallow()},isWebSocketsAvailable:function(){return Lr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new br(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Rr(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:zi(e,u,n,s),namespace:i}}}),Wi=Br;Br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ki=Object.freeze({__proto__:null,DataConnection:Wi,RealTimeConnection:Vr,hijackHash:function(t){var e=Br.prototype.put;return Br.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Br.prototype.put=e}},ConnectionTarget:st,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Hi=t}(t)}}),$i=Gi.ServerValue;!function(e){Rr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=e.instanceIdentifier;return zi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Vi,Query:Fi,Database:Gi,DataSnapshot:zr,enableLogging:v,INTERNAL:Qi,ServerValue:$i,TEST_ACCESS:Ki}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7HRe":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("quSY"),o=n("kJWO"),s=n("jZKg"),a=n("Lhse"),u=n("c2HN"),c=n("I55L");function l(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>{const i=t[o.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new i.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(c.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new i.a;let o;return r.add(()=>{o&&"function"==typeof o.return&&o.return()}),r.add(e.schedule(()=>{o=t[a.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=o.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f});let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var u=n("3N8a");class c extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new h(c),f=d},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"7uu2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("fnh7")},"89kA":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp"),i=n("ZR4w");r.Observable.prototype.map=i.map},"8Qeq":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},BFxc:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return function(e){return 0===t?Object(o.b)():e.lift(new a(t))}}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}},BilO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.of=r.of},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("SeVD"),o=n("7HRe");function s(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},CqXF:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.value=t}call(t,e){return e.subscribe(new s(t,this.value))}}class s extends r.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},"F97/":function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",function(){return r})},GjHo:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("1uah");function i(...t){return function(e){return e.lift.call(Object(r.b)(e,...t))}}},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LRne"),i=n("0EUg");function o(...t){return Object(i.a)()(Object(r.a)(...t))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("8Qeq"),i=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),a=n("kJWO"),u=n("mCNh"),c=n("2fFW");let l=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(a.add(r?r.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=h(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[a.a](){return this}pipe(...t){return 0===t.length?this:Object(u.b)(t)(this)}toPromise(t){return new(t=h(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Y/cZ");class i extends r.a{constructor(t,e=r.a.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return function(e){const n=new o(t),r=e.lift(n);return n.caught=r}}class o{constructor(t){this.selector=t}call(t,e){return e.subscribe(new s(t,this.selector,this.caught))}}class s extends r.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new r.a(this);this.add(i);const o=Object(r.c)(n,i);o!==i&&this.add(o)}}}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("GyhO"),i=n("z+Ro");function o(...t){const e=t[t.length-1];return Object(i.a)(e)?(t.pop(),n=>Object(r.a)(t,n,e)):e=>Object(r.a)(t,e)}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},Kj3r:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("D0XW");function o(t,e=i.a){return n=>n.lift(new s(t,e))}class s{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends r.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function u(t){t.debouncedNext()}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},"NHP+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("quSY");class o extends r.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),i.a.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},NJ9Y:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("BFxc"),s=n("XDbj"),a=n("xbPD"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(a.a)(e):Object(s.a)(()=>new r.a))}},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("Cfvw"),o=n("EY2u");function s(t){return new r.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},Nv8m:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("yCtX"),o=n("l7GE"),s=n("ZUHj");function a(...t){if(1===t.length){if(!Object(r.a)(t[0]))return t[0];t=t[0]}return Object(i.a)(t,void 0).lift(new u)}class u{call(t,e){return e.subscribe(new c(t))}}class c extends o.a{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=t[n],r=Object(s.a)(this,e,void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}},OQgR:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return h});var r=n("7o/Q"),i=n("quSY"),o=n("HDdC"),s=n("XNiG");function a(t,e,n,r){return i=>i.lift(new u(t,e,n,r))}class u{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class c extends r.a{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);const t=new h(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new h(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new l(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class l extends r.a{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class h extends o.a{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new i.a,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new d(n)),e.add(r.subscribe(t)),e}}class d extends i.a{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}},PqYM:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("D0XW"),o=n("Y7HM"),s=n("z+Ro");function a(t=0,e,n){let a=-1;return Object(o.a)(e)?a=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.a),new r.a(e=>{const r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:a,subscriber:e})})}function u(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},RhlD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.interval=r.interval},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},T3pr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("mx47")},TGZE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("RhlD")},UXun:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("jtHE");function i(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let o,s,a=0,u=!1,c=!1;return function(l){let h;a++,!o||u?(u=!1,o=new r.a(t,e,i),h=o.subscribe(this),s=l.subscribe({next(t){o.next(t)},error(t){u=!0,o.error(t)},complete(){c=!0,s=void 0,o.complete()}}),c&&(s=void 0)):h=o.subscribe(this),this.add(()=>{a--,h.unsubscribe(),h=void 0,s&&!c&&n&&0===a&&(s.unsubscribe(),s=void 0,o=void 0)})}}(i))}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=n("EY2u"),i=n("LRne"),o=n("z6cu"),s=function(t){return t.NEXT="N",t.ERROR="E",t.COMPLETE="C",t}({});let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=u){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function u(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},Xj2z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.fromEvent=r.fromEvent},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},"Y/cZ":function(t,e,n){"use strict";n.d(e,"a",function(){return r});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})()},Y6u4:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})()},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZR4w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("kU1M");e.map=function(t,e){return r.map(t,e)(this)}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var o=n("SeVD"),s=n("HDdC");function a(t,e,n,r,a=new i(t,n,r)){if(!a.closed)return e instanceof s.a?e.subscribe(a):Object(o.a)(e)(a)}},Zy1z:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return t=>t.lift(new o)}class o{call(t,e){return e.subscribe(new s(t))}}class s extends r.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}},aGrj:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("eIep");function i(t,e){return e?Object(r.a)(()=>t,e):Object(r.a)(()=>t)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.b)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.b)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cD4w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.timer=r.timer},coGc:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("HDdC"),o=n("l7GE"),s=n("ZUHj");function a(t,e){return e?n=>new l(n,e).lift(new u(t)):e=>e.lift(new u(t))}class u{constructor(t){this.delayDurationSelector=t}call(t,e){return e.subscribe(new c(t,this.delayDurationSelector))}}class c extends o.a{constructor(t,e){super(t),this.delayDurationSelector=e,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()}notifyError(t,e){this._error(t)}notifyComplete(t){const e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}_next(t){const e=this.index++;try{const n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(n){this.destination.error(n)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(t){t.unsubscribe();const e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}tryDelay(t,e){const n=Object(s.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subscriptionDelay=e}_subscribe(t){this.subscriptionDelay.subscribe(new h(t,this.source))}}class h extends r.a{constructor(t,e){super(),this.parent=t,this.source=e,this.sourceSubscribed=!1}_next(t){this.subscribeToSource()}_error(t){this.unsubscribe(),this.parent.error(t)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("HDdC"),i=n("DH7j"),o=n("lJxs"),s=n("XoHu"),a=n("Cfvw");function u(...t){if(1===t.length){const e=t[0];if(Object(i.a)(e))return c(e,null);if(Object(s.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return c(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return c(t=1===t.length&&Object(i.a)(t[0])?t[0]:t,null).pipe(Object(o.a)(t=>e(...t)))}return c(t,null)}function c(t,e){return new r.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let u=0;u<r;u++){const c=Object(a.a)(t[u]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,s++),i[u]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&l||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},f29J:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("GyhO");function i(...t){return e=>e.lift.call(Object(r.a)(e,...t))}},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return sn}),n.d(e,"b",function(){return mu}),n.d(e,"c",function(){return hu}),n.d(e,"d",function(){return cu}),n.d(e,"e",function(){return lu}),n.d(e,"f",function(){return cc}),n.d(e,"g",function(){return Zu}),n.d(e,"h",function(){return da}),n.d(e,"i",function(){return xu}),n.d(e,"j",function(){return Ms}),n.d(e,"k",function(){return vu}),n.d(e,"l",function(){return Us}),n.d(e,"m",function(){return br}),n.d(e,"n",function(){return Ga}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return En}),n.d(e,"q",function(){return j}),n.d(e,"r",function(){return on}),n.d(e,"s",function(){return mo}),n.d(e,"t",function(){return oa}),n.d(e,"u",function(){return aa}),n.d(e,"v",function(){return bu}),n.d(e,"w",function(){return Ca}),n.d(e,"x",function(){return ec}),n.d(e,"y",function(){return Oa}),n.d(e,"z",function(){return Ku}),n.d(e,"A",function(){return Nu}),n.d(e,"B",function(){return Tn}),n.d(e,"C",function(){return gu}),n.d(e,"D",function(){return pu}),n.d(e,"E",function(){return Hs}),n.d(e,"F",function(){return Bs}),n.d(e,"G",function(){return Or}),n.d(e,"H",function(){return Gs}),n.d(e,"I",function(){return fr}),n.d(e,"J",function(){return xn}),n.d(e,"K",function(){return ic}),n.d(e,"L",function(){return ba}),n.d(e,"M",function(){return Lu}),n.d(e,"N",function(){return an}),n.d(e,"O",function(){return Ws}),n.d(e,"P",function(){return Qs}),n.d(e,"Q",function(){return Ea}),n.d(e,"R",function(){return R}),n.d(e,"S",function(){return $u}),n.d(e,"T",function(){return Qu}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Gu}),n.d(e,"W",function(){return ac}),n.d(e,"X",function(){return Uu}),n.d(e,"Y",function(){return yu}),n.d(e,"Z",function(){return eo}),n.d(e,"ab",function(){return Os}),n.d(e,"bb",function(){return hr}),n.d(e,"cb",function(){return Kn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Vn}),n.d(e,"fb",function(){return Hn}),n.d(e,"gb",function(){return qn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return Bn}),n.d(e,"jb",function(){return bs}),n.d(e,"kb",function(){return sc}),n.d(e,"lb",function(){return vs}),n.d(e,"mb",function(){return _s}),n.d(e,"nb",function(){return Fn}),n.d(e,"ob",function(){return U}),n.d(e,"pb",function(){return To}),n.d(e,"qb",function(){return Bo}),n.d(e,"rb",function(){return Uo}),n.d(e,"sb",function(){return qo}),n.d(e,"tb",function(){return ys}),n.d(e,"ub",function(){return Tt}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Mn}),n.d(e,"xb",function(){return bo}),n.d(e,"yb",function(){return vt}),n.d(e,"zb",function(){return Ps}),n.d(e,"Ab",function(){return oi}),n.d(e,"Bb",function(){return No}),n.d(e,"Cb",function(){return ts}),n.d(e,"Db",function(){return Zo}),n.d(e,"Eb",function(){return iu}),n.d(e,"Fb",function(){return X}),n.d(e,"Gb",function(){return ot}),n.d(e,"Hb",function(){return _}),n.d(e,"Ib",function(){return w}),n.d(e,"Jb",function(){return nt}),n.d(e,"Kb",function(){return st}),n.d(e,"Lb",function(){return Po}),n.d(e,"Mb",function(){return Fo}),n.d(e,"Nb",function(){return Lo}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return Vo}),n.d(e,"Qb",function(){return Ze}),n.d(e,"Rb",function(){return fs}),n.d(e,"Sb",function(){return On}),n.d(e,"Tb",function(){return en}),n.d(e,"Ub",function(){return uu}),n.d(e,"Vb",function(){return Ho}),n.d(e,"Wb",function(){return ou}),n.d(e,"Xb",function(){return ye}),n.d(e,"Yb",function(){return me}),n.d(e,"Zb",function(){return Qo}),n.d(e,"ac",function(){return Ha}),n.d(e,"bc",function(){return za}),n.d(e,"cc",function(){return Do}),n.d(e,"dc",function(){return Ua}),n.d(e,"ec",function(){return qa}),n.d(e,"fc",function(){return ru}),n.d(e,"gc",function(){return Ao}),n.d(e,"hc",function(){return Gt}),n.d(e,"ic",function(){return pr}),n.d(e,"jc",function(){return rt}),n.d(e,"kc",function(){return ko}),n.d(e,"lc",function(){return au}),n.d(e,"mc",function(){return ls}),n.d(e,"nc",function(){return hs}),n.d(e,"oc",function(){return ds});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function b(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function v(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${b(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function O(t){return C(t,E)||C(t,x)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(I))?t[T]:null}const E=u({"\u0275prov":u}),T=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),I=u({ngInjectorDef:u});var j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function k(t){const e=N;return N=t,e}function A(t,e,n){const r=O(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&j.Optional?null:void 0!==e?e:void v(l(t),"Injector")}function P(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),R=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,U=M||V||L||F,q={},B=[],H=[],z=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),Q=u({"\u0275pipe":u}),W=u({"\u0275mod":u}),K=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let J=0;function X(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||R.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function Z(t){return at(t)||function(t){return t[G]||null}(t)}function tt(t){return function(t){return t[Q]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{et[t.id]=t.type}),e}function rt(t,e){return P(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=X;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty($)?t[$]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ot),wt}function wt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ot(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===q),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}vt.ngInherit=!0;const St="http://www.w3.org/2000/svg";let Et;function Tt(t){Et=t}function xt(t){return!!t.listen}const It={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function jt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return jt(e[t])}function kt(t,e){return jt(e[t.index])}function At(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Dt(t,e){const n=e[t];return ht(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Vt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ce(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Gt(t){qt.lFrame.contextLView=t}function Qt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return qt.lFrame.currentTNode}function Kt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return qt.lFrame.isParent}function Yt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Xt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Zt(){return qt.lFrame.bindingIndex++}function te(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ee(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){qt.lFrame.currentDirectiveIndex=t}function re(){return qt.lFrame.currentQueryIndex}function ie(t){qt.lFrame.currentQueryIndex=t}function oe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function se(t,e,n){if(n&j.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&j.Host||(r=oe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ue();return r.currentTNode=e,r.lView=t,!0}function ae(t){const e=ue(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ue(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ce(t):e}function ce(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function le(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const he=le;function de(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return qt.lFrame.selectedIndex}function pe(t){qt.lFrame.selectedIndex=t}function ge(){const t=qt.lFrame;return At(t.tView,t.selectedIndex)}function me(){qt.lFrame.currentNamespace=St}function ye(){qt.lFrame.currentNamespace=null}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ve(t,e,n){Oe(t,e,3,n)}function _e(t,e,n,r){(3&t[2])===n&&Oe(t,e,n,r)}function we(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ce(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ce(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Se=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ie(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function xe(t){return 3===t||4===t||6===t}function Ie(t){return 64===t.charCodeAt(0)}function je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==Se}function Ae(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Re(t){const e=De;return De=t,e}let Me=0;function Le(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Fe(r.data,t),Fe(e,null),Fe(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(ke(i)){const t=Ae(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Fe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Se;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Se}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Be(t,e,n){if(n&j.Optional)return t;v(e,"NodeInjector")}function He(t,e,n,r){if(n&j.Optional&&void 0===r&&(r=null),0==(n&(j.Self|j.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&j.Optional):A(e,r,n&j.Optional)}finally{k(o)}}return Be(r,e,n)}function ze(t,e,n,r=j.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:Qe:e}(n);if("function"==typeof o){if(!se(e,t,r))return r&j.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&j.Optional)return t;v(n)}finally{he()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Se,u=r&j.Host?e[16][6]:null;for((-1===s||r&j.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Se&&Je(r,!1)?(i=e[1],s=Ae(a),e=Pe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=We(s,e,n,i,r,u);if(t!==Ge)return t}a=e[s+8],a!==Se&&Je(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=Ae(a),e=Pe(a,e)):s=-1}}}return He(e,n,r,i)}const Ge={};function Qe(){return new Xe(Qt(),Ht())}function We(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ke(a,s,n,null==r?pt(a)&&De:r!=s&&0!=(3&a.type),i&j.Host&&o===a);return null!==u?$e(e,s,u,a):Ge}function Ke(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function $e(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(b(o[n]));const a=Re(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;se(t,r,j.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),Re(a),s.resolving=!1,he()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&j.Self||t&j.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return P(()=>{const e=t.prototype.constructor,n=e[$]||tn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||tn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function tn(t){return g(t)?()=>{const e=tn(p(t));return e&&e()}:yt(t)}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(xe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Qt(),t)}const nn="__parameters__";function rn(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nn)?t[nn]:Object.defineProperty(t,nn,{value:[]})[nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function un(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),un(r,e)):e!==t&&e.push(r)}return e}function cn(t,e){t.forEach(t=>Array.isArray(t)?cn(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},mn=/\n/gm,yn="__source",bn=u({provide:String,useValue:u});let vn;function _n(t){const e=vn;return vn=t,e}function wn(t,e=j.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?A(t,void 0,e):vn.get(t,e&j.Optional?null:void 0,e)}function On(t,e=j.Default){return(N||wn)(p(t),e)}function Cn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=j.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(On(t,n))}else e.push(On(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const En=Sn(rn("Inject",t=>({token:t})),-1),Tn=Sn(rn("Optional"),8),xn=Sn(rn("SkipSelf"),4);let In;function jn(t){var e;return(null===(e=function(){if(void 0===In&&(In=null,U.trustedTypes))try{In=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return In}())||void 0===e?void 0:e.createHTML(t))||t}class Nn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends Nn{getTypeName(){return"HTML"}}class An extends Nn{getTypeName(){return"Style"}}class Pn extends Nn{getTypeName(){return"Script"}}class Dn extends Nn{getTypeName(){return"URL"}}class Rn extends Nn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof Nn?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Fn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Fn(t){return t instanceof Nn&&t.getTypeName()||null}function Vn(t){return new kn(t)}function Un(t){return new An(t)}function qn(t){return new Pn(t)}function Bn(t){return new Dn(t)}function Hn(t){return new Rn(t)}class zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(jn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=jn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=jn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kn(t){return(t=String(t)).match(Qn)||t.match(Wn)?t:"unsafe:"+t}function $n(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Jn=$n("area,br,col,hr,img,wbr"),Xn=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=$n("rp,rt"),tr=Yn(Zn,Xn),er=Yn(Jn,Yn(Xn,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Zn,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=$n("srcset"),ir=Yn(nr,rr,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=$n("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Kn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Kn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(t){return!1}}()?new zn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return jn((new sr).sanitizeChildren(dr(n)||n))}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Ln(t,"URL")?Mn(t):Kn(y(t))}function gr(t){return t.ngDebugContext}function mr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class br{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gr(t)?gr(t):this._findContext(mr(t)):null}_findOriginalError(t){let e=mr(t);for(;e&&mr(e);)e=mr(e);return e}}function vr(t,e){t.__ngContext__=e}const _r=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function wr(t){return t instanceof Function?t():t}var Or=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Cr(t,e){return(void 0)(t,e)}function Sr(t){const e=t[3];return dt(e)?e[3]:e}function Er(t){return xr(t[13])}function Tr(t){return xr(t[4])}function xr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Ir(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=jt(r);0===t&&null!==n?null==i?Rr(e,n,a):Dr(e,n,a,i||null,!0):1===t&&null!==n?Dr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==jt(n)&&Ir(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Hr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function jr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Nr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function kr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Nr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,lt+e);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&Hr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Pr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Pr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Pr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Pr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):jt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Nr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Rr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Mr(t,e,n,r,i){null!==r?Dr(t,e,n,r,i):Rr(t,e,n)}function Lr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Fr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===R.None||e===R.Emulated)return null}return kt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?kt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Mr(o,i,n[a],s,!1);else Mr(o,i,n,s,!1)}function Vr(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return qr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Vr(t,n);{const n=t[e.index];return dt(n)?qr(-1,n):jt(n)}}if(32&n)return Cr(e,t)()||jt(t[e.index]);{const n=Ur(t,e);return null!==n?Array.isArray(n)?n[0]:Vr(Sr(t[16]),n):Vr(t,e.next)}}return null}function Ur(t,e){return null!==e?t[16][6].projection[e.projection]:null}function qr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Vr(t,r)}return e[7]}function Br(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&vr(jt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Br(t,e,n.child,r,i,o,!1),Ir(e,t,i,a,o);else if(32&u){const s=Cr(n,r);let u;for(;u=s();)Ir(e,t,i,u,o);Ir(e,t,i,a,o)}else 16&u?zr(t,e,r,n,i,o):Ir(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Hr(t,e,n,r,i,o){Br(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ir(e,t,i,a[u],o);else Br(t,e,a,s[3],i,o,!0)}function Gr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Qr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Wr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function $r(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Wr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Kr}function Jr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Xr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(xe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Jr(t,u,n)||""===u&&1===e.length){if(Zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!$r(t.attrs,c,n)){if(Zr(r))return!1;s=!0}continue}const l=ti(8&r?"class":u,i,Yr(t),n);if(-1===l){if(Zr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Wr(e,c,0)||2&r&&c!==t){if(Zr(r))return!1;s=!0}}}}else{if(!s&&!Zr(r)&&!Zr(u))return!1;if(s&&Zr(u))continue;s=!1,r=u|1&r}}return Zr(r)||s}function Zr(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xr(t,e[r],n))return!0;return!1}function ni(t,e){return t?":not("+e.trim()+")":e}function ri(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Zr(s)||(e+=ni(o,i),i=""),r=s,o=o||!Zr(r);n++}return""!==i&&(e+=ni(o,i)),e}const ii={};function oi(t){si(zt(),Ht(),fe()+t,Yt())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ve(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_e(e,r,0,n)}pe(n)}function ai(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function ci(t){return 2|t}function li(t){return(131068&t)>>2}function hi(t,e){return-131069&t|e<<2}function di(t){return 1|t}function fi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ie(i),n.contentQueries(2,e[o],o)}}}function pi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Vt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function gi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Kt(o,!0),o}function mi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yi(t,e,n){ae(e);try{const r=t.viewQuery;null!==r&&Qi(1,r,n);const i=t.template;null!==i&&_i(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fi(t,e),t.staticViewQueries&&Qi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)qi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,de()}}function bi(t,e,n,r){const i=e[2];if(256==(256&i))return;ae(e);const o=Yt();try{Vt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&_i(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ve(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_e(e,n,0,null),we(e,0)}if(function(t){for(let e=Er(t);null!==e;e=Tr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=Er(t);null!==e;e=Tr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&bi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&fi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ve(e,n)}else{const n=t.contentHooks;null!==n&&_e(e,n,1),we(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)pe(~r);else{const i=r,o=n[++t],s=n[++t];ee(o,i),s(2,e[i])}}}finally{pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Qi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ve(e,n)}else{const n=t.viewHooks;null!==n&&_e(e,n,2),we(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{de()}}function vi(t,e,n,r){const i=e[10],o=!Yt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&yi(t,e,r),bi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function _i(t,e,n,r,i){const o=fe();try{pe(-1),2&r&&e.length>ct&&si(t,e,ct,Yt()),n(r,i)}finally{pe(o)}}function wi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),vr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&Ri(e,n,r);const u=$e(e,t,a,n);vr(u,e),null!==s&&Mi(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{pe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ni(r,i)}}finally{pe(-1),ne(s)}}(t,e,n))}function Oi(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ci(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Si(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ii);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ei(t,e,n,r){const i=Ki(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&$i(t).push(r,i.length-1))}function Ti(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function xi(t,e,n,r,i,o,s,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ji(t,n,c,r,i),pt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):Ie(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ii(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ei(n,s.selectors,!1)&&(i||(i=[]),qe(Le(n,e),t,s.type),mt(s)?(ki(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Pi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=mi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=je(n.mergedAttrs,c.hostAttrs),Di(t,n,e,u,c),Ai(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Yr(e)?null:Li(n,i);o.push(c),s=Ti(n,u,s),a=Ti(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=je(n.mergedAttrs,n.attrs),i}function ji(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ni(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ki(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ai(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Di(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new Ee(o,mt(i),null);t.blueprint[r]=s,n[r]=s,ji(t,e,0,r,mi(t,n,i.hostVars,ii),i)}function Ri(t,e,n){const r=kt(e,t),i=Ci(n),o=t[10],s=Bi(t,pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Mi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Fi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Vi(t,e){const n=Dt(e,t);if(Lt(n)){const t=n[1];80&n[2]?bi(t,n,t.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(let n=Er(t);null!==n;n=Tr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];bi(t,e,t.template,e[8])}else e[5]>0&&Ui(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Lt(r)&&r[5]>0&&Ui(r)}}function qi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),yi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hi(t){for(;t;){t[2]|=64;const e=Sr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function zi(t,e,n){const r=e[10];r.begin&&r.begin();try{bi(t,e,t.template,n)}catch(i){throw Yi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];vi(i,r,i.template,n)}}(t[8])}function Qi(t,e,n){ie(0),e(t,n)}const Wi=(()=>Promise.resolve(null))();function Ki(t){return t[7]||(t[7]=[])}function $i(t){return t.cleanup||(t.cleanup=[])}function Yi(t,e){const n=t[9],r=n?n.get(br,null):null;r&&r.handleError(e)}function Ji(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new on("INJECTOR",-1);class to{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const eo=new on("Set Injector scope."),no={},ro={},io=[];let oo;function so(){return void 0===oo&&(oo=new to),oo}function ao(t,e=null,n=null,r){return new uo(t,n,e||so(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&cn(e,n=>this.processProvider(n,t,e)),cn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,ho(void 0,this));const o=this.records.get(eo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=j.Default){this.assertNotDestroyed();const r=_n(this);try{if(!(n&j.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&O(t);e=n&&this.injectableDefInScope(n)?ho(co(t),no):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&j.Self?so():this.parent).get(t,e=n&j.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[yn]&&i.unshift(e[yn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{_n(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{cn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];cn(r,t=>this.processProvider(t,n,r||io))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,ho(a,no));const u=r.providers;if(null!=u&&!s){const e=t;cn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=po(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return fo(t)?ho(void 0,t.useValue):ho(lo(t),no)}(t);if(po(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ho(void 0,no,!0),e.factory=()=>Cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===no&&(e.value=ro,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function co(t){const e=O(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function lo(t,e,n){let r;if(po(t)){const e=p(t);return yt(e)||co(e)}if(fo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>On(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||co(e);r=()=>new e(...Cn(t.deps))}var i;return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fo(t){return null!==t&&"object"==typeof t&&bn in t}function po(t){return"function"==typeof t}const go=function(t,e,n){return function(t,e=null,n=null,r){const i=ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let mo=(()=>{class t{static create(t,e){return Array.isArray(t)?go(t,e,""):go(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new to,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>On(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function yo(t,e){be(Rt(t)[1],Qt())}function bo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=vo(t.inputs),e.declaredInputs=vo(t.declaredInputs),e.outputs=vo(t.outputs);const n=i.hostBindings;n&&Oo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&_o(t,o),s&&wo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===bo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=je(i.hostAttrs,n=je(n,i.hostAttrs))}}(r)}function vo(t){return t===q?{}:t===H?[]:t}function _o(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Oo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Co=null;function So(){if(!Co){const t=U.Symbol;if(t&&t.iterator)Co=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Co=n)}}}return Co}class Eo{constructor(t){this.wrapped=t}static wrap(t){return new Eo(t)}static unwrap(t){return Eo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Eo}}function To(t){return!!xo(t)&&(Array.isArray(t)||!(t instanceof Map)&&So()in t)}function xo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Io(t,e,n){return t[e]=n}function jo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function No(t,e,n,r){const i=Ht();return jo(i,Zt(),e)&&(zt(),function(t,e,n,r,i,o){const s=kt(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ge(),i,t,e,n,r)),No}function ko(t,e,n,r,i,o,s,a){const u=Ht(),c=zt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=gi(e,t,4,s||null,Ft(c,a));Ii(e,n,l,Ft(c,u)),be(e,l);const h=l.tViews=Si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Kt(h,!1);const d=u[11].createComment("");Fr(c,u,d,h),vr(d,u),Bi(u,u[l]=Fi(d,u,d,h)),gt(h)&&wi(c,u,h),null!=s&&Oi(u,h,a)}function Ao(t){return Pt(qt.lFrame.contextLView,ct+t)}function Po(t,e=j.Default){const n=Ht();return null===n?On(t,e):ze(Qt(),n,p(t),e)}function Do(t,e,n){const r=Ht();return jo(r,Zt(),e)&&xi(zt(),ge(),r,t,e,r[11],n,!1),Do}function Ro(t,e,n,r,i){const o=i?"class":"style";Ji(t,n,e.inputs[o],o,r)}function Mo(t,e,n,r){const i=Ht(),o=zt(),s=ct+t,a=i[11],u=i[s]=jr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=gi(e,t,2,i,Ft(a,o));return Ii(e,n,u,Ft(a,s)),null!==u.attrs&&Xi(u,u.attrs,!1),null!==u.mergedAttrs&&Xi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Kt(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&Qr(a,u,h);const d=c.styles;null!==d&&Gr(a,u,d),64!=(64&c.flags)&&Fr(o,i,u,c),0===qt.lFrame.elementDepthCount&&vr(u,i),qt.lFrame.elementDepthCount++,gt(c)&&(wi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Oi(i,c)}function Lo(){let t=Qt();$t()?qt.lFrame.isParent=!1:(t=t.parent,Kt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(be(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ro(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ro(n,e,Ht(),e.stylesWithoutHost,!1)}function Fo(t,e,n,r){Mo(t,e,n,r),Lo()}function Vo(){return Ht()}function Uo(t){return!!t&&"function"==typeof t.then}function qo(t){return!!t&&"function"==typeof t.subscribe}const Bo=qo;function Ho(t,e,n=!1,r){const i=Ht(),o=zt(),s=Qt();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&$i(t),l=Ki(e);let h=!0;if(3&r.type){const d=kt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,m=a?t=>a(jt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Go(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Go(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Go(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ho}function zo(t,e,n){try{return!1!==e(n)}catch(r){return Yi(t,r),!1}}function Go(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Hi(s);let a=zo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=zo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Qo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Wo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ui(o):li(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ko(t[a],e)&&(u=!0,t[a+1]=r?di(n):ci(n)),a=r?ui(n):li(n)}u&&(t[n+1]=r?ci(o):di(o))}function Ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}const $o={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Yo(t){return t.substring($o.key,$o.keyEnd)}function Jo(t,e){const n=$o.textEnd;return n===e?-1:(e=$o.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,$o.key=e,n),Xo(t,e,n))}function Xo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Zo(t,e){return function(t,e,n,r){const i=Ht(),o=zt(),s=te(2);o.firstUpdatePass&&rs(o,t,s,true),e!==ii&&jo(i,s,e)&&ss(o,o.data[fe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Mn(t))),t}(e),true,s)}(t,e),Zo}function ts(t){!function(t,e,n,r){const i=zt(),o=te(2);i.firstUpdatePass&&rs(i,null,o,r);const s=Ht();if(n!==ii&&jo(s,o,n)){const a=i.data[fe()];if(cs(a,r)&&!ns(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),Ro(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===ii&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,s!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&ss(t,e,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=Mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(dn,es,t,!0)}function es(t,e){for(let n=function(t){return function(t){$o.key=0,$o.keyEnd=0,$o.value=0,$o.valueEnd=0,$o.textEnd=t.length}(t),Jo(t,Xo(t,0,$o.textEnd))}(e);n>=0;n=Jo(e,n))dn(t,Yo(e),!0)}function ns(t,e){return e>=t.expandoStartIndex}function rs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fe()],s=ns(t,n);cs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=os(n=is(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=is(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==li(r))return t[ui(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=is(null,t,e,n[1],r),n=os(n,e.attrs,r),function(t,e,n,r){t[ui(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=os(r,t[o].hostAttrs,n);return os(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ui(s),u=li(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ui(t[a+1]);t[r+1]=ai(e,a),0!==e&&(t[e+1]=hi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ai(a,0),0!==a&&(t[a+1]=hi(t[a+1],r)),a=r;else t[r+1]=ai(u,0),0===a?a=r:t[u+1]=hi(t[u+1],r),u=r;l&&(t[r+1]=ci(t[r+1])),Wo(t,c,r,!0),Wo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=di(n[r+1]))}(e,c,t,r,o),s=ai(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function is(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=os(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function os(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ss(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];us(1==(1&c)?as(u,e,n,i,li(c),s):void 0)||(us(o)||2==(2&c)&&(o=as(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Or.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Or.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Nt(fe(),n),i,o))}function as(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ii&&(l=c?B:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!us(h)&&(h=fn(e,r)),us(h)&&(a=h,s))return a;const d=t[i+1];i=s?ui(d):li(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function us(t){return void 0!==t}function cs(t,e){return 0!=(t.flags&(e?16:32))}function ls(t,e=""){const n=Ht(),r=zt(),i=t+ct,o=r.firstCreatePass?gi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Fr(r,n,s,o),Kt(o,!1)}function hs(t){return ds("",t,""),hs}function ds(t,e,n){const r=Ht(),i=function(t,e,n,r){return jo(t,Zt(),n)?e+y(n)+r:ii}(r,t,e,n);return i!==ii&&function(t,e,n){const r=Nt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,fe(),i),ds}function fs(t,e,n){const r=Ht();return jo(r,Zt(),e)&&xi(zt(),ge(),r,t,e,r[11],n,!0),fs}const ps=void 0;var gs=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ms={};function ys(t,e,n){"string"!=typeof e&&(n=e,e=t[Os.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ms[e]=t,n&&(ms[e][Os.ExtraData]=n)}function bs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ws(e);if(n)return n;const r=e.split("-")[0];if(n=ws(r),n)return n;if("en"===r)return gs;throw new Error(`Missing locale data for the locale "${t}".`)}function vs(t){return bs(t)[Os.CurrencyCode]||null}function _s(t){return bs(t)[Os.PluralCase]}function ws(t){return t in ms||(ms[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),ms[t]}var Os=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Cs="en-US";let Ss=Cs;function Es(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ss=t.toLowerCase().replace(/_/g,"-"))}function Ts(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ts(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=po(t)?t:p(t.provide),u=lo(t);const c=Qt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(po(t)||!t.multi){const r=new Ee(u,i,Po),f=js(a,e,i?l:l+d,h);-1===f?(qe(Le(c,s),o,a),xs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=js(a,e,l+d,h),p=js(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){qe(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ee(t,n,Po);return o.multi=[],o.index=e,o.componentProviders=0,Is(o,i,r&&!n),o}(i?ks:Ns,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),xs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else xs(o,t,f>-1?f:p,Is(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function xs(t,e,n,r){const i=po(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Is(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function js(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ns(t,e,n,r){return As(this.multi,[])}function ks(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=$e(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),As(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],As(i,o);return o}function As(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ps(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=mt(t);Ts(n,r.data,r.blueprint,i,!0),Ts(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ds{}class Rs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ms=(()=>{class t{}return t.NULL=new Rs,t})();function Ls(...t){}function Fs(t,e){return new Us(kt(t,e))}const Vs=function(){return Fs(Qt(),Ht())};let Us=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Vs,t})();function qs(t){return t instanceof Us?t.nativeElement:t}class Bs{}let Hs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>zs(),t})();const zs=function(){const t=Ht(),e=Dt(Qt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Gs=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Qs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ws=new Qs("11.2.7");class Ks{constructor(){}supports(t){return To(t)}create(t){return new Ys(t)}}const $s=(t,e)=>e;class Ys{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||$s}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ta(n,r,i)?e:n,s=ta(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!To(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[So()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Js(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Zs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Js{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Zs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Xs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ta(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ea{constructor(){}supports(t){return t instanceof Map||xo(t)}create(){return new na}}class na{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||xo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ra(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ra{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ia(){return new oa([new Ks])}let oa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ia()),deps:[[t,new xn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:ia}),t})();function sa(){return new aa([new ea])}let aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||sa()),deps:[[t,new xn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:sa}),t})();function ua(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(jt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ua(e[1],e,n,r)}const s=n.type;if(8&s)ua(t,e,n.child,r);else if(32&s){const t=Cr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Ur(e,n);if(Array.isArray(t))r.push(...t);else{const n=Sr(e[16]);ua(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ca{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ua(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(kr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){Ei(this._lView[1],this._lView,null,t)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{zi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Hr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class la extends ca{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Gi(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const ha=fa;let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t.__ChangeDetectorRef__=!0,t})();function fa(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Dt(t.index,e);return new ca(n,n)}return 47&t.type?new ca(e[16],e):null}(Qt(),Ht(),t)}const pa=[new ea],ga=new oa([new Ks]),ma=new aa(pa),ya=function(){return wa(Qt(),Ht())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=ya,t})();const va=ba,_a=class extends va{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),yi(e,n,t),new ca(n)}};function wa(t,e){return 4&t.type?new _a(e,t,Fs(t,e)):null}class Oa{}class Ca{}const Sa=function(){return Na(Qt(),Ht())};let Ea=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sa,t})();const Ta=Ea,xa=class extends Ta{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Fs(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(ke(t)){const e=Pe(t,this._hostLView),n=Ae(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ia(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Oa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new xa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],ln(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=qr(i,o),a=n[11],u=Lr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Hr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),ln(ja(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ia(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);n&&(hn(ja(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);return n&&null!=hn(ja(this._lContainer),e)?new ca(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ia(t){return t[8]}function ja(t){return t[8]||(t[8]=[])}function Na(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=jt(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Dr(n,Lr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Fi(r,e,i,t),Bi(e,n)}return new xa(n,t,e)}const ka={};class Aa extends Ms{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new Ra(e,this.ngModule)}}function Pa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Da=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_r});class Ra extends Ds{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ri).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Pa(this.componentDef.inputs)}get outputs(){return Pa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ka,i);return o!==ka||r===ka?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Bs,It),s=i.get(Gs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===R.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):jr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:_r,clean:Wi,playerHandler:null,flags:0},d=Si(0,null,null,1,0,null,null,null,null,null),f=pi(null,d,h,l,null,null,o,a,s,i);let p,g;ae(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=gi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Xi(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&Qr(i,t,a.classes),null!==a.styles&&Gr(i,t,a.styles)));const c=r.createRenderer(t,e),l=pi(n,Ci(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Le(a,n),s,e.type),ki(s,a),Pi(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Te(a,c,["ng-version",Ws.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&Qr(a,c,e.join(" "))}if(g=At(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Qt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Di(t,r,e,mi(t,e,1,null),n));const i=$e(e,t,r.directiveStart,r);vr(i,e);const o=kt(r,e);return o&&vr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Qt();e.contentQueries(1,s,t.directiveStart)}const a=Qt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(pe(a.index),ji(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ni(e,s)),s}(t,this.componentDef,f,h,[yo]),yi(d,f,null)}finally{de()}return new Ma(this.componentType,p,Fs(g,f),f,g)}}class Ma extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new la(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const La=new Map;class Fa extends Oa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Aa(this);const n=ut(t),r=t[K]||null;r&&Es(r),this._bootstrapComponents=wr(n.bootstrap),this._r3Injector=ao(t,e,[{provide:Oa,useValue:this},{provide:Ms,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=mo.THROW_IF_NOT_FOUND,n=j.Default){return t===mo||t===Oa||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Va extends Ca{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,La.get(i),n),La.set(i,n));const o=wr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Fa(this.moduleType,t)}}function Ua(t,e,n){const r=Xt()+t,i=Ht();return i[r]===ii?Io(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function qa(t,e,n,r){return Ba(Ht(),Xt(),t,e,n,r)}function Ba(t,e,n,r,i,o){const s=e+n;return jo(t,s,i)?Io(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ii?void 0:n}(t,s+1)}function Ha(t,e){const n=zt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=yt(r.type)),s=k(Po);try{const t=Re(!1),e=o();return Re(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ht(),i,e),e}finally{k(s)}}function za(t,e,n){const r=t+ct,i=Ht(),o=Pt(i,r);return function(t,e){return Eo.isWrapped(e)&&(e=Eo.unwrap(e),t[qt.lFrame.bindingIndex]=ii),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Ba(i,Xt(),e,o.transform,n,o):o.transform(n))}const Ga=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Qa(){return this._results[So()]()}class Wa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=So(),n=Wa.prototype;n[e]||(n[e]=Qa)}get changes(){return this._changes||(this._changes=new Ga)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=un(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ka{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ka(this.queryList)}setDirty(){this.queryList.setDirty()}}class $a{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new $a(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==su(t,e).matches&&this.queries[e].setDirty()}}class Ya{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ja{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ja(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Xa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Xa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Za(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===ba?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Us||r===Ea||r===ba&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Za(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function tu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Fs(t,e):4&t.type?wa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Us?Fs(e,t):n===ba?wa(e,t):n===Ea?Na(e,t):void 0}(t,e,r):$e(t,t[1],n,e)}function eu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:tu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function nu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=eu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&nu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];nu(n[1],n,i,r)}}}}}return r}function ru(t){const e=Ht(),n=zt(),r=re();ie(r+1);const i=su(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?nu(n,e,r,[]):eu(n,e,i,r);t.reset(o,qs),t.notifyOnChanges()}return!0}return!1}function iu(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Qt();(function(t,e,n){null===t.queries&&(t.queries=new Ja),t.queries.track(new Xa(e,n))})(i,new Ya(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Wa(4==(4&n));Ei(t,e,r,r.destroy),null===e[19]&&(e[19]=new $a),e[19].queries.push(new Ka(r))}(i,Ht(),n)}function ou(){return t=Ht(),e=re(),t[19].queries[e].queryList;var t,e}function su(t,e){return t.queries.getByIndex(e)}function au(t,e){return wa(t,e)}function uu(t=j.Default){const e=fa(!0);if(null!=e||t&j.Optional)return e;v("ChangeDetectorRef")}const cu=new on("Application Initializer");let lu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ls,this.reject=Ls,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Uo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(On(cu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const hu=new on("AppId"),du={provide:hu,useFactory:function(){return`${fu()}${fu()}${fu()}`},deps:[]};function fu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pu=new on("Platform Initializer"),gu=new on("Platform ID"),mu=new on("appBootstrapListener");let yu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const bu=new on("LocaleId"),vu=new on("DefaultCurrencyCode");class _u{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const wu=function(t){return new Va(t)},Ou=wu,Cu=function(t){return Promise.resolve(wu(t))},Su=function(t){const e=wu(t),n=wr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new Ra(n)),t},[]);return new _u(e,n)},Eu=Su,Tu=function(t){return Promise.resolve(Su(t))};let xu=(()=>{class t{constructor(){this.compileModuleSync=Ou,this.compileModuleAsync=Cu,this.compileModuleAndAllComponentsSync=Eu,this.compileModuleAndAllComponentsAsync=Tu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Iu=(()=>Promise.resolve(0))();function ju(t){"undefined"==typeof Zone?Iu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Nu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ga(!1),this.onMicrotaskEmpty=new Ga(!1),this.onStable=new Ga(!1),this.onError=new Ga(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pu(t),Au(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Du(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ru(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Du(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ru(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Pu(t),Au(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ku,Ls,Ls);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ku={};function Au(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Pu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Du(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ru(t){t._nesting--,Au(t)}class Mu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ga,this.onMicrotaskEmpty=new Ga,this.onStable=new Ga,this.onError=new Ga}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Lu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nu.assertNotInAngularZone(),ju(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ju(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(On(Nu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Fu=(()=>{class t{constructor(){this._applications=new Map,Bu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Bu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Vu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Uu(t){Bu=t}let qu,Bu=new Vu,Hu=!0,zu=!1;function Gu(){return zu=!0,Hu}function Qu(){if(zu)throw new Error("Cannot enable prod mode after platform setup.");Hu=!1}const Wu=new on("AllowMultipleToken");class Ku{constructor(t,e){this.name=t,this.token=e}}function $u(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let o=Yu();if(!o||o.injector.get(Wu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:eo,useValue:"platform"});!function(t){if(qu&&!qu.destroyed&&!qu.injector.get(Wu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");qu=t.get(Ju);const e=t.get(pu,null);e&&e.forEach(t=>t())}(mo.create({providers:t,name:r}))}return function(t){const e=Yu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Yu(){return qu&&!qu.destroyed?qu:null}let Ju=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Mu:("zone.js"===t?void 0:t)||new Nu({enableLongStackTrace:Gu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Nu,useValue:n}];return n.run(()=>{const e=mo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(br,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{tc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Uo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(lu);return t.runInitializers(),t.donePromise.then(()=>(Es(i.injector.get(bu,Cs)||Cs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Xu({},e);return function(t,e,n){const r=new Va(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Zu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(On(mo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Xu(t,e){return Array.isArray(e)?e.reduce(Xu,t):Object.assign(Object.assign({},t),e)}let Zu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Nu.assertNotInAngularZone(),ju(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ds?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Oa),i=n.create(mo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Lu,null),a=s&&i.injector.get(Fu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),tc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;tc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(mu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(On(Nu),On(mo),On(br),On(Ms),On(lu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function tc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ec{}class nc{}const rc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ic=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||rc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>oc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>oc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(On(xu),On(nc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function oc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const sc=function(t){return null},ac=$u(null,"core",[{provide:gu,useValue:"unknown"},{provide:Ju,deps:[mo]},{provide:Fu,deps:[]},{provide:yu,deps:[]}]),uc=[{provide:Zu,useClass:Zu,deps:[Nu,mo,br,Ms,lu]},{provide:Da,deps:[Nu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:lu,useClass:lu,deps:[[new Tn,cu]]},{provide:xu,useClass:xu,deps:[]},du,{provide:oa,useFactory:function(){return ga},deps:[]},{provide:aa,useFactory:function(){return ma},deps:[]},{provide:bu,useFactory:function(t){return Es(t=t||"undefined"!=typeof $localize&&$localize.locale||Cs),t},deps:[[new En(bu),new Tn,new xn]]},{provide:vu,useValue:"USD"}];let cc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(On(Zu))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:uc}),t})()},fnh7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.from=r.from},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},itXk:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("z+Ro"),i=n("DH7j"),o=n("l7GE"),s=n("ZUHj"),a=n("yCtX");const u={};function c(...t){let e,n;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(a.a)(t,n).lift(new l(e))}class l{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends o.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(u),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(s.a)(this,e,void 0,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===u?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("XNiG"),i=n("qgXg"),o=n("quSY"),s=n("pxpQ"),a=n("9ppp"),u=n("Ylt2");class c extends r.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new l(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let c;if(this.closed)throw new a.a;if(this.isStopped||this.hasError?c=o.a.EMPTY:(this.observers.push(t),c=new u.a(this,t)),r&&t.add(t=new s.a(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),c}_getNow(){return(this.scheduler||i.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class l{constructor(t,e){this.time=t,this.value=e}}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},kU1M:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",function(){return i}),n.d(e,"auditTime",function(){return c}),n.d(e,"buffer",function(){return l}),n.d(e,"bufferCount",function(){return p}),n.d(e,"bufferTime",function(){return v}),n.d(e,"bufferToggle",function(){return j}),n.d(e,"bufferWhen",function(){return A}),n.d(e,"catchError",function(){return R.a}),n.d(e,"combineAll",function(){return L}),n.d(e,"combineLatest",function(){return U}),n.d(e,"concat",function(){return q.a}),n.d(e,"concatAll",function(){return B.a}),n.d(e,"concatMap",function(){return H.a}),n.d(e,"concatMapTo",function(){return z}),n.d(e,"count",function(){return G}),n.d(e,"debounce",function(){return K}),n.d(e,"debounceTime",function(){return J.a}),n.d(e,"defaultIfEmpty",function(){return X.a}),n.d(e,"delay",function(){return Z.a}),n.d(e,"delayWhen",function(){return tt.a}),n.d(e,"dematerialize",function(){return et}),n.d(e,"distinct",function(){return it}),n.d(e,"distinctUntilChanged",function(){return at.a}),n.d(e,"distinctUntilKeyChanged",function(){return ut}),n.d(e,"elementAt",function(){return ft}),n.d(e,"endWith",function(){return mt}),n.d(e,"every",function(){return yt}),n.d(e,"exhaust",function(){return _t}),n.d(e,"exhaustMap",function(){return St}),n.d(e,"expand",function(){return xt}),n.d(e,"filter",function(){return lt.a}),n.d(e,"finalize",function(){return Nt.a}),n.d(e,"find",function(){return kt}),n.d(e,"findIndex",function(){return Dt}),n.d(e,"first",function(){return Rt.a}),n.d(e,"groupBy",function(){return Mt.b}),n.d(e,"ignoreElements",function(){return Lt}),n.d(e,"isEmpty",function(){return Ut}),n.d(e,"last",function(){return Ht.a}),n.d(e,"map",function(){return Ct.a}),n.d(e,"mapTo",function(){return zt.a}),n.d(e,"materialize",function(){return Qt}),n.d(e,"max",function(){return Zt}),n.d(e,"merge",function(){return ee}),n.d(e,"mergeAll",function(){return ne.a}),n.d(e,"mergeMap",function(){return re.b}),n.d(e,"flatMap",function(){return re.a}),n.d(e,"mergeMapTo",function(){return ie}),n.d(e,"mergeScan",function(){return oe}),n.d(e,"min",function(){return ue}),n.d(e,"multicast",function(){return ce.a}),n.d(e,"observeOn",function(){return le.b}),n.d(e,"onErrorResumeNext",function(){return he}),n.d(e,"pairwise",function(){return pe.a}),n.d(e,"partition",function(){return me}),n.d(e,"pluck",function(){return ye}),n.d(e,"publish",function(){return ve}),n.d(e,"publishBehavior",function(){return we}),n.d(e,"publishLast",function(){return Ce}),n.d(e,"publishReplay",function(){return Ee}),n.d(e,"race",function(){return xe}),n.d(e,"reduce",function(){return Xt}),n.d(e,"repeat",function(){return je}),n.d(e,"repeatWhen",function(){return Ae}),n.d(e,"retry",function(){return Re}),n.d(e,"retryWhen",function(){return Fe}),n.d(e,"refCount",function(){return qe.a}),n.d(e,"sample",function(){return Be}),n.d(e,"sampleTime",function(){return Ge}),n.d(e,"scan",function(){return $t.a}),n.d(e,"sequenceEqual",function(){return $e}),n.d(e,"share",function(){return Ze.a}),n.d(e,"shareReplay",function(){return tn.a}),n.d(e,"single",function(){return nn}),n.d(e,"skip",function(){return sn}),n.d(e,"skipLast",function(){return cn}),n.d(e,"skipUntil",function(){return dn}),n.d(e,"skipWhile",function(){return gn.a}),n.d(e,"startWith",function(){return mn.a}),n.d(e,"subscribeOn",function(){return yn.a}),n.d(e,"switchAll",function(){return _n}),n.d(e,"switchMap",function(){return bn.a}),n.d(e,"switchMapTo",function(){return wn.a}),n.d(e,"take",function(){return dt.a}),n.d(e,"takeLast",function(){return Yt.a}),n.d(e,"takeUntil",function(){return On}),n.d(e,"takeWhile",function(){return En}),n.d(e,"tap",function(){return In.a}),n.d(e,"throttle",function(){return Nn}),n.d(e,"throttleTime",function(){return Pn}),n.d(e,"throwIfEmpty",function(){return ht.a}),n.d(e,"timeInterval",function(){return Fn}),n.d(e,"timeout",function(){return Qn}),n.d(e,"timeoutWith",function(){return Bn}),n.d(e,"timestamp",function(){return Wn}),n.d(e,"toArray",function(){return Yn}),n.d(e,"window",function(){return Jn}),n.d(e,"windowCount",function(){return tr}),n.d(e,"windowTime",function(){return ir}),n.d(e,"windowToggle",function(){return hr}),n.d(e,"windowWhen",function(){return pr}),n.d(e,"withLatestFrom",function(){return yr.a}),n.d(e,"zip",function(){return br.a}),n.d(e,"zipAll",function(){return _r});var r=n("zx2A");function i(t){return function(e){return e.lift(new o(t))}}class o{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new s(t,this.durationSelector))}}class s extends r.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=Object(r.c)(n,new r.a(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var a=n("D0XW"),u=n("PqYM");function c(t,e=a.a){return i(()=>Object(u.a)(t,e))}function l(t){return function(e){return e.lift(new h(t))}}class h{constructor(t){this.closingNotifier=t}call(t,e){return e.subscribe(new d(t,this.closingNotifier))}}class d extends r.b{constructor(t,e){super(t),this.buffer=[],this.add(Object(r.c)(e,new r.a(this)))}_next(t){this.buffer.push(t)}notifyNext(){const t=this.buffer;this.buffer=[],this.destination.next(t)}}var f=n("7o/Q");function p(t,e=null){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?y:m}call(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}class m extends f.a{constructor(t,e){super(t),this.bufferSize=e,this.buffer=[]}_next(t){const e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])}_complete(){const t=this.buffer;t.length>0&&this.destination.next(t),super._complete()}}class y extends f.a{constructor(t,e,n){super(t),this.bufferSize=e,this.startBufferEvery=n,this.buffers=[],this.count=0}_next(t){const{bufferSize:e,startBufferEvery:n,buffers:r,count:i}=this;this.count++,i%n==0&&r.push([]);for(let o=r.length;o--;){const n=r[o];n.push(t),n.length===e&&(r.splice(o,1),this.destination.next(n))}}_complete(){const{buffers:t,destination:e}=this;for(;t.length>0;){let n=t.shift();n.length>0&&e.next(n)}super._complete()}}var b=n("z+Ro");function v(t){let e=arguments.length,n=a.a;Object(b.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);let r=null;e>=2&&(r=arguments[1]);let i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new _(t,r,i,n))}}class _{constructor(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}call(t,e){return e.subscribe(new O(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class w{constructor(){this.buffer=[]}}class O extends f.a{constructor(t,e,n,r,i){super(t),this.bufferTimeSpan=e,this.bufferCreationInterval=n,this.maxBufferSize=r,this.scheduler=i,this.contexts=[];const o=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly)this.add(o.closeAction=i.schedule(C,e,{subscriber:this,context:o,bufferTimeSpan:e}));else{const t={bufferTimeSpan:e,bufferCreationInterval:n,subscriber:this,scheduler:i};this.add(o.closeAction=i.schedule(E,e,{subscriber:this,context:o})),this.add(i.schedule(S,n,t))}}_next(t){const e=this.contexts,n=e.length;let r;for(let i=0;i<n;i++){const n=e[i],o=n.buffer;o.push(t),o.length==this.maxBufferSize&&(r=n)}r&&this.onBufferFull(r)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:e}=this;for(;t.length>0;){const n=t.shift();e.next(n.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();const e=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(C,e,{subscriber:this,context:t,bufferTimeSpan:e}))}}openContext(){const t=new w;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}function C(t){const e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function S(t){const{bufferCreationInterval:e,bufferTimeSpan:n,subscriber:r,scheduler:i}=t,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(E,n,{subscriber:r,context:o})),this.schedule(t,e))}function E(t){const{subscriber:e,context:n}=t;e.closeContext(n)}var T=n("quSY"),x=n("ZUHj"),I=n("l7GE");function j(t,e){return function(n){return n.lift(new N(t,e))}}class N{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new k(t,this.openings,this.closingSelector))}}class k extends I.a{constructor(t,e,n){super(t),this.closingSelector=n,this.contexts=[],this.add(Object(x.a)(this,e))}_next(t){const e=this.contexts,n=e.length;for(let r=0;r<n;r++)e[r].buffer.push(t)}_error(t){const e=this.contexts;for(;e.length>0;){const t=e.shift();t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,super._error(t)}_complete(){const t=this.contexts;for(;t.length>0;){const e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,super._complete()}notifyNext(t,e){t?this.closeBuffer(t):this.openBuffer(e)}notifyComplete(t){this.closeBuffer(t.context)}openBuffer(t){try{const e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(e){this._error(e)}}closeBuffer(t){const e=this.contexts;if(e&&t){const{buffer:n,subscription:r}=t;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}}trySubscribe(t){const e=this.contexts,n=new T.a,r={buffer:[],subscription:n};e.push(r);const i=Object(x.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))}}function A(t){return function(e){return e.lift(new P(t))}}class P{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new D(t,this.closingSelector))}}class D extends r.b{constructor(t,e){super(t),this.closingSelector=e,this.subscribing=!1,this.openBuffer()}_next(t){this.buffer.push(t)}_complete(){const t=this.buffer;t&&this.destination.next(t),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let t,{closingSubscription:e}=this;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:e}=this;t=e()}catch(n){return this.error(n)}e=new T.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(r.c)(t,new r.a(this))),this.subscribing=!1}}var R=n("JIr8"),M=n("itXk");function L(t){return e=>e.lift(new M.a(t))}var F=n("DH7j"),V=n("Cfvw");function U(...t){let e=null;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(F.a)(t[0])&&(t=t[0].slice()),n=>n.lift.call(Object(V.a)([n,...t]),new M.a(e))}var q=n("f29J"),B=n("0EUg"),H=n("bOdf");function z(t,e){return Object(H.a)(()=>t,e)}function G(t){return e=>e.lift(new Q(t,e))}class Q{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new W(t,this.predicate,this.source))}}class W extends f.a{constructor(t,e,n){super(t),this.predicate=e,this.source=n,this.count=0,this.index=0}_next(t){this.predicate?this._tryPredicate(t):this.count++}_tryPredicate(t){let e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}function K(t){return e=>e.lift(new $(t))}class ${constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new Y(t,this.durationSelector))}}class Y extends r.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){try{const e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(e){this.destination.error(e)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(t,e){let n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=Object(r.c)(e,new r.a(this)),n&&!n.closed&&this.add(this.durationSubscription=n)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,super._next(t)}}}var J=n("Kj3r"),X=n("xbPD"),Z=n("3E0/"),tt=n("coGc");function et(){return function(t){return t.lift(new nt)}}class nt{call(t,e){return e.subscribe(new rt(t))}}class rt extends f.a{constructor(t){super(t)}_next(t){t.observe(this.destination)}}function it(t,e){return n=>n.lift(new ot(t,e))}class ot{constructor(t,e){this.keySelector=t,this.flushes=e}call(t,e){return e.subscribe(new st(t,this.keySelector,this.flushes))}}class st extends r.b{constructor(t,e,n){super(t),this.keySelector=e,this.values=new Set,n&&this.add(Object(r.c)(n,new r.a(this)))}notifyNext(){this.values.clear()}notifyError(t){this._error(t)}_next(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}_useKeySelector(t){let e;const{destination:n}=this;try{e=this.keySelector(t)}catch(r){return void n.error(r)}this._finalizeNext(e,t)}_finalizeNext(t,e){const{values:n}=this;n.has(t)||(n.add(t),this.destination.next(e))}}var at=n("/uUt");function ut(t,e){return Object(at.a)((n,r)=>e?e(n[t],r[t]):n[t]===r[t])}var ct=n("4I5i"),lt=n("pLZG"),ht=n("XDbj"),dt=n("IzEk");function ft(t,e){if(t<0)throw new ct.a;const n=arguments.length>=2;return r=>r.pipe(Object(lt.a)((e,n)=>n===t),Object(dt.a)(1),n?Object(X.a)(e):Object(ht.a)(()=>new ct.a))}var pt=n("GyhO"),gt=n("LRne");function mt(...t){return e=>Object(pt.a)(e,Object(gt.a)(...t))}function yt(t,e){return n=>n.lift(new bt(t,e,n))}class bt{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new vt(t,this.predicate,this.thisArg,this.source))}}class vt extends f.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function _t(){return t=>t.lift(new wt)}class wt{call(t,e){return e.subscribe(new Ot(t))}}class Ot extends r.b{constructor(t){super(t),this.hasCompleted=!1,this.hasSubscription=!1}_next(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(r.c)(t,new r.a(this))))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}var Ct=n("lJxs");function St(t,e){return e?n=>n.pipe(St((n,r)=>Object(V.a)(t(n,r)).pipe(Object(Ct.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Et(t))}class Et{constructor(t){this.project=t}call(t,e){return e.subscribe(new Tt(t,this.project))}}class Tt extends r.b{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function xt(t,e=Number.POSITIVE_INFINITY,n){return e=(e||0)<1?Number.POSITIVE_INFINITY:e,r=>r.lift(new It(t,e,n))}class It{constructor(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}call(t,e){return e.subscribe(new jt(t,this.project,this.concurrent,this.scheduler))}}class jt extends r.b{constructor(t,e,n,r){super(t),this.project=e,this.concurrent=n,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(t){const{subscriber:e,result:n,value:r,index:i}=t;e.subscribeToProjection(n,r,i)}_next(t){const e=this.destination;if(e.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){e.next(t);try{const{project:e}=this,r=e(t,n);this.scheduler?this.destination.add(this.scheduler.schedule(jt.dispatch,0,{subscriber:this,result:r,value:t,index:n})):this.subscribeToProjection(r,t,n)}catch(r){e.error(r)}}else this.buffer.push(t)}subscribeToProjection(t,e,n){this.active++,this.destination.add(Object(r.c)(t,new r.a(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this._next(t)}notifyComplete(){const t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var Nt=n("nYR2");function kt(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return n=>n.lift(new At(t,n,!1,e))}class At{constructor(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}call(t,e){return e.subscribe(new Pt(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class Pt extends f.a{constructor(t,e,n,r,i){super(t),this.predicate=e,this.source=n,this.yieldIndex=r,this.thisArg=i,this.index=0}notifyComplete(t){const e=this.destination;e.next(t),e.complete(),this.unsubscribe()}_next(t){const{predicate:e,thisArg:n}=this,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(i){this.destination.error(i)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}function Dt(t,e){return n=>n.lift(new At(t,n,!0,e))}var Rt=n("SxV6"),Mt=n("OQgR");function Lt(){return function(t){return t.lift(new Ft)}}class Ft{call(t,e){return e.subscribe(new Vt(t))}}class Vt extends f.a{_next(t){}}function Ut(){return t=>t.lift(new qt)}class qt{call(t,e){return e.subscribe(new Bt(t))}}class Bt extends f.a{constructor(t){super(t)}notifyComplete(t){const e=this.destination;e.next(t),e.complete()}_next(t){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var Ht=n("NJ9Y"),zt=n("CqXF"),Gt=n("WMd4");function Qt(){return function(t){return t.lift(new Wt)}}class Wt{call(t,e){return e.subscribe(new Kt(t))}}class Kt extends f.a{constructor(t){super(t)}_next(t){this.destination.next(Gt.a.createNext(t))}_error(t){const e=this.destination;e.next(Gt.a.createError(t)),e.complete()}_complete(){const t=this.destination;t.next(Gt.a.createComplete()),t.complete()}}var $t=n("Kqap"),Yt=n("BFxc"),Jt=n("mCNh");function Xt(t,e){return arguments.length>=2?function(n){return Object(Jt.a)(Object($t.a)(t,e),Object(Yt.a)(1),Object(X.a)(e))(n)}:function(e){return Object(Jt.a)(Object($t.a)((e,n,r)=>t(e,n,r+1)),Object(Yt.a)(1))(e)}}function Zt(t){return Xt("function"==typeof t?(e,n)=>t(e,n)>0?e:n:(t,e)=>t>e?t:e)}var te=n("VRyK");function ee(...t){return e=>e.lift.call(Object(te.a)(e,...t))}var ne=n("bHdf"),re=n("5+tZ");function ie(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?Object(re.b)(()=>t,e,n):("number"==typeof e&&(n=e),Object(re.b)(()=>t,n))}function oe(t,e,n=Number.POSITIVE_INFINITY){return r=>r.lift(new se(t,e,n))}class se{constructor(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}call(t,e){return e.subscribe(new ae(t,this.accumulator,this.seed,this.concurrent))}}class ae extends r.b{constructor(t,e,n,r){super(t),this.accumulator=e,this.acc=n,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){if(this.active<this.concurrent){const n=this.index++,r=this.destination;let i;try{const{accumulator:e}=this;i=e(this.acc,t,n)}catch(e){return r.error(e)}this.active++,this._innerSub(i)}else this.buffer.push(t)}_innerSub(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(t){const{destination:e}=this;this.acc=t,this.hasValue=!0,e.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function ue(t){return Xt("function"==typeof t?(e,n)=>t(e,n)<0?e:n:(t,e)=>t<e?t:e)}var ce=n("oB13"),le=n("pxpQ");function he(...t){return 1===t.length&&Object(F.a)(t[0])&&(t=t[0]),e=>e.lift(new de(t))}class de{constructor(t){this.nextSources=t}call(t,e){return e.subscribe(new fe(t,this.nextSources))}}class fe extends r.b{constructor(t,e){super(t),this.destination=t,this.nextSources=e}notifyError(){this.subscribeToNextSource()}notifyComplete(){this.subscribeToNextSource()}_error(t){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const t=this.nextSources.shift();if(t){const e=new r.a(this),n=this.destination;n.add(e);const i=Object(r.c)(t,e);i!==e&&n.add(i)}else this.destination.complete()}}var pe=n("Zy1z"),ge=n("F97/");function me(t,e){return n=>[Object(lt.a)(t,e)(n),Object(lt.a)(Object(ge.a)(t,e))(n)]}function ye(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(Ct.a)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}var be=n("XNiG");function ve(t){return t?Object(ce.a)(()=>new be.a,t):Object(ce.a)(new be.a)}var _e=n("2Vo4");function we(t){return e=>Object(ce.a)(new _e.a(t))(e)}var Oe=n("NHP+");function Ce(){return t=>Object(ce.a)(new Oe.a)(t)}var Se=n("jtHE");function Ee(t,e,n,r){n&&"function"!=typeof n&&(r=n);const i="function"==typeof n?n:void 0,o=new Se.a(t,e,r);return t=>Object(ce.a)(()=>o,i)(t)}var Te=n("Nv8m");function xe(...t){return function(e){return 1===t.length&&Object(F.a)(t[0])&&(t=t[0]),e.lift.call(Object(Te.a)(e,...t))}}var Ie=n("EY2u");function je(t=-1){return e=>0===t?Object(Ie.b)():e.lift(new Ne(t<0?-1:t-1,e))}class Ne{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new ke(t,this.count,this.source))}}class ke extends f.a{constructor(t,e,n){super(t),this.count=e,this.source=n}complete(){if(!this.isStopped){const{source:t,count:e}=this;if(0===e)return super.complete();e>-1&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}}}function Ae(t){return e=>e.lift(new Pe(t))}class Pe{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new De(t,this.notifier,e))}}class De extends r.b{constructor(t,e,n){super(t),this.notifier=e,this.source=n,this.sourceIsBeingSubscribedTo=!0}notifyNext(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}_unsubscribe(){const{notifications:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}_unsubscribeAndRecycle(){const{_unsubscribe:t}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=t,this}subscribeToRetries(){let t;this.notifications=new be.a;try{const{notifier:e}=this;t=e(this.notifications)}catch(e){return super.complete()}this.retries=t,this.retriesSubscription=Object(r.c)(t,new r.a(this))}}function Re(t=-1){return e=>e.lift(new Me(t,e))}class Me{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new Le(t,this.count,this.source))}}class Le extends f.a{constructor(t,e,n){super(t),this.count=e,this.source=n}error(t){if(!this.isStopped){const{source:e,count:n}=this;if(0===n)return super.error(t);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}}}function Fe(t){return e=>e.lift(new Ve(t,e))}class Ve{constructor(t,e){this.notifier=t,this.source=e}call(t,e){return e.subscribe(new Ue(t,this.notifier,this.source))}}class Ue extends r.b{constructor(t,e,n){super(t),this.notifier=e,this.source=n}error(t){if(!this.isStopped){let n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new be.a;try{const{notifier:t}=this;i=t(n)}catch(e){return super.error(e)}o=Object(r.c)(i,new r.a(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(t)}}_unsubscribe(){const{errors:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:t}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}var qe=n("x+ZX");function Be(t){return e=>e.lift(new He(t))}class He{constructor(t){this.notifier=t}call(t,e){const n=new ze(t),i=e.subscribe(n);return i.add(Object(r.c)(this.notifier,new r.a(n))),i}}class ze extends r.b{constructor(){super(...arguments),this.hasValue=!1}_next(t){this.value=t,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function Ge(t,e=a.a){return n=>n.lift(new Qe(t,e))}class Qe{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new We(t,this.period,this.scheduler))}}class We extends f.a{constructor(t,e,n){super(t),this.period=e,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(Ke,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function Ke(t){let{subscriber:e,period:n}=t;e.notifyNext(),this.schedule(t,n)}function $e(t,e){return n=>n.lift(new Ye(t,e))}class Ye{constructor(t,e){this.compareTo=t,this.comparator=e}call(t,e){return e.subscribe(new Je(t,this.compareTo,this.comparator))}}class Je extends f.a{constructor(t,e,n){super(t),this.compareTo=e,this.comparator=n,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(e.subscribe(new Xe(t,this)))}_next(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:t,_b:e,comparator:n}=this;for(;t.length>0&&e.length>0;){let i=t.shift(),o=e.shift(),s=!1;try{s=n?n(i,o):i===o}catch(r){this.destination.error(r)}s||this.emit(!1)}}emit(t){const{destination:e}=this;e.next(t),e.complete()}nextB(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class Xe extends f.a{constructor(t,e){super(t),this.parent=e}_next(t){this.parent.nextB(t)}_error(t){this.parent.error(t),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}var Ze=n("w1tV"),tn=n("UXun"),en=n("sVev");function nn(t){return e=>e.lift(new rn(t,e))}class rn{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new on(t,this.predicate,this.source))}}class on extends f.a{constructor(t,e,n){super(t),this.predicate=e,this.source=n,this.seenValue=!1,this.index=0}applySingleValue(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}_next(t){const e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}tryNext(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}}_complete(){const t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new en.a)}}function sn(t){return e=>e.lift(new an(t))}class an{constructor(t){this.total=t}call(t,e){return e.subscribe(new un(t,this.total))}}class un extends f.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function cn(t){return e=>e.lift(new ln(t))}class ln{constructor(t){if(this._skipCount=t,this._skipCount<0)throw new ct.a}call(t,e){return e.subscribe(0===this._skipCount?new f.a(t):new hn(t,this._skipCount))}}class hn extends f.a{constructor(t,e){super(t),this._skipCount=e,this._count=0,this._ring=new Array(e)}_next(t){const e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{const r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}}}function dn(t){return e=>e.lift(new fn(t))}class fn{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new pn(t,this.notifier))}}class pn extends r.b{constructor(t,e){super(t),this.hasValue=!1;const n=new r.a(this);this.add(n),this.innerSubscription=n;const i=Object(r.c)(e,n);i!==n&&(this.add(i),this.innerSubscription=i)}_next(t){this.hasValue&&super._next(t)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}var gn=n("32Ea"),mn=n("JX91"),yn=n("tf+s"),bn=n("eIep"),vn=n("SpAZ");function _n(){return Object(bn.a)(vn.a)}var wn=n("aGrj");function On(t){return e=>e.lift(new Cn(t))}class Cn{constructor(t){this.notifier=t}call(t,e){const n=new Sn(t),i=Object(r.c)(this.notifier,new r.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Sn extends r.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function En(t,e=!1){return n=>n.lift(new Tn(t,e))}class Tn{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new xn(t,this.predicate,this.inclusive))}}class xn extends f.a{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(r){return void e.error(r)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}var In=n("vkgz");const jn={leading:!0,trailing:!1};function Nn(t,e=jn){return n=>n.lift(new kn(t,!!e.leading,!!e.trailing))}class kn{constructor(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}call(t,e){return e.subscribe(new An(t,this.durationSelector,this.leading,this.trailing))}}class An extends r.b{constructor(t,e,n,r){super(t),this.destination=t,this.durationSelector=e,this._leading=n,this._trailing=r,this._hasValue=!1}_next(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}send(){const{_hasValue:t,_sendValue:e}=this;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}throttle(t){const e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(r.c)(e,new r.a(this)))}tryDurationSelector(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}throttlingDone(){const{_throttled:t,_trailing:e}=this;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function Pn(t,e=a.a,n=jn){return r=>r.lift(new Dn(t,e,n.leading,n.trailing))}class Dn{constructor(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}call(t,e){return e.subscribe(new Rn(t,this.duration,this.scheduler,this.leading,this.trailing))}}class Rn extends f.a{constructor(t,e,n,r,i){super(t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Mn,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function Mn(t){const{subscriber:e}=t;e.clearThrottle()}var Ln=n("NXyV");function Fn(t=a.a){return e=>Object(Ln.a)(()=>e.pipe(Object($t.a)(({current:e},n)=>({value:n,current:t.now(),last:e}),{current:t.now(),value:void 0,last:void 0}),Object(Ct.a)(({current:t,last:e,value:n})=>new Vn(n,t-e))))}class Vn{constructor(t,e){this.value=t,this.interval=e}}var Un=n("Y6u4"),qn=n("mlxB");function Bn(t,e,n=a.a){return r=>{let i=Object(qn.a)(t),o=i?+t-n.now():Math.abs(t);return r.lift(new Hn(o,i,e,n))}}class Hn{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new zn(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class zn extends r.b{constructor(t,e,n,r,i){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(r.c)(e,new r.a(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(zn.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var Gn=n("z6cu");function Qn(t,e=a.a){return Bn(t,Object(Gn.a)(new Un.a),e)}function Wn(t=a.a){return Object(Ct.a)(e=>new Kn(e,t.now()))}class Kn{constructor(t,e){this.value=t,this.timestamp=e}}function $n(t,e,n){return 0===n?[e]:(t.push(e),t)}function Yn(){return Xt($n,[])}function Jn(t){return function(e){return e.lift(new Xn(t))}}class Xn{constructor(t){this.windowBoundaries=t}call(t,e){const n=new Zn(t),i=e.subscribe(n);return i.closed||n.add(Object(r.c)(this.windowBoundaries,new r.a(n))),i}}class Zn extends r.b{constructor(t){super(t),this.window=new be.a,t.next(this.window)}notifyNext(){this.openWindow()}notifyError(t){this._error(t)}notifyComplete(){this._complete()}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const t=this.window;t&&t.complete();const e=this.destination,n=this.window=new be.a;e.next(n)}}function tr(t,e=0){return function(n){return n.lift(new er(t,e))}}class er{constructor(t,e){this.windowSize=t,this.startWindowEvery=e}call(t,e){return e.subscribe(new nr(t,this.windowSize,this.startWindowEvery))}}class nr extends f.a{constructor(t,e,n){super(t),this.destination=t,this.windowSize=e,this.startWindowEvery=n,this.windows=[new be.a],this.count=0,t.next(this.windows[0])}_next(t){const e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length;for(let a=0;a<o&&!this.closed;a++)i[a].next(t);const s=this.count-r+1;if(s>=0&&s%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){const t=new be.a;i.push(t),n.next(t)}}_error(t){const e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}var rr=n("Y7HM");function ir(t){let e=a.a,n=null,r=Number.POSITIVE_INFINITY;return Object(b.a)(arguments[3])&&(e=arguments[3]),Object(b.a)(arguments[2])?e=arguments[2]:Object(rr.a)(arguments[2])&&(r=Number(arguments[2])),Object(b.a)(arguments[1])?e=arguments[1]:Object(rr.a)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new or(t,n,r,e))}}class or{constructor(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}call(t,e){return e.subscribe(new ar(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class sr extends be.a{constructor(){super(...arguments),this._numberOfNextedValues=0}next(t){this._numberOfNextedValues++,super.next(t)}get numberOfNextedValues(){return this._numberOfNextedValues}}class ar extends f.a{constructor(t,e,n,r,i){super(t),this.destination=t,this.windowTimeSpan=e,this.windowCreationInterval=n,this.maxWindowSize=r,this.scheduler=i,this.windows=[];const o=this.openWindow();if(null!==n&&n>=0){const t={windowTimeSpan:e,windowCreationInterval:n,subscriber:this,scheduler:i};this.add(i.schedule(lr,e,{subscriber:this,window:o,context:null})),this.add(i.schedule(cr,n,t))}else this.add(i.schedule(ur,e,{subscriber:this,window:o,windowTimeSpan:e}))}_next(t){const e=this.windows,n=e.length;for(let r=0;r<n;r++){const n=e[r];n.closed||(n.next(t),n.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(n))}}_error(t){const e=this.windows;for(;e.length>0;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;for(;t.length>0;){const e=t.shift();e.closed||e.complete()}this.destination.complete()}openWindow(){const t=new sr;return this.windows.push(t),this.destination.next(t),t}closeWindow(t){t.complete();const e=this.windows;e.splice(e.indexOf(t),1)}}function ur(t){const{subscriber:e,windowTimeSpan:n,window:r}=t;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function cr(t){const{windowTimeSpan:e,subscriber:n,scheduler:r,windowCreationInterval:i}=t,o=n.openWindow(),s=this;let a={action:s,subscription:null};a.subscription=r.schedule(lr,e,{subscriber:n,window:o,context:a}),s.add(a.subscription),s.schedule(t,i)}function lr(t){const{subscriber:e,window:n,context:r}=t;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function hr(t,e){return n=>n.lift(new dr(t,e))}class dr{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new fr(t,this.openings,this.closingSelector))}}class fr extends I.a{constructor(t,e,n){super(t),this.openings=e,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=Object(x.a)(this,e,e))}_next(t){const{contexts:e}=this;if(e){const n=e.length;for(let r=0;r<n;r++)e[r].window.next(t)}}_error(t){const{contexts:e}=this;if(this.contexts=null,e){const n=e.length;let r=-1;for(;++r<n;){const n=e[r];n.window.error(t),n.subscription.unsubscribe()}}super._error(t)}_complete(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let n=-1;for(;++n<e;){const e=t[n];e.window.complete(),e.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let n=-1;for(;++n<e;){const e=t[n];e.window.unsubscribe(),e.subscription.unsubscribe()}}}notifyNext(t,e,n,r,i){if(t===this.openings){let t;try{const{closingSelector:n}=this;t=n(e)}catch(o){return this.error(o)}const n=new be.a,r=new T.a,i={window:n,subscription:r};this.contexts.push(i);const s=Object(x.a)(this,t,i);s.closed?this.closeWindow(this.contexts.length-1):(s.context=i,r.add(s)),this.destination.next(n)}else this.closeWindow(this.contexts.indexOf(t))}notifyError(t){this.error(t)}notifyComplete(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}closeWindow(t){if(-1===t)return;const{contexts:e}=this,n=e[t],{window:r,subscription:i}=n;e.splice(t,1),r.complete(),i.unsubscribe()}}function pr(t){return function(e){return e.lift(new gr(t))}}class gr{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new mr(t,this.closingSelector))}}class mr extends I.a{constructor(t,e){super(t),this.destination=t,this.closingSelector=e,this.openWindow()}notifyNext(t,e,n,r,i){this.openWindow(i)}notifyError(t){this._error(t)}notifyComplete(t){this.openWindow(t)}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(t=null){t&&(this.remove(t),t.unsubscribe());const e=this.window;e&&e.complete();const n=this.window=new be.a;let r;this.destination.next(n);try{const{closingSelector:t}=this;r=t()}catch(i){return this.destination.error(i),void this.window.error(i)}this.add(this.closingNotification=Object(x.a)(this,r))}}var yr=n("zp1y"),br=n("GjHo"),vr=n("1uah");function _r(t){return e=>e.lift(new vr.a(t))}},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mlxB:function(t,e,n){"use strict";function r(t){return t instanceof Date&&!isNaN(+t)}n.d(e,"a",function(){return r})},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},mx47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("qCKp");r.Observable.merge=r.merge},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},neMA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("BilO")},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("EQ5u");function i(t,e){return function(n){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));const s=Object.create(n,r.b);return s.source=n,s.subjectFactory=i,s}}class o{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pjAE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})()},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qCKp:function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",function(){return r.a}),n.d(e,"ConnectableObservable",function(){return i.a}),n.d(e,"GroupedObservable",function(){return o.a}),n.d(e,"observable",function(){return s.a}),n.d(e,"Subject",function(){return a.a}),n.d(e,"BehaviorSubject",function(){return u.a}),n.d(e,"ReplaySubject",function(){return c.a}),n.d(e,"AsyncSubject",function(){return l.a}),n.d(e,"asap",function(){return h.a}),n.d(e,"asapScheduler",function(){return h.b}),n.d(e,"async",function(){return d.a}),n.d(e,"asyncScheduler",function(){return d.b}),n.d(e,"queue",function(){return f.a}),n.d(e,"queueScheduler",function(){return f.b}),n.d(e,"animationFrame",function(){return v}),n.d(e,"animationFrameScheduler",function(){return b}),n.d(e,"VirtualTimeScheduler",function(){return _}),n.d(e,"VirtualAction",function(){return w}),n.d(e,"Scheduler",function(){return O.a}),n.d(e,"Subscription",function(){return C.a}),n.d(e,"Subscriber",function(){return S.a}),n.d(e,"Notification",function(){return E.a}),n.d(e,"NotificationKind",function(){return E.b}),n.d(e,"pipe",function(){return T.a}),n.d(e,"noop",function(){return x.a}),n.d(e,"identity",function(){return I.a}),n.d(e,"isObservable",function(){return j}),n.d(e,"ArgumentOutOfRangeError",function(){return N.a}),n.d(e,"EmptyError",function(){return k.a}),n.d(e,"ObjectUnsubscribedError",function(){return A.a}),n.d(e,"UnsubscriptionError",function(){return P.a}),n.d(e,"TimeoutError",function(){return D.a}),n.d(e,"bindCallback",function(){return V}),n.d(e,"bindNodeCallback",function(){return B}),n.d(e,"combineLatest",function(){return Q.b}),n.d(e,"concat",function(){return W.a}),n.d(e,"defer",function(){return K.a}),n.d(e,"empty",function(){return $.b}),n.d(e,"forkJoin",function(){return Y.a}),n.d(e,"from",function(){return J.a}),n.d(e,"fromEvent",function(){return Z}),n.d(e,"fromEventPattern",function(){return et}),n.d(e,"generate",function(){return nt}),n.d(e,"iif",function(){return it}),n.d(e,"interval",function(){return st}),n.d(e,"merge",function(){return ut.a}),n.d(e,"never",function(){return lt}),n.d(e,"of",function(){return ht.a}),n.d(e,"onErrorResumeNext",function(){return dt}),n.d(e,"pairs",function(){return ft}),n.d(e,"partition",function(){return bt}),n.d(e,"race",function(){return vt.a}),n.d(e,"range",function(){return _t}),n.d(e,"throwError",function(){return Ot.a}),n.d(e,"timer",function(){return Ct.a}),n.d(e,"using",function(){return St}),n.d(e,"zip",function(){return Et.b}),n.d(e,"scheduled",function(){return Tt.a}),n.d(e,"EMPTY",function(){return $.a}),n.d(e,"NEVER",function(){return ct}),n.d(e,"config",function(){return xt.a});var r=n("HDdC"),i=n("EQ5u"),o=n("OQgR"),s=n("kJWO"),a=n("XNiG"),u=n("2Vo4"),c=n("jtHE"),l=n("NHP+"),h=n("7Hc7"),d=n("D0XW"),f=n("qgXg"),p=n("3N8a");class g extends p.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var m=n("IjjT");class y extends m.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const b=new y(g),v=b;let _=(()=>{class t extends m.a{constructor(t=w,e=Number.POSITIVE_INFINITY){super(t,()=>this.frame),this.maxFrames=e,this.frame=0,this.index=-1}flush(){const{actions:t,maxFrames:e}=this;let n,r;for(;(r=t[0])&&r.delay<=e&&(t.shift(),this.frame=r.delay,!(n=r.execute(r.state,r.delay))););if(n){for(;r=t.shift();)r.unsubscribe();throw n}}}return t.frameTimeFactor=10,t})();class w extends p.a{constructor(t,e,n=(t.index+=1)){super(t,e),this.scheduler=t,this.work=e,this.index=n,this.active=!0,this.index=t.index=n}schedule(t,e=0){if(!this.id)return super.schedule(t,e);this.active=!1;const n=new w(this.scheduler,this.work);return this.add(n),n.schedule(t,e)}requestAsyncId(t,e,n=0){this.delay=t.frame+n;const{actions:r}=t;return r.push(this),r.sort(w.sortActions),!0}recycleAsyncId(t,e,n=0){}_execute(t,e){if(!0===this.active)return super._execute(t,e)}static sortActions(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}var O=n("Y/cZ"),C=n("quSY"),S=n("7o/Q"),E=n("WMd4"),T=n("mCNh"),x=n("KqfI"),I=n("SpAZ");function j(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var N=n("4I5i"),k=n("sVev"),A=n("9ppp"),P=n("pjAE"),D=n("Y6u4"),R=n("lJxs"),M=n("8Qeq"),L=n("DH7j"),F=n("z+Ro");function V(t,e,n){if(e){if(!Object(F.a)(e))return(...r)=>V(t,n)(...r).pipe(Object(R.a)(t=>Object(L.a)(t)?e(...t):e(t)));n=e}return function(...e){const i=this;let o;const s={context:i,subject:o,callbackFunc:t,scheduler:n};return new r.a(r=>{if(n)return n.schedule(U,0,{args:e,subscriber:r,params:s});if(!o){o=new l.a;const n=(...t)=>{o.next(t.length<=1?t[0]:t),o.complete()};try{t.apply(i,[...e,n])}catch(a){Object(M.a)(o)?o.error(a):console.warn(a)}}return o.subscribe(r)})}}function U(t){const{args:e,subscriber:n,params:r}=t,{callbackFunc:i,context:o,scheduler:s}=r;let{subject:a}=r;if(!a){a=r.subject=new l.a;const t=(...t)=>{this.add(s.schedule(q,0,{value:t.length<=1?t[0]:t,subject:a}))};try{i.apply(o,[...e,t])}catch(u){a.error(u)}}this.add(a.subscribe(n))}function q(t){const{value:e,subject:n}=t;n.next(e),n.complete()}function B(t,e,n){if(e){if(!Object(F.a)(e))return(...r)=>B(t,n)(...r).pipe(Object(R.a)(t=>Object(L.a)(t)?e(...t):e(t)));n=e}return function(...e){const i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(r=>{const{context:o}=i;let{subject:s}=i;if(n)return n.schedule(H,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new l.a;const n=(...t)=>{const e=t.shift();e?s.error(e):(s.next(t.length<=1?t[0]:t),s.complete())};try{t.apply(o,[...e,n])}catch(a){Object(M.a)(s)?s.error(a):console.warn(a)}}return s.subscribe(r)})}}function H(t){const{params:e,subscriber:n,context:r}=t,{callbackFunc:i,args:o,scheduler:s}=e;let a=e.subject;if(!a){a=e.subject=new l.a;const t=(...t)=>{const e=t.shift();this.add(e?s.schedule(G,0,{err:e,subject:a}):s.schedule(z,0,{value:t.length<=1?t[0]:t,subject:a}))};try{i.apply(r,[...o,t])}catch(u){this.add(s.schedule(G,0,{err:u,subject:a}))}}this.add(a.subscribe(n))}function z(t){const{value:e,subject:n}=t;n.next(e),n.complete()}function G(t){const{err:e,subject:n}=t;n.error(e)}var Q=n("itXk"),W=n("GyhO"),K=n("NXyV"),$=n("EY2u"),Y=n("cp0P"),J=n("Cfvw"),X=n("n6bG");function Z(t,e,n,i){return Object(X.a)(n)&&(i=n,n=void 0),i?Z(t,e,n).pipe(Object(R.a)(t=>Object(L.a)(t)?i(...t):i(t))):new r.a(r=>{tt(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function tt(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)tt(t[o],e,n,r,i)}r.add(o)}function et(t,e,n){return n?et(t,e).pipe(Object(R.a)(t=>Object(L.a)(t)?n(...t):n(t))):new r.a(n=>{const r=(...t)=>n.next(1===t.length?t[0]:t);let i;try{i=t(r)}catch(o){return void n.error(o)}if(Object(X.a)(e))return()=>e(r,i)})}function nt(t,e,n,i,o){let s,a;return 1==arguments.length?(a=t.initialState,e=t.condition,n=t.iterate,s=t.resultSelector||I.a,o=t.scheduler):void 0===i||Object(F.a)(i)?(a=t,s=I.a,o=i):(a=t,s=i),new r.a(t=>{let r=a;if(o)return o.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:s,state:r});for(;;){if(e){let n;try{n=e(r)}catch(i){return void t.error(i)}if(!n){t.complete();break}}let o;try{o=s(r)}catch(i){return void t.error(i)}if(t.next(o),t.closed)break;try{r=n(r)}catch(i){return void t.error(i)}}})}function rt(t){const{subscriber:e,condition:n}=t;if(e.closed)return;if(t.needIterate)try{t.state=t.iterate(t.state)}catch(i){return void e.error(i)}else t.needIterate=!0;if(n){let r;try{r=n(t.state)}catch(i){return void e.error(i)}if(!r)return void e.complete();if(e.closed)return}let r;try{r=t.resultSelector(t.state)}catch(i){return void e.error(i)}return e.closed||(e.next(r),e.closed)?void 0:this.schedule(t)}function it(t,e=$.a,n=$.a){return Object(K.a)(()=>t()?e:n)}var ot=n("Y7HM");function st(t=0,e=d.a){return(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=d.a),new r.a(n=>(n.add(e.schedule(at,t,{subscriber:n,counter:0,period:t})),n))}function at(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var ut=n("VRyK");const ct=new r.a(x.a);function lt(){return ct}var ht=n("LRne");function dt(...t){if(0===t.length)return $.a;const[e,...n]=t;return 1===t.length&&Object(L.a)(e)?dt(...e):new r.a(t=>{const r=()=>t.add(dt(...n).subscribe(t));return Object(J.a)(e).subscribe({next(e){t.next(e)},error:r,complete:r})})}function ft(t,e){return new r.a(e?n=>{const r=Object.keys(t),i=new C.a;return i.add(e.schedule(pt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:e=>{const n=Object.keys(t);for(let r=0;r<n.length&&!e.closed;r++){const i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function pt(t){const{keys:e,index:n,subscriber:r,subscription:i,obj:o}=t;if(!r.closed)if(n<e.length){const t=e[n];r.next([t,o[t]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var gt=n("F97/"),mt=n("SeVD"),yt=n("pLZG");function bt(t,e,n){return[Object(yt.a)(e,n)(new r.a(Object(mt.a)(t))),Object(yt.a)(Object(gt.a)(e,n))(new r.a(Object(mt.a)(t)))]}var vt=n("Nv8m");function _t(t=0,e,n){return new r.a(r=>{void 0===e&&(e=t,t=0);let i=0,o=t;if(n)return n.schedule(wt,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function wt(t){const{start:e,index:n,count:r,subscriber:i}=t;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var Ot=n("z6cu"),Ct=n("PqYM");function St(t,e){return new r.a(n=>{let r,i;try{r=t()}catch(s){return void n.error(s)}try{i=e(r)}catch(s){return void n.error(s)}const o=(i?Object(J.a)(i):$.a).subscribe(n);return()=>{o.unsubscribe(),r&&r.unsubscribe()}})}var Et=n("1uah"),Tt=n("7HRe"),xt=n("2fFW")},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return A}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return f}),n.d(e,"n",function(){return k}),n.d(e,"o",function(){return m}),n.d(e,"p",function(){return y}),n.d(e,"q",function(){return v}),n.d(e,"r",function(){return D}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return O}),n.d(e,"w",function(){return b}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return N}),n.d(e,"z",function(){return x}),n.d(e,"A",function(){return R}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return P}),n.d(e,"D",function(){return Q}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return I}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return H}),n.d(e,"I",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function O(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?E(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function E(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(c(o[0])||""),n=x(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},k=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG"),s=n("pjAE");let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s.a?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s.a?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s.a(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s.a?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.r("angularfire2.app.options"),v=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[b,u.A,[new u.B,v]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Sb(u.C))},t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({providers:[E]}),t})()}).call(this,n("3UD+")(t))},sx9y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("Xj2z")},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM");class s extends r.a{constructor(t,e=0,n=i.a){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(o.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.a)}static create(t,e=0,n=i.a){return new s(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(s.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function a(t,e=0){return function(n){return n.lift(new u(t,e))}}class u{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}},uwfA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("cD4w")},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>Object(i.a)()(Object(r.a)(s)(t))}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Sb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=Object(r.Hb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Sb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Sb)(s).location;return new v(Object(r.Sb)(a),e&&e.origin||"")}const b=new r.r("appBaseHref");let v=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(b,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(b,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(m),r.Sb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Hb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new w(Object(r.Sb)(m),Object(r.Sb)(a))}function C(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const E=r.mb;class T{}let x=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(E(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.v))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function I(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let j=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.vb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.t),r.Lb(r.u),r.Lb(r.l),r.Lb(r.E))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class N{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new N(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new A(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new A(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L),r.Lb(r.t))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class A{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}class M{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class L{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const F=new L,V=new M;let U=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.rb)(e))return F;if(Object(r.sb)(e))return V;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Ub())},t.\u0275pipe=r.Kb({name:"async",type:t,pure:!1}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[{provide:T,useClass:x}]}),t})();function B(t){return"server"===t}let H=(()=>{class t{}return t.\u0275prov=Object(r.Hb)({token:t,providedIn:"root",factory:()=>new z(Object(r.Sb)(s),window)}),t})();class z{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=G(this.window.history)||G(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function G(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Q,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=K||(K=document.querySelector("base"),K)?K.getAttribute("href"):null;return null==e?null:(n=e,W||(W=document.createElement("a")),W.setAttribute("href",n),"/"===W.pathname.charAt(0)?W.pathname:"/"+W.pathname);var n}resetBaseElement(){K=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return I(document.cookie,t)}}let W,K=null;const Y=new r.r("TRANSITION_ID"),J=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Y,s,r.s],multi:!0}];class X{static init(){Object(r.X)(new X)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Z=new r.r("EventManagerPlugins");let tt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Z),r.Sb(r.A))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let nt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),rt=(()=>{class t extends nt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=/%COMP%/g;function st(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?st(t,i,n):(i=i.replace(ot,t),n.push(i))}return n}function at(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ut=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ct(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new lt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=st(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(tt),r.Sb(rt),r.Sb(r.c))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class ct{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(it[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=it[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=it[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,at(n)):this.eventManager.addEventListener(t,e,at(n))}}class lt extends ct{constructor(t,e,n,r){super(t),this.component=n;const i=st(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ot,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ot,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ht extends ct{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=st(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let dt=(()=>{class t extends et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const ft=["alt","control","meta","shift"],pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let yt=(()=>{class t extends et{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ft.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&gt.hasOwnProperty(e)&&(e=gt[e]))}return pt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ft.forEach(r=>{r!=n&&(0,mt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const bt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){Q.makeCurrent(),X.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],vt=Object(r.S)(r.W,"browser",bt),_t=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Z,useClass:dt,multi:!0,deps:[s,r.A,r.C]},{provide:Z,useClass:yt,multi:!0,deps:[s]},[],{provide:ut,useClass:ut,deps:[tt,rt,r.c]},{provide:r.F,useExisting:ut},{provide:nt,useExisting:rt},{provide:rt,useClass:rt,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:tt,useClass:tt,deps:[Z,r.A]},[]];let wt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Y,useExisting:r.c},J]}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(t,12))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:_t,imports:[q,r.f]}),t})();"undefined"!=typeof window&&window;var Ot=n("Cfvw"),Ct=n("cp0P"),St=n("lJxs");class Et{}const Tt=new r.r("NgValueAccessor"),xt={provide:Tt,useExisting:Object(r.U)(()=>It),multi:!0};let It=(()=>{class t extends Et{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([xt]),r.xb]}),t})();const jt={provide:Tt,useExisting:Object(r.U)(()=>kt),multi:!0},Nt=new r.r("CompositionEventMode");let kt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(Nt,8))},t.\u0275dir=r.Gb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Vb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([jt])]}),t})();function At(t){return null==t||0===t.length}function Pt(t){return null!=t&&"number"==typeof t.length}const Dt=new r.r("NgValidators"),Rt=new r.r("NgAsyncValidators"),Mt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lt{static min(t){return function(t){return e=>{if(At(e.value)||At(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(At(e.value)||At(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return Ft(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return At(t.value)||Mt.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>At(e.value)||!Pt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return Vt(t)}static pattern(t){return function(t){if(!t)return Ut;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(At(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Qt(t)}static composeAsync(t){return Kt(t)}}function Ft(t){return At(t.value)?{required:!0}:null}function Vt(t){return e=>Pt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Ut(t){return null}function qt(t){return null!=t}function Bt(t){const e=Object(r.rb)(t)?Object(Ot.a)(t):t;return Object(r.qb)(e),e}function Ht(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zt(t,e){return e.map(e=>e(t))}function Gt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Qt(t){if(!t)return null;const e=t.filter(qt);return 0==e.length?null:function(t){return Ht(zt(t,e))}}function Wt(t){return null!=t?Qt(Gt(t)):null}function Kt(t){if(!t)return null;const e=t.filter(qt);return 0==e.length?null:function(t){const n=zt(t,e).map(Bt);return Object(Ct.a)(n).pipe(Object(St.a)(Ht))}}function $t(t){return null!=t?Kt(Gt(t)):null}function Yt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Jt(t){return t._rawValidators}function Xt(t){return t._rawAsyncValidators}let Zt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Wt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t}),t})(),te=(()=>{class t extends Zt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return ee(e||t)},t.\u0275dir=r.Gb({type:t,features:[r.xb]}),t})();const ee=r.Qb(te);class ne extends Zt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class re{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let ie=(()=>{class t extends re{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ne,2))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),oe=(()=>{class t extends re{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(te,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function se(t,e){return[...e.path,t]}function ae(t,e){le(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&de(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&de(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ue(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),he(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ce(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function le(t,e,n){const r=Jt(t);null!==e.validator?t.setValidators(Yt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Xt(t);if(null!==e.asyncValidator?t.setAsyncValidators(Yt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();ce(e._rawValidators,n),ce(e._rawAsyncValidators,n)}}function he(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Jt(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Xt(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};ce(e._rawValidators,t),ce(e._rawAsyncValidators,t)}return r}function de(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function fe(t,e){le(t,e,!1)}function pe(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function ge(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function me(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===kt?n=t:Object.getPrototypeOf(t.constructor)===Et?r=t:i=t}),i||r||n||null}function ye(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const be="VALID",ve="INVALID",_e="PENDING",we="DISABLED";function Oe(t){return(Te(t)?t.validators:t)||null}function Ce(t){return Array.isArray(t)?Wt(t):t||null}function Se(t,e){return(Te(e)?e.asyncValidators:t)||null}function Ee(t){return Array.isArray(t)?$t(t):t||null}function Te(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class xe{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ce(this._rawValidators),this._composedAsyncValidatorFn=Ee(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===be}get invalid(){return this.status===ve}get pending(){return this.status==_e}get disabled(){return this.status===we}get enabled(){return this.status!==we}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ce(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ee(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_e,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=we,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=be,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==be&&this.status!==_e||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?we:be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_e,this._hasOwnPendingAsyncValidator=!0;const e=Bt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof je?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ne&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?we:this.errors?ve:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_e)?_e:this._anyControlsHaveStatus(ve)?ve:be}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Te(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ie extends xe{constructor(t=null,e,n){super(Oe(e),Se(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ye(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ye(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class je extends xe{constructor(t,e,n){super(Oe(e),Se(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ie?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ne extends xe{constructor(t,e,n){super(Oe(e),Se(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ie?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ke={provide:te,useExisting:Object(r.U)(()=>Pe)},Ae=(()=>Promise.resolve(null))();let Pe=(()=>{class t extends te{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new je({},Wt(t),$t(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ae.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),ae(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ae.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),ye(this._directives,t)})}addFormGroup(t){Ae.then(()=>{const e=this._findContainer(t.path),n=new je({});fe(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ae.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Ae.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,ge(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Dt,10),r.Lb(Rt,10))},t.\u0275dir=r.Gb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Vb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([ke]),r.xb]}),t})();const De={provide:ne,useExisting:Object(r.U)(()=>Me)},Re=(()=>Promise.resolve(null))();let Me=(()=>{class t extends ne{constructor(t,e,n,i){super(),this.control=new Ie,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=me(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),pe(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?se(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ae(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Re.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Re.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(te,9),r.Lb(Dt,10),r.Lb(Rt,10),r.Lb(Tt,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([De]),r.xb,r.yb]}),t})(),Le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Fe={provide:Tt,useExisting:Object(r.U)(()=>Ve),multi:!0};let Ve=(()=>{class t extends Et{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Fe]),r.xb]}),t})();const Ue={provide:Tt,useExisting:Object(r.U)(()=>He),multi:!0};let qe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})(),Be=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:function(){return new t},token:t,providedIn:qe}),t})(),He=(()=>{class t extends Et{constructor(t,e,n,r){super(),this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ne),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(Be),r.Lb(r.s))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([Ue]),r.xb]}),t})();const ze={provide:Tt,useExisting:Object(r.U)(()=>Ge),multi:!0};let Ge=(()=>{class t extends Et{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([ze]),r.xb]}),t})();const Qe=new r.r("NgModelWithFormControlWarning"),We={provide:te,useExisting:Object(r.U)(()=>Ke)};let Ke=(()=>{class t extends te{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(he(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ae(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ue(t.control||null,t,!1),ye(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,ge(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(ue(e||null,t),n instanceof Ie&&(ae(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);fe(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return he(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){le(this.form,this,!1),this._oldForm&&he(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Dt,10),r.Lb(Rt,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Vb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([We]),r.xb,r.yb]}),t})();const $e={provide:ne,useExisting:Object(r.U)(()=>Ye)};let Ye=(()=>{class t extends ne{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=me(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),pe(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return se(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(te,13),r.Lb(Dt,10),r.Lb(Rt,10),r.Lb(Tt,10),r.Lb(Qe,8))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([$e]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const Je={provide:Dt,useExisting:Object(r.U)(()=>Xe),multi:!0};let Xe=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Ft(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([Je])]}),t})();const Ze={provide:Dt,useExisting:Object(r.U)(()=>tn),multi:!0};let tn=(()=>{class t{constructor(){this._validator=Ut}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Vt("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r.zb([Ze]),r.yb]}),t})(),en=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[qe]]}),t})(),nn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[en]}),t})(),rn=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Qe,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[en]}),t})();var on=function(t){return t[t.UnoUno=0]="UnoUno",t[t.UnoDos=1]="UnoDos",t[t.UnoTres=2]="UnoTres",t[t.DosUno=3]="DosUno",t[t.DosDos=4]="DosDos",t[t.DosTres=5]="DosTres",t[t.TresUno=6]="TresUno",t[t.TresDos=7]="TresDos",t[t.TresTres=8]="TresTres",t}({});class sn{constructor(){this.seleccion=on.UnoUno,this.victorias=0}}var an=n("HDdC");class un{constructor(){this.id="",this.usuario="",this.mensaje="",this.estado=!1,this.horaYMin="",this.correo=""}}var cn=n("D0XW"),ln=n("LRne"),hn=n("VRyK"),dn=n("w1tV"),fn=n("eIep"),pn=n("Kqap"),gn=n("/uUt"),mn=n("zp1y"),yn=n("32Ea"),bn=n("spgP"),vn=(n("6Uf2"),n("XNiG")),_n=n("pxpQ"),wn=n("UXun"),On=n("SxV6"),Cn=n("aGrj"),Sn=n("tf+s"),En=n("pLZG");const Tn=new r.r("angularfire2.auth.use-emulator"),xn=new r.r("angularfire2.auth.settings"),In=new r.r("angularfire2.auth.tenant-id"),jn=new r.r("angularfire2.auth.langugage-code"),Nn=new r.r("angularfire2.auth.use-device-language"),kn=new r.r("angularfire.auth.persistence");let An=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new bn.d(i),d=Object(bn.h)(h),f=new vn.a,p=Object(ln.a)(void 0).pipe(Object(_n.b)(h.outsideAngular),Object(fn.a)(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(St.a)(()=>Object(bn.g)(t,i,e)),Object(St.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(bn.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Object(wn.a)({bufferSize:1,refCount:!1}));if(B(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ln.a)(null);else{p.pipe(Object(On.a)()).subscribe();const t=p.pipe(Object(fn.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Object(wn.a)({bufferSize:1,refCount:!1})),e=t=>new an.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Object(fn.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Object(fn.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Object(Cn.a)(n),Object(Sn.a)(h.outsideAngular),Object(_n.b)(h.insideAngular)),this.user=t.pipe(Object(Cn.a)(r),Object(Sn.a)(h.outsideAngular),Object(_n.b)(h.insideAngular)),this.idToken=this.user.pipe(Object(fn.a)(t=>t?Object(Ot.a)(t.getIdToken()):Object(ln.a)(null))),this.idTokenResult=this.user.pipe(Object(fn.a)(t=>t?Object(Ot.a)(t.getIdTokenResult()):Object(ln.a)(null))),this.credential=Object(hn.a)(t,f,this.authState.pipe(Object(En.a)(t=>!t))).pipe(Object(St.a)(t=>(null==t?void 0:t.user)?t:null),Object(Sn.a)(h.outsideAngular),Object(_n.b)(h.insideAngular))}return Object(bn.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(bn.c),r.Sb(bn.b,8),r.Sb(r.C),r.Sb(r.A),r.Sb(Tn,8),r.Sb(xn,8),r.Sb(In,8),r.Sb(jn,8),r.Sb(Nn,8),r.Sb(kn,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Sb)(bn.c),Object(r.Sb)(bn.b,8),Object(r.Sb)(r.C),Object(r.Sb)(r.A),Object(r.Sb)(Tn,8),Object(r.Sb)(xn,8),Object(r.Sb)(In,8),Object(r.Sb)(jn,8),Object(r.Sb)(Nn,8),Object(r.Sb)(kn,8))},token:t,providedIn:"any"}),t})();Object(bn.e)(An,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Pn=n("Jgta");function Dn(t){return null==t}function Rn(t){return"function"==typeof t.set}function Mn(t,e){return Rn(e)?e:t.ref(e)}function Ln(t,e){if("string"==typeof t)return e.stringCase();if(Rn(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Fn(t,e,n="on",r=cn.b){return new an.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(St.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(dn.a)())}function Vn(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Un(t,e){const{payload:n,prevKey:r,key:i}=e,o=Vn(t,i),s=function(t,e){if(Dn(e))return 0;{const n=Vn(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function qn(t){return(Dn(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Bn(t,e,n){return function(t,e,n){return Fn(t,"value","once",n).pipe(Object(fn.a)(r=>{const i=[Object(ln.a)(r)];return e.forEach(e=>i.push(Fn(t,e,"on",n))),Object(hn.a)(...i).pipe(Object(pn.a)(Un,[]))}),Object(gn.a)())}(t,e=qn(e),n)}function Hn(t,e,n){const r=(e=qn(e)).map(e=>Fn(t,e,"on",n));return Object(hn.a)(...r)}function zn(t,e){return function(n,r){return Ln(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Gn(t,e){return function(){return Fn(t,"value","on",e)}}const Qn=new r.r("angularfire2.realtimeDatabaseURL"),Wn=new r.r("angularfire2.database.use-emulator");let Kn=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new bn.d(i),this.keepUnstableUntilFirst=Object(bn.h)(this.schedulers);const a=o,u=Object(bn.g)(t,i,e);!Pn.a.auth&&s&&Object(bn.j)(),this.database=Object(bn.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Mn(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:zn(r,"update"),set:zn(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Ln(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Bn(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Hn(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Fn(t,"value","on",e).pipe(Object(St.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(Object(mn.a)(e),Object(St.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),Object(yn.a)(t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad)),Object(St.a)(t=>t.actions))}(t,Hn(t,e).pipe(Object(pn.a)((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Bn(t,r,n).pipe(Object(St.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Mn(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Gn(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Gn(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(St.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(bn.c),r.Sb(bn.b,8),r.Sb(Qn,8),r.Sb(r.C),r.Sb(r.A),r.Sb(Wn,8),r.Sb(Tn,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Sb)(bn.c),Object(r.Sb)(bn.b,8),Object(r.Sb)(Qn,8),Object(r.Sb)(r.C),Object(r.Sb)(r.A),Object(r.Sb)(Wn,8),Object(r.Sb)(Tn,8))},token:t,providedIn:"any"}),t})(),$n=(()=>{class t{constructor(t){this.bd=t,this.rutaDeLaColeccion="/salaMensajes",this.referenciaAlaColeccion=this.bd.list(this.rutaDeLaColeccion)}CambiarRuta(t){this.referenciaAlaColeccion=this.bd.list(t)}AgregarUno(t){return this.referenciaAlaColeccion.push(t)}ObtenerTodos(){return this.referenciaAlaColeccion}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Kn))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Yn=n("JX91"),Jn=n("Zy1z"),Xn=n("zIRd"),Zn=n("q/0M"),tr=n("qOnz"),er=function(t,e){return(er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function nr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var rr,ir="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},or=or||{},sr=ir||self;function ar(){}function ur(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function cr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var lr="closure_uid_"+(1e9*Math.random()>>>0),hr=0;function dr(t,e,n){return t.call.apply(t.bind,arguments)}function fr(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pr(t,e,n){return(pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dr:fr).apply(null,arguments)}function gr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function mr(){return Date.now()}function yr(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function br(){this.j=this.j,this.i=this.i}br.prototype.j=!1,br.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,lr)&&t[lr]||(t[lr]=++hr)}(this)},br.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_r=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function wr(t){return Array.prototype.concat.apply([],arguments)}function Or(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Cr(t){return/^[\s\xa0]*$/.test(t)}var Sr,Er=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tr(t,e){return-1!=t.indexOf(e)}function xr(t,e){return t<e?-1:t>e?1:0}t:{var Ir=sr.navigator;if(Ir){var jr=Ir.userAgent;if(jr){Sr=jr;break t}}Sr=""}function Nr(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function kr(t){var e={};for(var n in t)e[n]=t[n];return e}var Ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pr(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ar.length;o++)n=Ar[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Dr(t){return Dr[" "](t),t}Dr[" "]=ar;var Rr,Mr,Lr=Tr(Sr,"Opera"),Fr=Tr(Sr,"Trident")||Tr(Sr,"MSIE"),Vr=Tr(Sr,"Edge"),Ur=Vr||Fr,qr=Tr(Sr,"Gecko")&&!(Tr(Sr.toLowerCase(),"webkit")&&!Tr(Sr,"Edge"))&&!(Tr(Sr,"Trident")||Tr(Sr,"MSIE"))&&!Tr(Sr,"Edge"),Br=Tr(Sr.toLowerCase(),"webkit")&&!Tr(Sr,"Edge");function Hr(){var t=sr.document;return t?t.documentMode:void 0}t:{var zr="",Gr=(Mr=Sr,qr?/rv:([^\);]+)(\)|;)/.exec(Mr):Vr?/Edge\/([\d\.]+)/.exec(Mr):Fr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mr):Br?/WebKit\/(\S+)/.exec(Mr):Lr?/(?:Version)[ \/]?(\S+)/.exec(Mr):void 0);if(Gr&&(zr=Gr?Gr[1]:""),Fr){var Qr=Hr();if(null!=Qr&&Qr>parseFloat(zr)){Rr=String(Qr);break t}}Rr=zr}var Wr={};function Kr(t){return function(t,e){var n=Wr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Er(String(Rr)).split("."),r=Er(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=xr(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||xr(0==s[2].length,0==a[2].length)||xr(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var $r=sr.document&&Fr&&(Hr()||parseInt(Rr,10))||void 0,Yr=!Fr||9<=Number($r),Jr=Fr&&!Kr("9"),Xr=function(){if(!sr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{sr.addEventListener("test",ar,e),sr.removeEventListener("test",ar,e)}catch(n){}return t}();function Zr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ti(t,e){if(Zr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(qr){t:{try{Dr(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ei[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Zr.prototype.b=function(){this.defaultPrevented=!0},yr(ti,Zr);var ei={2:"touch",3:"pen",4:"mouse"};ti.prototype.b=function(){ti.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Jr)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ni="closure_listenable_"+(1e6*Math.random()|0),ri=0;function ii(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ri,this.Y=this.Z=!1}function oi(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function si(t){this.src=t,this.a={},this.b=0}function ai(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(oi(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ui(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}si.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ui(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ii(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ci="closure_lm_"+(1e6*Math.random()|0),li={};function hi(t,e,n,r,i){if(r&&r.once)return fi(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)hi(t,e[o],n,r,i);return null}return n=wi(n),t&&t[ni]?t.va(e,n,cr(r)?!!r.capture:!!r,i):di(t,e,n,!1,r,i)}function di(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=cr(i)?!!i.capture:!!i;if(s&&!Yr)return null;var a=vi(t);if(a||(t[ci]=a=new si(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=bi,e=Yr?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mi(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fi(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fi(t,e[o],n,r,i);return null}return n=wi(n),t&&t[ni]?t.wa(e,n,cr(r)?!!r.capture:!!r,i):di(t,e,n,!0,r,i)}function pi(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pi(t,e[o],n,r,i);else r=cr(r)?!!r.capture:!!r,n=wi(n),t&&t[ni]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ui(o=t.a[e],n,r,i))&&(oi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vi(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ui(e,n,r,i)),(n=-1<t?e[t]:null)&&gi(n))}function gi(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ni])ai(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mi(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vi(e))?(ai(n,t),0==n.b&&(n.src=null,e[ci]=null)):oi(t)}}}function mi(t){return t in li?li[t]:li[t]="on"+t}function yi(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gi(t),n.call(r,e)}function bi(t,e){if(t.Y)return!0;if(!Yr){if(!e)t:{e=["window","event"];for(var n=sr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yi(t,e=new ti(e,this))}return yi(t,new ti(e,this))}function vi(t){return(t=t[ci])instanceof si?t:null}var _i="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(t){return"function"==typeof t?t:(t[_i]||(t[_i]=function(e){return t.handleEvent(e)}),t[_i])}function Oi(){br.call(this),this.c=new si(this),this.J=this,this.C=null}function Ci(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Zr(e,t);else if(e instanceof Zr)e.target=e.target||t;else{var i=e;Pr(e=new Zr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Si(s,r,!0,e)&&i}if(i=Si(s=e.a=t,r,!0,e)&&i,i=Si(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Si(s=e.a=n[o],r,!1,e)&&i}function Si(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ai(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}yr(Oi,br),Oi.prototype[ni]=!0,(rr=Oi.prototype).addEventListener=function(t,e,n,r){hi(this,t,e,n,r)},rr.removeEventListener=function(t,e,n,r){pi(this,t,e,n,r)},rr.G=function(){if(Oi.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)oi(n[r]);delete e.a[t],e.b--}}this.C=null},rr.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},rr.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ei=sr.JSON.stringify;function Ti(){this.b=this.a=null}var xi,Ii=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ni},function(t){t.reset()});function ji(){var t=Di,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ni(){this.next=this.b=this.a=null}function ki(t){sr.setTimeout(function(){throw t},0)}function Ai(t,e){xi||function(){var t=sr.Promise.resolve(void 0);xi=function(){t.then(Ri)}}(),Pi||(xi(),Pi=!0),Di.add(t,e)}Ti.prototype.add=function(t,e){var n=Ii.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ni.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ni.prototype.reset=function(){this.next=this.b=this.a=null};var Pi=!1,Di=new Ti;function Ri(){for(var t;t=ji();){try{t.a.call(t.b)}catch(n){ki(n)}var e=Ii;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Pi=!1}function Mi(t,e){Oi.call(this),this.b=t||1,this.a=e||sr,this.f=pr(this.Za,this),this.g=mr()}function Li(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Fi(t,e,n){if("function"==typeof t)n&&(t=pr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pr(t.handleEvent,t)}return 2147483647<Number(e)?-1:sr.setTimeout(t,e||0)}function Vi(t){t.a=Fi(function(){t.a=null,t.c&&(t.c=!1,Vi(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}yr(Mi,Oi),(rr=Mi.prototype).aa=!1,rr.M=null,rr.Za=function(){if(this.aa){var t=mr()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ci(this,"tick"),this.aa&&(Li(this),this.start()))}},rr.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=mr())},rr.G=function(){Mi.X.G.call(this),Li(this),delete this.a};var Ui=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}er(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vi(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(sr.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(br);function qi(t){br.call(this),this.b=t,this.a={}}yr(qi,br);var Bi=[];function Hi(t,e,n,r){Array.isArray(n)||(n&&(Bi[0]=n.toString()),n=Bi);for(var i=0;i<n.length;i++){var o=hi(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zi(t){Nr(t.a,function(t,e){this.a.hasOwnProperty(e)&&gi(t)},t),t.a={}}function Gi(){this.a=!0}function Qi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ei(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}qi.prototype.G=function(){qi.X.G.call(this),zi(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gi.prototype.info=function(){};var Wi={},Ki=null;function $i(){return Ki=Ki||new Oi}function Yi(t){Zr.call(this,Wi.Fa,t)}function Ji(t){var e=$i();Ci(e,new Yi(e,t))}function Xi(t,e){Zr.call(this,Wi.STAT_EVENT,t),this.stat=e}function Zi(t){var e=$i();Ci(e,new Xi(e,t))}function to(t){Zr.call(this,Wi.Ga,t)}function eo(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return sr.setTimeout(function(){t()},e)}Wi.Fa="serverreachability",yr(Yi,Zr),Wi.STAT_EVENT="statevent",yr(Xi,Zr),Wi.Ga="timingevent",yr(to,Zr);var no={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ro={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function io(){}function oo(){}io.prototype.a=null;var so,ao={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function uo(){Zr.call(this,"d")}function co(){Zr.call(this,"c")}function lo(){}function ho(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new qi(this),this.P=fo,this.R=new Mi(t=Ur?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}yr(uo,Zr),yr(co,Zr),yr(lo,io),so=new lo;var fo=45e3,po={},go={};function mo(t,e,n){t.H=1,t.i=Fo(Ao(e)),t.j=n,t.I=!0,yo(t,null)}function yo(t,e){t.u=mr(),_o(t),t.l=Ao(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Jo(n.b,"t",r),t.D=0,t.a=Gs(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ui(pr(t.Ca,t,t.a),t.O)),Hi(t.J,t.a,"readystatechange",t.Xa),e=t.B?kr(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ji(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function bo(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=vo(t,n);if(i==go){4==e&&(t.h=4,Zi(14),r=!1),Qi(t.c,t.f,null,"[Incomplete Response]");break}if(i==po){t.h=4,Zi(15),Qi(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Qi(t.c,t.f,i,null),Eo(t,i)}4==e&&0==n.length&&(t.h=1,Zi(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ls(e),e.F=!0,Zi(11))):(Qi(t.c,t.f,n,"[Invalid Chunked Response]"),So(t),Co(t))}function vo(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?go:(n=Number(e.substring(n,r)),isNaN(n)?po:(r+=1)+n>e.length?go:(e=e.substr(r,n),t.D=r+n,e))}function _o(t){t.T=mr()+t.P,wo(t,t.P)}function wo(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=eo(pr(t.Va,t),e)}function Oo(t){t.o&&(sr.clearTimeout(t.o),t.o=null)}function Co(t){0==t.g.v||t.A||Us(t.g,t)}function So(t){Oo(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Li(t.R),zi(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Eo(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||is(n.b,t)))if(n.I=t.N,!t.C&&is(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(jm){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vs(n),Is(n)}Ms(n),Zi(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=eo(pr(n.Sa,n),6e3));if(1>=rs(n.b)&&n.ea){try{n.ea()}catch(jm){}n.ea=void 0}}else Bs(n,11)}else if((t.C||n.a==t)&&Vs(n),!Cr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Tr(l,"spdy")||Tr(l,"quic")||Tr(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(os(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Lo(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=mr()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=zs(u,u.C?u.ga:null,u.fa),f.C){ss(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(Oo(p),_o(p)),u.a=f}else Rs(u);0<n.g.length&&ks(n)}else"stop"!=i[0]&&"close"!=i[0]||Bs(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Bs(n,7):xs(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ji(4)}catch(jm){}}function To(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ur(t)||"string"==typeof t)_r(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ur(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ur(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xo(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xo)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Io(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];jo(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)jo(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function jo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(rr=ho.prototype).setTimeout=function(t){this.P=t},rr.Xa=function(t){t=t.target;var e=this.F;e&&3==Cs(t)?e.f():this.Ca(t)},rr.Ca=function(t){try{if(t==this.a)t:{var e=Cs(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ur&&!this.a.$())){this.A||4!=e||7==n||Ji(8==n||0>=r?3:2),Oo(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cr(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Zi(12),So(this),Co(this);break t}Qi(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Eo(this,u)}this.I?(bo(this,e,o),Ur&&this.b&&3==e&&(Hi(this.J,this.R,"tick",this.Wa),this.R.start())):(Qi(this.c,this.f,o,null),Eo(this,o)),4==e&&So(this),this.b&&!this.A&&(4==e?Us(this.g,this):(this.b=!1,_o(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Zi(12)):(this.h=0,Zi(13)),So(this),Co(this)}}}catch(c){}},rr.Wa=function(){if(this.a){var t=Cs(this.a),e=this.a.$();this.D<e.length&&(Oo(this),bo(this,t,e),this.b&&4!=t&&_o(this))}},rr.cancel=function(){this.A=!0,So(this)},rr.Va=function(){this.o=null;var t=mr();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ji(3),Zi(17)),So(this),this.h=2,Co(this)):wo(this,this.T-t)},(rr=xo.prototype).K=function(){Io(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},rr.L=function(){return Io(this),this.a.concat()},rr.get=function(t,e){return jo(this.b,t)?this.b[t]:e},rr.set=function(t,e){jo(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},rr.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var No=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ko(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ko){this.a=void 0!==e?e:t.a,Po(this,t.f),this.j=t.j,Do(this,t.c),Ro(this,t.h),this.g=t.g,e=t.b;var n=new Wo;n.c=e.c,e.a&&(n.a=new xo(e.a),n.b=e.b),Mo(this,n),this.i=t.i}else t&&(n=String(t).match(No))?(this.a=!!e,Po(this,n[1]||"",!0),this.j=Vo(n[2]||""),Do(this,n[3]||"",!0),Ro(this,n[4]),this.g=Vo(n[5]||"",!0),Mo(this,n[6]||"",!0),this.i=Vo(n[7]||"")):(this.a=!!e,this.b=new Wo(null,this.a))}function Ao(t){return new ko(t)}function Po(t,e,n){t.f=n?Vo(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Do(t,e,n){t.c=n?Vo(e,!0):e}function Ro(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Mo(t,e,n){e instanceof Wo?(t.b=e,function(t,e){e&&!t.f&&(Ko(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&($o(this,e),Jo(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Uo(e,Go)),t.b=new Wo(e,t.a))}function Lo(t,e,n){t.b.set(e,n)}function Fo(t){return Lo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^mr()).toString(36)),t}function Vo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ko.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Uo(e,Bo,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Uo(e,Bo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Uo(n,"/"==n.charAt(0)?zo:Ho,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Uo(n,Qo)),t.join("")};var Bo=/[#\/\?@]/g,Ho=/[#\?:]/g,zo=/[#\?]/g,Go=/[#\?@]/g,Qo=/#/g;function Wo(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ko(t){t.a||(t.a=new xo,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $o(t,e){Ko(t),e=Xo(t,e),jo(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,jo((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Io(t)))}function Yo(t,e){return Ko(t),e=Xo(t,e),jo(t.a.b,e)}function Jo(t,e,n){$o(t,e),0<n.length&&(t.c=null,t.a.set(Xo(t,e),Or(n)),t.b+=n.length)}function Xo(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(rr=Wo.prototype).add=function(t,e){Ko(this),this.c=null,t=Xo(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},rr.forEach=function(t,e){Ko(this),this.a.forEach(function(n,r){_r(n,function(n){t.call(e,n,r,this)},this)},this)},rr.L=function(){Ko(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},rr.K=function(t){Ko(this);var e=[];if("string"==typeof t)Yo(this,t)&&(e=wr(e,this.a.get(Xo(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=wr(e,t[n])}return e},rr.set=function(t,e){return Ko(this),this.c=null,Yo(this,t=Xo(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},rr.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},rr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Zo=function(){return function(t,e){this.b=t,this.a=e}}();function ts(t){this.g=t||es,t=sr.PerformanceNavigationTiming?0<(t=sr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(sr.ia&&sr.ia.ya&&sr.ia.ya()&&sr.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var es=10;function ns(t){return!!t.b||!!t.a&&t.a.size>=t.f}function rs(t){return t.b?1:t.a?t.a.size:0}function is(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function os(t,e){t.a?t.a.add(e):t.b=e}function ss(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function as(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=nr(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Or(t.c)}function us(){}function cs(){this.a=new us}function ls(t,e,n){var r=n||"";try{To(t,function(t,n){var i=t;cr(t)&&(i=Ei(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(my){throw e.push(r+"type="+encodeURIComponent("_badmap")),my}}function hs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ts.prototype.cancel=function(){var t,e;if(this.c=as(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=nr(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},us.prototype.stringify=function(t){return sr.JSON.stringify(t,void 0)},us.prototype.parse=function(t){return sr.JSON.parse(t,void 0)};var ds=sr.JSON.parse;function fs(t){Oi.call(this),this.headers=new xo,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ps,this.D=this.F=!1}yr(fs,Oi);var ps="",gs=/^https?$/i,ms=["POST","PUT"];function ys(t){return"content-type"==t.toLowerCase()}function bs(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,vs(t),ws(t)}function vs(t){t.u||(t.u=!0,Ci(t,"complete"),Ci(t,"error"))}function _s(t){if(t.b&&void 0!==or&&(!t.s[1]||4!=Cs(t)||2!=t.W()))if(t.l&&4==Cs(t))Fi(t.za,0,t);else if(Ci(t,"readystatechange"),4==Cs(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(No)[1]||null;if(!o&&sr.self&&sr.self.location){var s=sr.self.location.protocol;o=s.substr(0,s.length-1)}i=!gs.test(o?o.toLowerCase():"")}e=i}if(e)Ci(t,"complete"),Ci(t,"success");else{t.h=6;try{var a=2<Cs(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",vs(t)}}finally{ws(t)}}}function ws(t,e){if(t.a){Os(t);var n=t.a,r=t.s[0]?ar:null;t.a=null,t.s=null,e||Ci(t,"ready");try{n.onreadystatechange=r}catch(my){}}}function Os(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(sr.clearTimeout(t.m),t.m=null)}function Cs(t){return t.a?t.a.readyState:0}function Ss(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Nr(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Lo(t,e,n))}function Es(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ts(t){this.pa=0,this.g=[],this.c=new Gi,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Es("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Es("baseRetryDelayMs",5e3,t),this.Ra=Es("retryDelaySeedMs",1e4,t),this.Ma=Es("forwardChannelMaxRetries",2,t),this.ma=Es("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ts(t&&t.concurrentRequestLimit),this.ka=new cs,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function xs(t){if(js(t),3==t.v){var e=t.R++,n=Ao(t.B);Lo(n,"SID",t.J),Lo(n,"RID",e),Lo(n,"TYPE","terminate"),Ps(t,n),(e=new ho(t,t.c,e,void 0)).H=2,e.i=Fo(Ao(n)),n=!1,sr.navigator&&sr.navigator.sendBeacon&&(n=sr.navigator.sendBeacon(e.i.toString(),"")),!n&&sr.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gs(e.g,null),e.a.ba(e.i)),e.u=mr(),_o(e)}Hs(t)}function Is(t){t.a&&(Ls(t),t.a.cancel(),t.a=null)}function js(t){Is(t),t.j&&(sr.clearTimeout(t.j),t.j=null),Vs(t),t.b.cancel(),t.h&&("number"==typeof t.h&&sr.clearTimeout(t.h),t.h=null)}function Ns(t,e){t.g.push(new Zo(t.Oa++,e)),3==t.v&&ks(t)}function ks(t){ns(t.b)||t.h||(t.h=!0,Ai(t.Ba,t),t.u=0)}function As(t,e){var n;n=e?e.f:t.R++;var r=Ao(t.B);Lo(r,"SID",t.J),Lo(r,"RID",n),Lo(r,"AID",t.P),Ps(t,r),t.i&&t.l&&Ss(r,t.i,t.l),n=new ho(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ds(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),os(t.b,n),mo(n,r,e)}function Ps(t,e){t.f&&To({},function(t,n){Lo(e,n,t)})}function Ds(t,e,n){n=Math.min(t.g.length,n);var r=t.f?pr(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ls(l,s,"req"+c+"_")}catch(Sa){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rs(t){t.a||t.j||(t.T=1,Ai(t.Aa,t),t.o=0)}function Ms(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=eo(pr(t.Aa,t),qs(t,t.o)),t.o++,0))}function Ls(t){null!=t.s&&(sr.clearTimeout(t.s),t.s=null)}function Fs(t){t.a=new ho(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ao(t.la);Lo(e,"RID","rpc"),Lo(e,"SID",t.J),Lo(e,"CI",t.H?"0":"1"),Lo(e,"AID",t.P),Ps(t,e),Lo(e,"TYPE","xmlhttp"),t.i&&t.l&&Ss(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fo(Ao(e)),n.j=null,n.I=!0,yo(n,t)}function Vs(t){null!=t.m&&(sr.clearTimeout(t.m),t.m=null)}function Us(t,e){var n=null;if(t.a==e){Vs(t),Ls(t),t.a=null;var r=2}else{if(!is(t.b,e))return;n=e.s,ss(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=mr()-e.u;var i=t.u;Ci(r=$i(),new to(r,n,e,i)),ks(t)}else Rs(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(rs(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=eo(pr(t.Ba,t,e),qs(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ms(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Bs(t,5);break;case 4:Bs(t,10);break;case 3:Bs(t,6);break;default:Bs(t,2)}}function qs(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Bs(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=pr(t.Ya,t);n||(n=new ko("//www.google.com/images/cleardot.gif"),sr.location&&"http"==sr.location.protocol||Po(n,"https"),Fo(n)),function(t,e){var n=new Gi;if(sr.Image){var r=new Image;r.onload=gr(hs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gr(hs,n,r,"TestLoadImage: error",!1,e),r.onabort=gr(hs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gr(hs,n,r,"TestLoadImage: timeout",!1,e),sr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zi(2);t.v=0,t.f&&t.f.ra(e),Hs(t),js(t)}function Hs(t){t.v=0,t.I=-1,t.f&&(0==as(t.b).length&&0==t.g.length||(t.b.c.length=0,Or(t.g),t.g.length=0),t.f.qa())}function zs(t,e,n){var r=function(t){return t instanceof ko?Ao(t):new ko(t,void 0)}(n);if(""!=r.c)e&&Do(r,e+"."+r.c),Ro(r,r.h);else{var i=sr.location;r=function(t,e,n,r){var i=new ko(null,void 0);return t&&Po(i,t),e&&Do(i,e),n&&Ro(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Nr(t.V,function(t,e){Lo(r,e,t)}),n=t.na,(e=t.A)&&n&&Lo(r,e,n),Lo(r,"VER",t.ha),Ps(t,r),r}function Gs(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fs(t.Na)).F=t.C,e}function Qs(){}function Ws(){if(Fr&&!(10<=Number($r)))throw Error("Environmental error: no available transport.")}function Ks(t,e){Oi.call(this),this.a=new Ts(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Cr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cr(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Js(this)}function $s(t){uo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ys(){co.call(this),this.status=1}function Js(t){this.a=t}(rr=fs.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:so),this.a.onreadystatechange=pr(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void bs(this,o)}t=n||"";var i=new xo(this.headers);r&&To(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ys,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=sr.FormData&&t instanceof sr.FormData,!(0<=vr(ms,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Os(this),0<this.o&&((this.D=function(t){return Fr&&Kr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=pr(this.xa,this)):this.m=Fi(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){bs(this,o)}},rr.xa=function(){void 0!==or&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ci(this,"timeout"),this.abort(8))},rr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ci(this,"complete"),Ci(this,"abort"),ws(this))},rr.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ws(this,!0)),fs.X.G.call(this)},rr.za=function(){this.j||(this.A||this.l||this.g?_s(this):this.Ua())},rr.Ua=function(){_s(this)},rr.W=function(){try{return 2<Cs(this)?this.a.status:-1}catch(Mr){return-1}},rr.$=function(){try{return this.a?this.a.responseText:""}catch(Mr){return""}},rr.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ds(e)}},rr.ua=function(){return this.h},rr.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(rr=Ts.prototype).ha=8,rr.v=1,rr.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ho(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Pr(r=kr(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ds(this,n,e),Lo(i=Ao(this.B),"RID",t),Lo(i,"CVER",22),this.A&&Lo(i,"X-HTTP-Session-Id",this.A),Ps(this,i),this.i&&r&&Ss(i,this.i,r),os(this.b,n),this.Ia&&Lo(i,"TYPE","init"),this.da?(Lo(i,"$req",e),Lo(i,"SID","null"),n.U=!0,mo(n,i,null)):mo(n,i,e),this.v=2}}else 3==this.v&&(t?As(this,t):0==this.g.length||ns(this.b)||As(this))},rr.Aa=function(){if(this.j=null,Fs(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=eo(pr(this.Ta,this),t)}},rr.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zi(10),Is(this),Fs(this))},rr.Sa=function(){null!=this.m&&(this.m=null,Is(this),Ms(this),Zi(19))},rr.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Zi(2)):(this.c.info("Failed to ping google.com"),Zi(1))},(rr=Qs.prototype).ta=function(){},rr.sa=function(){},rr.ra=function(){},rr.qa=function(){},rr.Ja=function(){},Ws.prototype.a=function(t,e){return new Ks(t,e)},yr(Ks,Oi),Ks.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Zi(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=zs(t,null,t.fa),ks(t)},Ks.prototype.close=function(){xs(this.a)},Ks.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ns(this.a,e)}else this.l?((e={}).__data__=Ei(t),Ns(this.a,e)):Ns(this.a,t)},Ks.prototype.G=function(){this.a.f=null,delete this.f,xs(this.a),delete this.a,Ks.X.G.call(this)},yr($s,uo),yr(Ys,co),yr(Js,Qs),Js.prototype.ta=function(){Ci(this.a,"a")},Js.prototype.sa=function(t){Ci(this.a,new $s(t))},Js.prototype.ra=function(t){Ci(this.a,new Ys(t))},Js.prototype.qa=function(){Ci(this.a,"b")},Ws.prototype.createWebChannel=Ws.prototype.a,Ks.prototype.send=Ks.prototype.h,Ks.prototype.open=Ks.prototype.g,Ks.prototype.close=Ks.prototype.close,no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,ro.COMPLETE="complete",oo.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",Oi.prototype.listen=Oi.prototype.va,fs.prototype.listenOnce=fs.prototype.wa,fs.prototype.getLastError=fs.prototype.Qa,fs.prototype.getLastErrorCode=fs.prototype.ua,fs.prototype.getStatus=fs.prototype.W,fs.prototype.getResponseJson=fs.prototype.Pa,fs.prototype.getResponseText=fs.prototype.$,fs.prototype.send=fs.prototype.ba;var Xs=no,Zs=ro,ta=Wi,ea=oo,na=fs,ra=n("mrSG"),ia=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ia.o=-1;var oa=new Zn.b("@firebase/firestore");function sa(){return oa.logLevel}function aa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oa.logLevel<=Zn.a.DEBUG){var r=e.map(la);oa.debug.apply(oa,Object(ra.f)(["Firestore (8.3.1): "+t],r))}}function ua(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oa.logLevel<=Zn.a.ERROR){var r=e.map(la);oa.error.apply(oa,Object(ra.f)(["Firestore (8.3.1): "+t],r))}}function ca(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oa.logLevel<=Zn.a.WARN){var r=e.map(la);oa.warn.apply(oa,Object(ra.f)(["Firestore (8.3.1): "+t],r))}}function la(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(my){return t}}function ha(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw ua(e),new Error(e)}function da(t,e){t||ha()}function fa(t,e){return t}function pa(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ga=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=pa(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ma(t,e){return t<e?-1:t>e?1:0}function ya(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ba(t){return t+"\0"}function va(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wa(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oa(t){return null==t}function Ca(t){return 0===t&&1/t==-1/0}function Sa(t){return"number"==typeof t&&Number.isInteger(t)&&!Ca(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ta=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ra.c)(e,t),e}(Error),xa=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ha(),void 0===n?n=t.length-e:n>t.length-e&&ha(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(xa),ja=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ja.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ta(Ea.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ta(Ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ta(Ea.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(xa),ka=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ia.fromString(e))},t.fromName=function(e){return new t(Ia.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ia.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ia.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ia(e.slice()))},t}(),Aa=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ma(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Aa.EMPTY_BYTE_STRING=new Aa("");var Pa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(t){if(da(!!t),"string"==typeof t){var e=0,n=Pa.exec(t);if(da(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ra(t.seconds),nanos:Ra(t.nanos)}}function Ra(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ma(t){return"string"==typeof t?Aa.fromBase64String(t):Aa.fromUint8Array(t)}var La=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ta(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ma(this.nanoseconds,t.nanoseconds):ma(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Fa(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Va(t){var e=t.mapValue.fields.__previous_value__;return Fa(e)?Va(e):e}function Ua(t){var e=Da(t.mapValue.fields.__local_write_time__.timestampValue);return new La(e.seconds,e.nanos)}function qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fa(t)?4:10:ha()}function Ba(t,e){var n=qa(t);if(n!==qa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Da(t.timestampValue),r=Da(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ma(t.bytesValue).isEqual(Ma(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ra(t.geoPointValue.latitude)===Ra(e.geoPointValue.latitude)&&Ra(t.geoPointValue.longitude)===Ra(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ra(t.integerValue)===Ra(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ra(t.doubleValue),r=Ra(e.doubleValue);return n===r?Ca(n)===Ca(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ya(t.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(va(n)!==va(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ba(n[i],r[i])))return!1;return!0}(t,e);default:return ha()}}function Ha(t,e){return void 0!==(t.values||[]).find(function(t){return Ba(t,e)})}function za(t,e){var n=qa(t),r=qa(e);if(n!==r)return ma(n,r);switch(n){case 0:return 0;case 1:return ma(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ra(t.integerValue||t.doubleValue),r=Ra(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ga(t.timestampValue,e.timestampValue);case 4:return Ga(Ua(t),Ua(e));case 5:return ma(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ma(t),r=Ma(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ma(n[i],r[i]);if(0!==o)return o}return ma(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ma(Ra(t.latitude),Ra(e.latitude));return 0!==n?n:ma(Ra(t.longitude),Ra(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=za(n[i],r[i]);if(o)return o}return ma(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ma(r[s],o[s]);if(0!==a)return a;var u=za(n[r[s]],i[o[s]]);if(0!==u)return u}return ma(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ha()}}function Ga(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ma(t,e);var n=Da(t),r=Da(e),i=ma(n.seconds,r.seconds);return 0!==i?i:ma(n.nanos,r.nanos)}function Qa(t){return Wa(t)}function Wa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Da(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ma(t.bytesValue).toBase64():"referenceValue"in t?ka.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Wa(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Wa(t.fields[o])}return e+"}"}(t.mapValue):ha();var e}function Ka(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $a(t){return!!t&&"integerValue"in t}function Ya(t){return!!t&&"arrayValue"in t}function Ja(t){return!!t&&"nullValue"in t}function Xa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Za(t){return!!t&&"mapValue"in t}var tu=function(t,e){this.key=t,this.version=e},eu=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(ra.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(tu),nu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(ra.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(tu),ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(tu),iu=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ou(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new iu(t,e,n,r,i,o,s)}function su(t){var e=fa(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Qa(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Oa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=vu(e.startAt)),e.endAt&&(n+="|ub:",n+=vu(e.endAt)),e.h=n}return e.h}function au(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!wu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ba(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cu(t.startAt,e.startAt)&&Cu(t.endAt,e.endAt)}function uu(t){return ka.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var cu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ra.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new lu(t,n,r):"array-contains"===n?new pu(t,r):"in"===n?new gu(t,r):"not-in"===n?new mu(t,r):"array-contains-any"===n?new yu(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new hu(t,n):new du(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(za(e,this.value)):null!==e&&qa(this.value)===qa(e)&&this.m(za(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ha()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),lu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ka.fromName(r.referenceValue),i}return Object(ra.c)(e,t),e.prototype.matches=function(t){var e=ka.comparator(t.key,this.key);return this.m(e)},e}(cu),hu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=fu(0,n),r}return Object(ra.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(cu),du=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=fu(0,n),r}return Object(ra.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(cu);function fu(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ka.fromName(t.referenceValue)})}var pu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ra.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ya(e)&&Ha(e.arrayValue,this.value)},e}(cu),gu=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ra.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ha(this.value.arrayValue,e)},e}(cu),mu=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ra.c)(e,t),e.prototype.matches=function(t){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ha(this.value.arrayValue,e)},e}(cu),yu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ra.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ya(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ha(e.value.arrayValue,t)})},e}(cu),bu=function(t,e){this.position=t,this.before=e};function vu(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Qa(t)}).join(",")}var _u=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function wu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ou(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ka.comparator(ka.fromName(s.referenceValue),n.key):za(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Cu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ba(t.position[n],e.position[n]))return!1;return!0}var Su=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Eu(t,e,n,r,i,o,s,a){return new Su(t,e,n,r,i,o,s,a)}function Tu(t){return new Su(t)}function xu(t){return!Oa(t.limit)&&"F"===t.limitType}function Iu(t){return!Oa(t.limit)&&"L"===t.limitType}function ju(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Nu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ku(t){return null!==t.collectionGroup}function Au(t){var e=fa(t);if(null===e.p){e.p=[];var n=Nu(e),r=ju(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _u(n)),e.p.push(new _u(Na.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _u(Na.keyField(),u))}}}return e.p}function Pu(t){var e=fa(t);if(!e.T)if("F"===e.limitType)e.T=ou(e.path,e.collectionGroup,Au(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Au(e);r<i.length;r++){var o=i[r];n.push(new _u(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new bu(e.endAt.position,!e.endAt.before):null,a=e.startAt?new bu(e.startAt.position,!e.startAt.before):null;e.T=ou(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Du(t,e,n){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ru(t,e){return au(Pu(t),Pu(e))&&t.limitType===e.limitType}function Mu(t){return su(Pu(t))+"|lt:"+t.limitType}function Lu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Qa(e.value);var e}).join(", ")+"]"),Oa(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+vu(t.startAt)),t.endAt&&(e+=", endAt: "+vu(t.endAt)),"Target("+e+")"}(Pu(t))+"; limitType="+t.limitType+")"}function Fu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ka.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ou(t.startAt,Au(t),e)||t.endAt&&Ou(t.endAt,Au(t),e))}(t,e)}function Vu(t){return function(e,n){for(var r=!1,i=0,o=Au(t);i<o.length;i++){var s=o[i],a=Uu(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Uu(t,e,n){var r=t.field.isKeyField()?ka.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?za(r,i):ha()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ha()}}var qu=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new La(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Bu=function(){function t(t){this.fields=t,t.sort(Na.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ya(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Hu=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Za(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return Ba(this.proto,t.proto)},t}(),zu=function(){function t(t){void 0===t&&(t=Hu.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===qa(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Na.emptyPath(),this.A);return null!=t?new Hu(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Za(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Gu(t){var e=[];return _a(t.fields||{},function(t,n){var r=new Na([t]);if(Za(n)){var i=Gu(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Bu(e)}function Qu(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ca(e)?"-0":e}}function Wu(t){return{integerValue:""+t}}function Ku(t,e){return Sa(e)?Wu(e):Qu(t,e)}var $u=function(){this._=void 0};function Yu(t,e,n){return t instanceof Zu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof tc?ec(t,e):t instanceof nc?rc(t,e):function(t,e){var n=Xu(t,e),r=oc(n)+oc(t.S);return $a(n)&&$a(t.S)?Wu(r):Qu(t.D,r)}(t,e)}function Ju(t,e,n){return t instanceof tc?ec(t,e):t instanceof nc?rc(t,e):n}function Xu(t,e){return t instanceof ic?$a(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e}($u),tc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ra.c)(e,t),e}($u);function ec(t,e){for(var n=sc(e),r=function(t){n.some(function(e){return Ba(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ra.c)(e,t),e}($u);function rc(t,e){for(var n=sc(e),r=function(t){n=n.filter(function(e){return!Ba(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ic=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(ra.c)(e,t),e}($u);function oc(t){return Ra(t.integerValue||t.doubleValue)}function sc(t){return Ya(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ac=function(t,e){this.field=t,this.transform=e},uc=function(t,e){this.version=t,this.transformResults=e},cc=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function lc(t,e){return void 0!==t.updateTime?e instanceof eu&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof eu}var hc=function(){};function dc(t,e,n){return t instanceof yc?function(t,e,n){var r=t.value,i=_c(t.fieldTransforms,e,n.transformResults);return r=Oc(t.fieldTransforms,r,i),new eu(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof bc?function(t,e,n){if(!lc(t.precondition,e))return new ru(t.key,n.version);var r=vc(t,e,_c(t.fieldTransforms,e,n.transformResults));return new eu(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new nu(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function fc(t,e,n){return t instanceof yc?function(t,e,n){if(!lc(t.precondition,e))return e;var r=t.value,i=wc(t.fieldTransforms,n,e);r=Oc(t.fieldTransforms,r,i);var o=mc(e);return new eu(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof bc?function(t,e,n){if(!lc(t.precondition,e))return e;var r=mc(e),i=vc(t,e,wc(t.fieldTransforms,n,e));return new eu(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return lc(t.precondition,e)?new nu(t.key,qu.min()):e}(t,e)}function pc(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof eu?e.field(o.field):void 0,a=Xu(o.transform,s||null);null!=a&&(n=null==n?(new zu).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function gc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ya(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof tc&&e instanceof tc||t instanceof nc&&e instanceof nc?ya(t.elements,e.elements,Ba):t instanceof ic&&e instanceof ic?Ba(t.S,e.S):t instanceof Zu&&e instanceof Zu}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function mc(t){return t instanceof eu?t.version:qu.min()}var yc=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(ra.c)(e,t),e}(hc),bc=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(ra.c)(e,t),e}(hc);function vc(t,e,n){var r;return r=function(t,e){var n=new zu(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof eu?e.data():Hu.empty()),Oc(t.fieldTransforms,r,n)}function _c(t,e,n){var r=[];da(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof eu&&(a=e.field(o.field)),r.push(Ju(s,a,n[i]))}return r}function wc(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof eu&&(u=n.field(s.field)),r.push(Yu(a,u,e))}return r}function Oc(t,e,n){for(var r=new zu(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Cc,Sc,Ec=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(ra.c)(e,t),e}(hc),Tc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(ra.c)(e,t),e}(hc),xc=function(t){this.count=t};function Ic(t){switch(t){case Ea.OK:return ha();case Ea.CANCELLED:case Ea.UNKNOWN:case Ea.DEADLINE_EXCEEDED:case Ea.RESOURCE_EXHAUSTED:case Ea.INTERNAL:case Ea.UNAVAILABLE:case Ea.UNAUTHENTICATED:return!1;case Ea.INVALID_ARGUMENT:case Ea.NOT_FOUND:case Ea.ALREADY_EXISTS:case Ea.PERMISSION_DENIED:case Ea.FAILED_PRECONDITION:case Ea.ABORTED:case Ea.OUT_OF_RANGE:case Ea.UNIMPLEMENTED:case Ea.DATA_LOSS:return!0;default:return ha()}}function jc(t){if(void 0===t)return ua("GRPC error has no .code"),Ea.UNKNOWN;switch(t){case Cc.OK:return Ea.OK;case Cc.CANCELLED:return Ea.CANCELLED;case Cc.UNKNOWN:return Ea.UNKNOWN;case Cc.DEADLINE_EXCEEDED:return Ea.DEADLINE_EXCEEDED;case Cc.RESOURCE_EXHAUSTED:return Ea.RESOURCE_EXHAUSTED;case Cc.INTERNAL:return Ea.INTERNAL;case Cc.UNAVAILABLE:return Ea.UNAVAILABLE;case Cc.UNAUTHENTICATED:return Ea.UNAUTHENTICATED;case Cc.INVALID_ARGUMENT:return Ea.INVALID_ARGUMENT;case Cc.NOT_FOUND:return Ea.NOT_FOUND;case Cc.ALREADY_EXISTS:return Ea.ALREADY_EXISTS;case Cc.PERMISSION_DENIED:return Ea.PERMISSION_DENIED;case Cc.FAILED_PRECONDITION:return Ea.FAILED_PRECONDITION;case Cc.ABORTED:return Ea.ABORTED;case Cc.OUT_OF_RANGE:return Ea.OUT_OF_RANGE;case Cc.UNIMPLEMENTED:return Ea.UNIMPLEMENTED;case Cc.DATA_LOSS:return Ea.DATA_LOSS;default:return ha()}}(Sc=Cc||(Cc={}))[Sc.OK=0]="OK",Sc[Sc.CANCELLED=1]="CANCELLED",Sc[Sc.UNKNOWN=2]="UNKNOWN",Sc[Sc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sc[Sc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sc[Sc.NOT_FOUND=5]="NOT_FOUND",Sc[Sc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sc[Sc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sc[Sc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sc[Sc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sc[Sc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sc[Sc.ABORTED=10]="ABORTED",Sc[Sc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sc[Sc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sc[Sc.INTERNAL=13]="INTERNAL",Sc[Sc.UNAVAILABLE=14]="UNAVAILABLE",Sc[Sc.DATA_LOSS=15]="DATA_LOSS";var Nc=function(){function t(t,e){this.comparator=t,this.root=e||Ac.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ac.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ac.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new kc(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new kc(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new kc(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new kc(this.root,t,this.comparator,!0)},t}(),kc=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ac=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ha();if(this.right.isRed())throw ha();var t=this.left.check();if(t!==this.right.check())throw ha();return t+(this.isRed()?0:1)},t}();Ac.EMPTY=null,Ac.RED=!0,Ac.BLACK=!1,Ac.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ha()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ha()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ha()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ha()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ha()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ac(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Pc=function(){function t(t){this.comparator=t,this.data=new Nc(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Dc(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Dc(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Dc=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Rc=new Nc(ka.comparator);function Mc(){return Rc}function Lc(){return Mc()}var Fc=new Nc(ka.comparator);function Vc(){return Fc}var Uc=new Nc(ka.comparator);function qc(){return Uc}var Bc=new Pc(ka.comparator);function Hc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zc=new Pc(ma);function Gc(){return zc}var Qc=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(qu.min(),r,Gc(),Mc(),Hc())},t}(),Wc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Aa.EMPTY_BYTE_STRING,n,Hc(),Hc(),Hc())},t}(),Kc=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},$c=function(t,e){this.targetId=t,this.$=e},Yc=function(t,e,n,r){void 0===n&&(n=Aa.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Jc=function(){function t(){this.F=0,this.O=tl(),this.k=Aa.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=Hc(),e=Hc(),n=Hc();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ha()}}),new Wc(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=tl()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Xc=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Mc(),this.et=Zc(),this.nt=new Pc(ma)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof eu?this.it(r,t.N):t.N instanceof nu&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:ha()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(uu(i))if(0===n){var o=new ka(i.path);this.rt(e,o,new nu(o,qu.min()))}else da(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&uu(o.target)){var s=new ka(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new nu(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=Hc();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Qc(t,n,this.nt,this.tt,r);return this.tt=Mc(),this.et=Zc(),this.nt=new Pc(ma),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Jc,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Pc(ma),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||aa("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Jc),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Zc(){return new Nc(ka.comparator)}function tl(){return new Nc(ka.comparator)}var el={asc:"ASCENDING",desc:"DESCENDING"},nl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rl=function(t,e){this.databaseId=t,this.V=e};function il(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ol(t,e){return t.V?e.toBase64():e.toUint8Array()}function sl(t,e){return il(t,e.toTimestamp())}function al(t){return da(!!t),qu.fromTimestamp(function(t){var e=Da(t);return new La(e.seconds,e.nanos)}(t))}function ul(t,e){return function(t){return new Ia(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function cl(t){var e=Ia.fromString(t);return da(Pl(e)),e}function ll(t,e){return ul(t.databaseId,e.path)}function hl(t,e){var n=cl(e);if(n.get(1)!==t.databaseId.projectId)throw new Ta(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ta(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ka(gl(n))}function dl(t,e){return ul(t.databaseId,e)}function fl(t){var e=cl(t);return 4===e.length?Ia.emptyPath():gl(e)}function pl(t){return new Ia(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gl(t){return da(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ml(t,e,n){return{name:ll(t,e),fields:n.proto.mapValue.fields}}function yl(t,e,n){var r=hl(t,e.name),i=al(e.updateTime),o=new Hu({mapValue:{fields:e.fields}});return new eu(r,i,o,{hasCommittedMutations:!!n})}function bl(t,e){var n;if(e instanceof yc)n={update:ml(t,e.key,e.value)};else if(e instanceof Ec)n={delete:ll(t,e.key)};else if(e instanceof bc)n={update:ml(t,e.key,e.data),updateMask:Al(e.fieldMask)};else{if(!(e instanceof Tc))return ha();n={verify:ll(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Zu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof tc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ic)return{fieldPath:e.field.canonicalString(),increment:n.S};throw ha()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:sl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ha()}(t,e.precondition)),n}function vl(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cc.updateTime(al(t.updateTime)):void 0!==t.exists?cc.exists(t.exists):cc.none()}(e.currentDocument):cc.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(da("REQUEST_TIME"===e.setToServerValue),n=new Zu):"appendMissingElements"in e?n=new tc(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new nc(e.removeAllFromArray.values||[]):"increment"in e?n=new ic(t,e.increment):ha();var r=Na.fromServerFormat(e.fieldPath);return new ac(r,n)}(t,e)}):[];if(e.update){var i=hl(t,e.update.name),o=new Hu({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Bu((t.fieldPaths||[]).map(function(t){return Na.fromServerFormat(t)}))}(e.updateMask);return new bc(i,o,s,n,r)}return new yc(i,o,n,r)}if(e.delete){var a=hl(t,e.delete);return new Ec(a,n)}if(e.verify){var u=hl(t,e.verify);return new Tc(u,n)}return ha()}function _l(t,e){return{documents:[dl(t,e.path)]}}function wl(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=dl(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dl(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Xa(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NAN"}};if(Ja(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xa(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NAN"}};if(Ja(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(t.field),op:xl(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Il(t.field),direction:Tl(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Oa(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Sl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Sl(e.endAt)),n}function Ol(t){var e=fl(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){da(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Cl(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new _u(jl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Oa(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=El(n.startAt));var l=null;return n.endAt&&(l=El(n.endAt)),Eu(e,i,a,s,u,"F",c,l)}function Cl(t){return t?void 0!==t.unaryFilter?[kl(t)]:void 0!==t.fieldFilter?[Nl(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Cl(t)}).reduce(function(t,e){return t.concat(e)}):ha():[]}function Sl(t){return{before:t.before,values:t.position}}function El(t){return new bu(t.values||[],!!t.before)}function Tl(t){return el[t]}function xl(t){return nl[t]}function Il(t){return{fieldPath:t.canonicalString()}}function jl(t){return Na.fromServerFormat(t.fieldPath)}function Nl(t){return cu.create(jl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ha()}}(t.fieldFilter.op),t.fieldFilter.value)}function kl(t){switch(t.unaryFilter.op){case"IS_NAN":var e=jl(t.unaryFilter.field);return cu.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=jl(t.unaryFilter.field);return cu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jl(t.unaryFilter.field);return cu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jl(t.unaryFilter.field);return cu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ha()}}function Al(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Pl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Dl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ml(e)),e=Rl(t.get(n),e);return Ml(e)}function Rl(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ml(t){return t+"\x01\x01"}function Ll(t){var e=t.length;if(da(e>=2),2===e)return da("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ia.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ha(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ha()}o=s+2}return new Ia(r)}var Fl=function(t,e){this.seconds=t,this.nanoseconds=e},Vl=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vl.store="owner",Vl.key="owner";var Ul=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ul.store="mutationQueues",Ul.keyPath="userId";var ql=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ql.store="mutations",ql.keyPath="batchId",ql.userMutationsIndex="userMutationsIndex",ql.userMutationsKeyPath=["userId","batchId"];var Bl=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Dl(e)]},t.key=function(t,e,n){return[t,Dl(e),n]},t}();Bl.store="documentMutations",Bl.PLACEHOLDER=new Bl;var Hl=function(t,e){this.path=t,this.readTime=e},zl=function(t,e){this.path=t,this.version=e},Gl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Gl.store="remoteDocuments",Gl.readTimeIndex="readTimeIndex",Gl.readTimeIndexPath="readTime",Gl.collectionReadTimeIndex="collectionReadTimeIndex",Gl.collectionReadTimeIndexPath=["parentPath","readTime"];var Ql=function(t){this.byteSize=t};Ql.store="remoteDocumentGlobal",Ql.key="remoteDocumentGlobalKey";var Wl=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wl.store="targets",Wl.keyPath="targetId",Wl.queryTargetsIndexName="queryTargetsIndex",Wl.queryTargetsKeyPath=["canonicalId","targetId"];var Kl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Kl.store="targetDocuments",Kl.keyPath=["targetId","path"],Kl.documentTargetsIndex="documentTargetsIndex",Kl.documentTargetsKeyPath=["path","targetId"];var $l=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$l.key="targetGlobalKey",$l.store="targetGlobal";var Yl=function(t,e){this.collectionId=t,this.parent=e};Yl.store="collectionParents",Yl.keyPath=["collectionId","parent"];var Jl=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Jl.store="clientMetadata",Jl.keyPath="clientId";var Xl=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xl.store="bundles",Xl.keyPath="bundleId";var Zl=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Zl.store="namedQueries",Zl.keyPath="name";var th=Object(ra.f)(Object(ra.f)([],Object(ra.f)(Object(ra.f)([],Object(ra.f)(Object(ra.f)([],Object(ra.f)(Object(ra.f)([],[Ul.store,ql.store,Bl.store,Gl.store,Wl.store,Vl.store,$l.store,Kl.store]),[Jl.store])),[Ql.store])),[Yl.store])),[Xl.store,Zl.store]),eh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nh=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),rh=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ih=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ha(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),oh=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new rh,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new uh(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=fh(e.target.error);n.gt.reject(new uh(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new uh(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(aa("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new lh(e)},t}(),sh=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(tr.m)())&&ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return aa("SimpleDb","Removing database:",t),hh(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(tr.m)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n=this;return Object(ra.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(aa("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new uh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ta(Ea.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new uh(t,n))},i.onupgradeneeded=function(t){aa("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){aa("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(ra.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ra.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=oh.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),ih.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return aa("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ah=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return hh(this.xt.delete())},t}(),uh=function(t){function e(e,n){var r=this;return(r=t.call(this,Ea.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ra.c)(e,t),e}(Ta);function ch(t){return"IndexedDbTransactionError"===t.name}var lh=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(aa("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(aa("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hh(n)},t.prototype.add=function(t){return aa("SimpleDb","ADD",this.store.name,t,t),hh(this.store.add(t))},t.prototype.get=function(t){var e=this;return hh(this.store.get(t)).next(function(n){return void 0===n&&(n=null),aa("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return aa("SimpleDb","DELETE",this.store.name,t),hh(this.store.delete(t))},t.prototype.count=function(){return aa("SimpleDb","COUNT",this.store.name),hh(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){aa("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new ih(function(n,r){e.onerror=function(t){var e=fh(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new ih(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ah(i),s=e(i.primaryKey,i.value,o);if(s instanceof ih){var a=s.catch(function(t){return o.done(),ih.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return ih.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function hh(t){return new ih(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=fh(t.target.error);n(e)}})}var dh=!1;function fh(t){var e=sh.It(Object(tr.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ta("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return dh||(dh=!0,setTimeout(function(){throw r},0)),r}}return t}var ph=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(ra.c)(e,t),e}(nh);function gh(t,e){var n=fa(t);return sh.Pt(n.Qt,e)}var mh=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=dc(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=fc(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=fc(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Hc())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ya(this.mutations,t.mutations,function(t,e){return gc(t,e)})&&ya(this.baseMutations,t.baseMutations,function(t,e){return gc(t,e)})},t}(),yh=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){da(e.mutations.length===r.length);for(var i=qc(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),bh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=qu.min()),void 0===o&&(o=qu.min()),void 0===s&&(s=Aa.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vh=function(t){this.Kt=t};function _h(t,e){if(e.document)return yl(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ka.fromSegments(e.noDocument.path),r=Eh(e.noDocument.readTime);return new nu(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ka.fromSegments(e.unknownDocument.path);return r=Eh(e.unknownDocument.version),new ru(i,r)}return ha()}function wh(t,e,n){var r=Oh(n),i=e.key.path.popLast().toArray();if(e instanceof eu){var o=function(t,e){return{name:ll(t,e.key),fields:e.toProto().mapValue.fields,updateTime:il(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new Gl(null,null,o,s,r,i)}if(e instanceof nu){var a=e.key.path.toArray(),u=Sh(e.version);return s=e.hasCommittedMutations,new Gl(null,new Hl(a,u),null,s,r,i)}if(e instanceof ru){var c=e.key.path.toArray(),l=Sh(e.version);return new Gl(new zl(c,l),null,null,!0,r,i)}return ha()}function Oh(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ch(t){var e=new La(t[0],t[1]);return qu.fromTimestamp(e)}function Sh(t){var e=t.toTimestamp();return new Fl(e.seconds,e.nanoseconds)}function Eh(t){var e=new La(t.seconds,t.nanoseconds);return qu.fromTimestamp(e)}function Th(t,e){for(var n=(e.baseMutations||[]).map(function(e){return vl(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return vl(t.Kt,e)}),o=La.fromMillis(e.localWriteTimeMs);return new mh(e.batchId,o,n,i)}function xh(t){var e,n,r=Eh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Eh(t.lastLimboFreeSnapshotVersion):qu.min();return void 0!==t.query.documents?(da(1===(n=t.query).documents.length),e=Pu(Tu(fl(n.documents[0])))):e=function(t){return Pu(Ol(t))}(t.query),new bh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Aa.fromBase64String(t.resumeToken))}function Ih(t,e){var n,r=Sh(e.snapshotVersion),i=Sh(e.lastLimboFreeSnapshotVersion);n=uu(e.target)?_l(t.Kt,e.target):wl(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Wl(e.targetId,su(e.target),r,o,e.sequenceNumber,i,n)}function jh(t){var e=Ol({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Du(e,e.limit,"L"):e}var Nh=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return kh(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Eh(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return kh(t).put({bundleId:(n=e).id,createTime:Sh(al(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ah(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:jh(e.bundledQuery),readTime:Eh(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Ah(t).put(function(t){return{name:t.name,readTime:Sh(al(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function kh(t){return gh(t,Xl.store)}function Ah(t){return gh(t,Zl.store)}var Ph=function(){function t(){this.Wt=new Dh}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),ih.resolve()},t.prototype.getCollectionParents=function(t,e){return ih.resolve(this.Wt.getEntries(e))},t}(),Dh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pc(Ia.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pc(Ia.comparator)).toArray()},t}(),Rh=function(){function t(){this.jt=new Dh}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:Dl(i)};return Mh(t).put(o)}return ih.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ba(e),""],!1,!0);return Mh(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ll(o.parent))}return n})},t}();function Mh(t){return gh(t,Yl.store)}var Lh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fh=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Vh(t,e,n){var r=t.store(ql.store),i=t.store(Bl.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){da(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Bl.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return ih.waitFor(o).next(function(){return c})}function Uh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ha();e=t.noDocument}return JSON.stringify(e).length}Fh.DEFAULT_COLLECTION_PERCENTILE=10,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fh.DEFAULT=new Fh(41943040,Fh.DEFAULT_COLLECTION_PERCENTILE,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fh.DISABLED=new Fh(-1,0,0);var qh=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return da(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).qt({index:ql.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=zh(t),s=Hh(t);return s.add({}).next(function(a){da("number"==typeof a);for(var u=new mh(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return bl(t.Kt,e)}),i=n.mutations.map(function(e){return bl(t.Kt,e)});return new ql(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Pc(function(t,e){return ma(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Bl.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Bl.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),ih.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Hh(t).get(e).next(function(t){return t?(da(t.userId===n.userId),Th(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?ih.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Hh(t).qt({index:ql.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(da(e.batchId>=r),o=Th(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hh(t).qt({index:ql.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).kt(ql.userMutationsIndex,n).next(function(t){return t.map(function(t){return Th(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Bl.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return zh(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Ll(r[1]);if(a===n.userId&&e.path.isEqual(c))return Hh(t).get(u).next(function(t){if(!t)throw ha();da(t.userId===n.userId),o.push(Th(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pc(ma),i=[];return e.forEach(function(e){var o=Bl.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=zh(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Ll(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),ih.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Bl.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Pc(ma);return zh(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Ll(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Hh(t).get(e).next(function(t){if(null===t)throw ha();da(t.userId===n.userId),r.push(Th(n.D,t))}))}),ih.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Vh(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),ih.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return ih.resolve();var r=IDBKeyRange.lowerBound(Bl.prefixForUser(e.userId)),i=[];return zh(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Ll(t[1]);i.push(o)}else r.done()}).next(function(){da(0===i.length)})})},t.prototype.containsKey=function(t,e){return Bh(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Gh(t).get(this.userId).next(function(t){return t||new Ul(e.userId,-1,"")})},t}();function Bh(t,e,n){var r=Bl.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zh(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Hh(t){return gh(t,ql.store)}function zh(t){return gh(t,Bl.store)}function Gh(t){return gh(t,Ul.store)}var Qh=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Wh=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Qh(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return qu.fromTimestamp(new La(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Kh(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return da(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Kh(t).qt(function(s,a){var u=xh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return ih.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Kh(t).qt(function(t,n){var r=xh(n);e(r)})},t.prototype.se=function(t){return $h(t).get($l.key).next(function(t){return da(null!==t),t})},t.prototype.ie=function(t,e){return $h(t).put($l.key,e)},t.prototype.re=function(t,e){return Kh(t).put(Ih(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=su(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kh(t).qt({range:r,index:Wl.queryTargetsIndexName},function(t,n,r){var o=xh(n);au(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Yh(t);return e.forEach(function(e){var s=Dl(e.path);i.push(o.put(new Kl(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),ih.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Yh(t);return ih.forEach(e,function(e){var o=Dl(e.path);return ih.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Yh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yh(t),i=Hc();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Ll(t[1]),o=new ka(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Dl(e.path),r=IDBKeyRange.bound([n],[ba(n)],!1,!0),i=0;return Yh(t).qt({index:Kl.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return Kh(t).get(e).next(function(t){return t?xh(t):null})},t}();function Kh(t){return gh(t,Wl.store)}function $h(t){return gh(t,$l.store)}function Yh(t){return gh(t,Kl.store)}function Jh(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){if(t.code!==Ea.FAILED_PRECONDITION||t.message!==eh)throw t;return aa("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Xh(t,e){var n=t[1],r=e[1],i=ma(t[0],e[0]);return 0===i?ma(n,r):i}var Zh=function(){function t(t){this.ce=t,this.buffer=new Pc(Xh),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),td=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;aa("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(ra.b)(e,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ch(e=n.sent())?(aa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),ed=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ih.resolve(ia.o);var r=new Zh(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(aa("LruGarbageCollector","Garbage collection skipped; disabled"),ih.resolve(Lh)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(aa("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Lh):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(aa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),sa()<=Zn.a.DEBUG&&aa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),ih.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),nd=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ed(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return rd(t,n)},t.prototype.removeReference=function(t,e,n){return rd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return rd(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Gh(t).Ut(function(r){return Bh(t,r,e).next(function(t){return t&&(n=!0),ih.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Yh(t).delete([0,Dl(s.path)])})});i.push(u)}}).next(function(){return ih.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return rd(t,e)},t.prototype.pe=function(t,e){var n,r=Yh(t),i=ia.o;return r.qt({index:Kl.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ia.o&&e(new ka(Ll(n)),i),i=s,n=o):i=ia.o}).next(function(){i!==ia.o&&e(new ka(Ll(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function rd(t,e){return Yh(t).put(function(t,e){return new Kl(0,Dl(t.path),e)}(e,t.currentSequenceNumber))}var id=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_a(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return wa(this.inner)},t}(),od=function(){function t(){this.changes=new id(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:qu.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ih.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),sd=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return cd(t).put(ld(e),n)},t.prototype.removeEntry=function(t,e){var n=cd(t),r=ld(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return cd(t).get(ld(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return cd(t).get(ld(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Uh(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Lc();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Lc(),i=new Nc(ka.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Uh(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return ih.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return cd(t).qt({range:r},function(t,e,r){for(var s=ka.fromSegments(t);o&&ka.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Vc(),o=e.path.length+1,s={};if(n.isEqual(qu.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Oh(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Gl.collectionReadTimeIndex}return cd(t).qt(s,function(t,n,s){if(t.length===o){var a=_h(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof eu&&Fu(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new ad(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ud(t).get(Ql.key).next(function(t){return da(!!t),t})},t.prototype.Te=function(t,e){return ud(t).put(Ql.key,e)},t.prototype.Ie=function(t){if(t){var e=_h(this.D,t);return e instanceof nu&&e.version.isEqual(qu.min())?null:e}return null},t}(),ad=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new id(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(ra.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pc(function(t,e){return ma(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=wh(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Uh(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=wh(e.Ve.D,new nu(o,qu.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),ih.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(od);function ud(t){return gh(t,Ql.store)}function cd(t){return gh(t,Gl.store)}function ld(t){return t.path.toArray()}var hd=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;da(n<r&&n>=0&&r<=11);var o=new oh("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vl.store)}(t),function(t){t.createObjectStore(Ul.store,{keyPath:Ul.keyPath}),t.createObjectStore(ql.store,{keyPath:ql.keyPath,autoIncrement:!0}).createIndex(ql.userMutationsIndex,ql.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Bl.store)}(t),dd(t),function(t){t.createObjectStore(Gl.store)}(t));var s=ih.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Kl.store),t.deleteObjectStore(Wl.store),t.deleteObjectStore($l.store)}(t),dd(t)),s=s.next(function(){return function(t){var e=t.store($l.store),n=new $l(0,0,qu.min().toTimestamp(),0);return e.put($l.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(ql.store).kt().next(function(n){t.deleteObjectStore(ql.store),t.createObjectStore(ql.store,{keyPath:ql.keyPath,autoIncrement:!0}).createIndex(ql.userMutationsIndex,ql.userMutationsKeyPath,{unique:!0});var r=e.store(ql.store),i=n.map(function(t){return r.put(t)});return ih.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Jl.store,{keyPath:Jl.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ql.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Gl.store);e.createIndex(Gl.readTimeIndex,Gl.readTimeIndexPath,{unique:!1}),e.createIndex(Gl.collectionReadTimeIndex,Gl.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Xl.store,{keyPath:Xl.keyPath})}(t),function(t){t.createObjectStore(Zl.store,{keyPath:Zl.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(Gl.store).qt(function(t,n){e+=Uh(n)}).next(function(){var n=new Ql(e);return t.store(Ql.store).put(Ql.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Ul.store),r=t.store(ql.store);return n.kt().next(function(n){return ih.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(ql.userMutationsIndex,i).next(function(r){return ih.forEach(r,function(r){da(r.userId===n.userId);var i=Th(e.D,r);return Vh(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Kl.store),n=t.store(Gl.store);return t.store($l.store).get($l.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Ia(n),s=function(t){return[0,Dl(t)]}(o);r.push(e.get(s).next(function(n){return n?ih.resolve():function(n){return e.put(new Kl(0,Dl(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return ih.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Yl.store,{keyPath:Yl.keyPath});var n=e.store(Yl.store),r=new Dh,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Dl(i)})}};return e.store(Gl.store).qt({Bt:!0},function(t,e){var n=new Ia(t);return i(n.popLast())}).next(function(){return e.store(Bl.store).qt({Bt:!0},function(t,e){var n=Ll(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Wl.store);return n.qt(function(t,r){var i=xh(r),o=Ih(e.D,i);return n.put(o)})},t}();function dd(t){t.createObjectStore(Kl.store,{keyPath:Kl.keyPath}).createIndex(Kl.documentTargetsIndex,Kl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Wl.store,{keyPath:Wl.keyPath}).createIndex(Wl.queryTargetsIndexName,Wl.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($l.store)}var fd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Ta(Ea.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nd(this,i),this.We=n+"main",this.D=new vh(u),this.je=new sh(this.We,11,new hd(this.D)),this.Ge=new Wh(this.referenceDelegate,this.D),this.Gt=new Rh,this.ze=function(t,e){return new sd(t,e)}(this.D,this.Gt),this.He=new Nh,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ta(Ea.FAILED_PRECONDITION,fd);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new ia(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(ra.b)(e,void 0,void 0,function(){return Object(ra.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(ra.b)(e,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(ra.b)(e,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return md(e).put(new Jl(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(ch(e))return aa("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return aa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return gd(t).get(Vl.key).next(function(t){return ih.resolve(e.cn(t))})},t.prototype.an=function(t){return md(t).delete(this.clientId)},t.prototype.un=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(ra.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=gh(t,Jl.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return ih.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?ih.resolve(!0):gd(t).get(Vl.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Ta(Ea.FAILED_PRECONDITION,fd);return!1}}return!(!e.networkEnabled||!e.inForeground)||md(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&aa("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(ra.b)(this,void 0,void 0,function(){var t=this;return Object(ra.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Vl.store,Jl.store],function(e){var n=new ph(e,ia.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return md(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return qh.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return aa("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",th,function(o){return r=new ph(o,i.Me?i.Me.next():ia.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw ua("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Ta(Ea.FAILED_PRECONDITION,eh);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return gd(t).get(Vl.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ta(Ea.FAILED_PRECONDITION,fd)})},t.prototype.on=function(t){var e=new Vl(this.clientId,this.allowTabSynchronization,Date.now());return gd(t).put(Vl.key,e)},t.At=function(){return sh.At()},t.prototype.rn=function(t){var e=this,n=gd(t);return n.get(Vl.key).next(function(t){return e.cn(t)?(aa("IndexedDbPersistence","Releasing primary lease."),n.delete(Vl.key)):ih.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ua("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return aa("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ua("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){ua("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function gd(t){return gh(t,Vl.store)}function md(t){return gh(t,Jl.store)}function yd(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bd=function(t,e){this.progress=t,this.En=e},vd=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Lc();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Mc();return i.forEach(function(t,e){e||(e=new nu(t,qu.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ka.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):ku(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new ka(e)).next(function(t){var e=Vc();return t instanceof eu&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Vc();return this.Gt.getCollectionParents(t,i).next(function(s){return ih.forEach(s,function(s){var a=function(t,e){return new Su(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=fc(u,r.get(c),o.localWriteTime);r=l instanceof eu?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Fu(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=Hc(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof bc&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof eu&&(c=c.insert(t,e))}),c})},t}(),_d=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=Hc(),i=Hc(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),wd=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(qu.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(xu(e)||Iu(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(sa()<=Zn.a.DEBUG&&aa("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Lu(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Pc(Vu(t));return e.forEach(function(e,r){r instanceof eu&&Fu(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return sa()<=Zn.a.DEBUG&&aa("QueryEngine","Using full collection scan to execute query:",Lu(e)),this.Fn.getDocumentsMatchingQuery(t,e,qu.min())},t}(),Od=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Nc(ma),this.qn=new id(function(t){return su(t)},au),this.Un=qu.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new vd(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Cd(t,e,n,r){return new Od(t,e,n,r)}function Sd(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ra.d)(this,function(s){switch(s.label){case 0:return n=fa(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new vd(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Hc(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Ed(t,e){var n=fa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ih.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);da(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function Td(t){var e=fa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function xd(t,e){var n=fa(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return da(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Mc();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Id(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(qu.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return ih.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function Id(t,e,n,r,i){var o=Hc();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Mc();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof nu&&s.version.isEqual(qu.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):aa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function jd(t,e){var n=fa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function Nd(t,e){var n=fa(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?ih.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new bh(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function kd(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:r=fa(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ch(s=a.sent()))throw s;return aa("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function Ad(t,e,n){var r=fa(t),i=qu.min(),o=Hc();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=fa(t),i=r.qn.get(n);return void 0!==i?ih.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Pu(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:qu.min(),n?o:Hc())}).next(function(t){return{documents:t,jn:o}})})}function Pd(t,e){var n=fa(t),r=fa(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function Dd(t){var e=fa(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=fa(t),i=Mc(),o=Oh(n),s=cd(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:Gl.readTimeIndex,range:a},function(t,e){var n=_h(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Ch(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Rd(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){return[2,(e=fa(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=cd(t),n=qu.min();return e.qt({index:Gl.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ch(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Md(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(ra.d)(this,function(p){switch(p.label){case 0:for(i=fa(t),o=Hc(),s=Mc(),a=qc(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return d=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Nd(i,function(t){return Pu(Tu(Ia.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Id(t,d,s,qu.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Ld(t,e,n){return void 0===n&&(n=Hc()),Object(ra.b)(this,void 0,void 0,function(){var r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return[4,Nd(t,Pu(jh(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=fa(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=al(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(Aa.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Fd=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ih.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:al(n.createTime)}),ih.resolve()},t.prototype.getNamedQuery=function(t,e){return ih.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:jh(t.bundledQuery),readTime:al(t.readTime)}}(e)),ih.resolve()},t}(),Vd=function(){function t(){this.Xn=new Pc(Ud.Zn),this.ts=new Pc(Ud.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ud(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Ud(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new ka(new Ia([])),r=new Ud(n,t),i=new Ud(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new ka(new Ia([])),n=new Ud(e,t),r=new Ud(e,t+1),i=Hc();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ud(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ud=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return ka.comparator(t.key,e.key)||ma(t.hs,e.hs)},t.es=function(t,e){return ma(t.hs,e.hs)||ka.comparator(t.key,e.key)},t}(),qd=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Pc(Ud.Zn)}return t.prototype.checkEmpty=function(t){return ih.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new mh(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Ud(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return ih.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ih.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return ih.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ih.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return ih.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ud(e,0),i=new Ud(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),ih.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pc(ma);return e.forEach(function(t){var e=new Ud(t,0),i=new Ud(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),ih.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ka.isDocumentKey(i)||(i=i.child(""));var o=new Ud(new ka(i),0),s=new Pc(ma);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),ih.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;da(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return ih.forEach(e.mutations,function(i){var o=new Ud(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ud(e,0),r=this.fs.firstAfterOrEqual(n);return ih.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return ih.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),Bd=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Nc(ka.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ih.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Lc();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),ih.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Vc(),i=new ka(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof eu&&Fu(e,u)&&(r=r.insert(u.key,u))}return ih.resolve(r)},t.prototype.ps=function(t,e){return ih.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Hd(this)},t.prototype.getSize=function(t){return ih.resolve(this.size)},t}(),Hd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(ra.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),ih.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(od),zd=function(){function t(t){this.persistence=t,this.Es=new id(function(t){return su(t)},au),this.lastRemoteSnapshotVersion=qu.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Vd,this.targetCount=0,this.As=Qh.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),ih.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ih.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ih.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),ih.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),ih.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Qh(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,ih.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),ih.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,ih.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),ih.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return ih.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return ih.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),ih.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),ih.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),ih.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return ih.resolve(n)},t.prototype.containsKey=function(t,e){return ih.resolve(this.Is.containsKey(e))},t}(),Gd=function(){function t(t,e){var n=this;this.Rs={},this.Me=new ia(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new zd(this),this.Gt=new Ph,this.ze=function(t,e){return new Bd(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new vh(e),this.He=new Fd(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new qd(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;aa("MemoryPersistence","Starting transaction:",t);var i=new Qd(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return ih.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Qd=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(ra.c)(e,t),e}(nh),Wd=function(){function t(t){this.persistence=t,this.Ss=new Vd,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw ha()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),ih.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),ih.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),ih.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ih.forEach(this.xs,function(r){var i=ka.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return ih.or([function(){return ih.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),Kd=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function $d(t,e){return"firestore_clients_"+t+"_"+e}function Yd(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Jd(t,e){return"firestore_targets_"+t+"_"+e}Kd.UNAUTHENTICATED=new Kd(null),Kd.GOOGLE_CREDENTIALS=new Kd("google-credentials-uid"),Kd.FIRST_PARTY=new Kd("first-party-uid");var Xd=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ta(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ua("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zd=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ta(i.error.code,i.error.message)),o?new t(e,i.state,r):(ua("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),tf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Gc(),s=0;i&&s<r.activeTargetIds.length;++s)i=Sa(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ua("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ef=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ua("SharedClientState","Failed to parse online state: "+e),null)},t}(),nf=function(){function t(){this.activeTargetIds=Gc()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),rf=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Nc(ma),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=$d(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new nf),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ra.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem($d(this.persistenceKey,r)))&&(o=tf.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Jd(this.persistenceKey,t));if(n){var r=Zd.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Jd(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return aa("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){aa("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){aa("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(aa("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(ra.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(ra.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=ia.o;if(null!=t)try{var n=JSON.parse(t);da("number"==typeof n),e=n}catch(t){ua("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ia.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Xd(this.currentUser,t,e,n),i=Yd(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Yd(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Jd(this.persistenceKey,t),i=new Zd(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return tf.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Xd.$s(new Kd(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Zd.$s(r,e)},t.prototype.Ys=function(t){return ef.$s(t)},t.prototype.hi=function(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(aa("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Gc();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),of=function(){function t(){this.yi=new nf,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new nf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),sf=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),af=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){aa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){aa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),uf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},cf=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),lf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(ra.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new na;s.listenOnce(Zs.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Xs.NO_ERROR:var e=s.getResponseJson();aa("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xs.TIMEOUT:aa("Connection",'RPC "'+t+'" timed out'),o(new Ta(Ea.DEADLINE_EXCEEDED,"Request time out"));break;case Xs.HTTP_ERROR:var n=s.getStatus();if(aa("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ea).indexOf(e)>=0?e:Ea.UNKNOWN}(r.status);o(new Ta(a,r.message))}else o(new Ta(Ea.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ta(Ea.UNAVAILABLE,"Connection failed."));break;default:ha()}}finally{aa("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ws,i=$i(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(tr.t)()||Object(tr.w)()||Object(tr.q)()||Object(tr.s)()||Object(tr.x)()||Object(tr.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");aa("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new cf({vi:function(t){c?aa("Connection","Not sending because WebChannel is closed:",t):(u||(aa("Connection","Opening WebChannel transport."),a.open(),u=!0),aa("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,ea.EventType.OPEN,function(){c||aa("Connection","WebChannel transport opened.")}),h(a,ea.EventType.CLOSE,function(){c||(c=!0,aa("Connection","WebChannel transport closed"),l.$i())}),h(a,ea.EventType.ERROR,function(t){c||(c=!0,ca("Connection","WebChannel transport errored:",t),l.$i(new Ta(Ea.UNAVAILABLE,"The operation could not be completed")))}),h(a,ea.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];da(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){aa("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Cc[t];if(void 0!==e)return jc(e)}(i),s=r.message;void 0===o&&(o=Ea.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Ta(o,s)),a.close()}else aa("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,ta.STAT_EVENT,function(t){10===t.stat?aa("Connection","Detected buffering proxy"):11===t.stat&&aa("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);aa("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return aa("RestConnection","Received: ",t),t},function(e){throw ca("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+uf[t]},t}());function hf(){return"undefined"!=typeof window?window:null}function df(){return"undefined"!=typeof document?document:null}function ff(t){return new rl(t,!0)}var pf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&aa("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),gf=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new pf(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Ea.RESOURCE_EXHAUSTED?(ua(e.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Ea.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Ta(Ea.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(ra.b)(t,void 0,void 0,function(){return Object(ra.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return aa("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(aa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),mf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(ra.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ha()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(da(void 0===e||"string"==typeof e),Aa.fromBase64String(e||"")):(da(void 0===e||e instanceof Uint8Array),Aa.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ea.UNKNOWN:jc(t.code);return new Ta(e,t.message||"")}(a);n=new Yc(r,i,o,s||null)}else if("documentChange"in e){i=hl(t,(r=e.documentChange).document.name),o=al(r.document.updateTime);var a=new Hu({mapValue:{fields:r.document.fields}}),u=(s=new eu(i,o,a,{}),r.targetIds||[]);n=new Kc(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=hl(t,(r=e.documentDelete).document),o=r.readTime?al(r.readTime):qu.min(),a=new nu(i,o),n=new Kc([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=hl(t,(r=e.documentRemove).document),n=new Kc([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return ha();var c=e.filter;i=new xc(r=c.count||0),n=new $c(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return qu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?qu.min():e.readTime?al(e.readTime):qu.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=pl(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=uu(r)?{documents:_l(t,r)}:{query:wl(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ol(t,e.resumeToken):e.snapshotVersion.compareTo(qu.min())>0&&(n.readTime=il(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ha()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=pl(this.D),e.removeTarget=t,this.wr(e)},e}(gf),yf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(da(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(da(void 0!==e),t.map(function(t){return function(t,e){var n=al(t.updateTime?t.updateTime:e);return n.isEqual(qu.min())&&(n=al(e)),new uc(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=al(t.commitTime);return this.listener.Pr(n,e)}return da(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=pl(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return bl(e.D,t)})};this.wr(n)},e}(gf),bf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(ra.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Ta(Ea.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===Ea.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===Ea.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),vf=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(ua(e),this.Fr=!1):aa("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),_f=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(ra.b)(o,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return jf(this)?(aa("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return(e=fa(t)).Qr.add(4),[4,Of(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,wf(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new vf(n,r)};function wf(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:if(!jf(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Of(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Cf(t,e){var n=fa(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),If(n)?xf(n):zf(n).ar()&&Ef(n,e))}function Sf(t,e){var n=fa(t),r=zf(n);n.Ur.delete(e),r.ar()&&Tf(n,e),0===n.Ur.size&&(r.ar()?r.lr():jf(n)&&n.jr.set("Unknown"))}function Ef(t,e){t.Gr.H(e.targetId),zf(t).Ir(e)}function Tf(t,e){t.Gr.H(e),zf(t).Ar(e)}function xf(t){t.Gr=new Xc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),zf(t).start(),t.jr.Or()}function If(t){return jf(t)&&!zf(t).cr()&&t.Ur.size>0}function jf(t){return 0===fa(t).Qr.size}function Nf(t){t.Gr=void 0}function kf(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){return t.Ur.forEach(function(e,n){Ef(t,e)}),[2]})})}function Af(t,e){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(n){return Nf(t),If(t)?(t.jr.Lr(e),xf(t)):t.jr.set("Unknown"),[2]})})}function Pf(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o;return Object(ra.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Yc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ra.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),aa("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Df(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Kc?t.Gr.st(e):e instanceof $c?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(qu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Td(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(Aa.EMPTY_BYTE_STRING,n.snapshotVersion)),Tf(t,e);var r=new bh(n.target,e,1,n.sequenceNumber);Ef(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return aa("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Df(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Df(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r=this;return Object(ra.d)(this,function(i){switch(i.label){case 0:if(!ch(e))throw e;return t.Qr.add(1),[4,Of(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Td(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(ra.b)(r,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return aa("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,wf(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Rf(t,e){return e().catch(function(n){return Df(t,n,e)})}function Mf(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(ra.d)(this,function(s){switch(s.label){case 0:e=fa(t),n=Gf(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return jf(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,jd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Gf(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Df(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Lf(e)&&Ff(e),[2]}})})}function Lf(t){return jf(t)&&!Gf(t).cr()&&t.qr.length>0}function Ff(t){Gf(t).start()}function Vf(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){return Gf(t).Sr(),[2]})})}function Uf(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n,r;return Object(ra.d)(this,function(i){for(e=Gf(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function qf(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=yh.from(r,e,n),[4,Rf(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Mf(t)];case 2:return o.sent(),[2]}})})}function Bf(t,e){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(n){switch(n.label){case 0:return e&&Gf(t).br?[4,function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:return Ic(r=e.code)&&r!==Ea.ABORTED?(n=t.qr.shift(),Gf(t).hr(),[4,Rf(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Mf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Lf(t)&&Ff(t),[2]}})})}function Hf(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n;return Object(ra.d)(this,function(r){switch(r.label){case 0:return n=fa(t),e?(n.Qr.delete(2),[4,wf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Of(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zf(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=fa(t);return r.Cr(),new mf(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:kf.bind(null,t),Di:Af.bind(null,t),Tr:Pf.bind(null,t)}),t.Kr.push(function(n){return Object(ra.b)(e,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),If(t)?xf(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),Nf(t),e.label=3;case 3:return[2]}})})})),t.zr}function Gf(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=fa(t);return r.Cr(),new yf(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Vf.bind(null,t),Di:Bf.bind(null,t),Vr:Uf.bind(null,t),Pr:qf.bind(null,t)}),t.Kr.push(function(n){return Object(ra.b)(e,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Mf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(aa("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var Qf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ta(Ea.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Wf(t,e){if(ua("AsyncQueue",e+": "+t),ch(t))return new Ta(Ea.UNAVAILABLE,e+": "+t);throw t}var Kf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ka.comparator(e.key,n.key)}:function(t,e){return ka.comparator(t.key,e.key)},this.keyedMap=Vc(),this.sortedSet=new Nc(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$f=function(){function t(){this.Jr=new Nc(ka.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):ha():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Yf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Kf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ru(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Jf=function(){this.Xr=void 0,this.listeners=[]},Xf=function(){this.queries=new id(function(t){return Mu(t)},Ru),this.onlineState="Unknown",this.Zr=new Set};function Zf(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ra.d)(this,function(c){switch(c.label){case 0:if(n=fa(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Jf),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Wf(a,"Initialization of query '"+Lu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&rp(n),[2]}})})}function tp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ra.d)(this,function(a){return n=fa(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ep(t,e){for(var n=fa(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&rp(n)}function np(t,e,n){var r=fa(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function rp(t){t.Zr.forEach(function(t){t.next()})}var ip=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Yf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Yf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),op=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),sp=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return hl(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?yl(this.D,t.document,!1):new nu(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return al(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new sp(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Hc()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return[4,Md(this.localStore,new sp(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ld(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bd(Object.assign({},this.progress),t))]}})})}}();var ap=function(t){this.key=t},up=function(t){this.key=t},cp=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=Hc(),this.mutatedKeys=Hc(),this.po=Vu(t),this.Eo=new Kf(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new $f,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=xu(this.query)&&i.size===this.query.limit?i.last():null,c=Iu(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof eu?e:null;h&&(h=Fu(n.query,h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),xu(this.query)||Iu(this.query))for(;s.size>this.query.limit;){var l=xu(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ha()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Yf(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new $f,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=Hc(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new up(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new ap(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=Hc();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Yf.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),lp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},hp=function(t){this.key=t,this.Co=!1},dp=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new id(function(t){return Mu(t)},Ru),this.$o=new Map,this.Fo=new Set,this.Oo=new Nc(ka.comparator),this.ko=new Map,this.Mo=new Vd,this.Lo={},this.Bo=new Map,this.qo=Qh.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function fp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:return n=Bp(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,Nd(n.localStore,Pu(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,pp(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Cf(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function pp(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(ra.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,Ad(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(xp(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,Ad(t.localStore,e,!0)];case 1:return i=l.sent(),o=new cp(e,i.jn),s=o.Io(i.documents),a=Wc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),xp(t,n,u.Po),c=new lp(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function gp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return n=fa(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!Ru(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,kd(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Sf(n.remoteStore,r.targetId),Ep(n,r.targetId)}).catch(Jh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ep(n,r.targetId),[4,kd(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function mp(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:r=Hp(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=fa(t),i=La.now(),o=e.reduce(function(t,e){return t.add(e.key)},Hc());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=pc(c,n.get(c.key));null!=l&&s.push(new bc(c.key,l,Gu(l.proto.mapValue),cc.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Nc(ma)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Np(r,i.changes)];case 3:return a.sent(),[4,Mf(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Wf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function yp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:n=fa(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xd(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(da(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?da(r.Co):t.removedDocuments.size>0&&(da(r.Co),r.Co=!1))}),[4,Np(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function bp(t,e,n){var r=fa(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=fa(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&rp(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vp(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(ra.d)(this,function(c){switch(c.label){case 0:return(r=fa(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Nc(ka.comparator)).insert(o,new nu(o,qu.min())),a=Hc().add(o),u=new Qc(qu.min(),new Map,new Pc(ma),s,a),[4,yp(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),jp(r),[3,4];case 2:return[4,kd(r.localStore,e,!1).then(function(){return Ep(r,e,n)}).catch(Jh)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function _p(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:n=fa(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ed(n.localStore,e)];case 2:return i=o.sent(),Sp(n,r,null),Cp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Np(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function wp(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:r=fa(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=fa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return da(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Sp(r,e,n),Cp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Np(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Op(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:jf((n=fa(t)).remoteStore)||aa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=fa(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Wf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Cp(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Sp(t,e,n){var r=fa(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Ep(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Tp(t,e)})}function Tp(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Sf(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),jp(t))}function xp(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ap?(t.Mo.addReference(o.key,e),Ip(t,o)):o instanceof up?(aa("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Tp(t,o.key)):ha()}}function Ip(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(aa("SyncEngine","New document in limbo: "+n),t.Fo.add(r),jp(t))}function jp(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new ka(Ia.fromString(e)),r=t.qo.next();t.ko.set(r,new hp(n)),t.Oo=t.Oo.insert(n,r),Cf(t.remoteStore,new bh(Pu(Tu(n.path)),r,2,ia.o))}}function Np(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:return r=fa(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=_d.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(ra.d)(this,function(l){switch(l.label){case 0:n=fa(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return ih.forEach(e,function(e){return ih.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return ih.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ch(r=l.sent()))throw r;return aa("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function kp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:return(n=fa(t)).currentUser.isEqual(e)?[3,3]:(aa("SyncEngine","User change. New user:",e.toKey()),[4,Sd(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Ta(Ea.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Np(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Ap(t,e){var n=fa(t),r=n.ko.get(e);if(r&&r.Co)return Hc().add(r.key);var i=Hc(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function Pp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return[4,Ad((n=fa(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&xp(n,e.targetId,i.Po),i)]}})})}function Dp(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){return[2,Dd((e=fa(t)).localStore).then(function(t){return Np(e,t)})]})})}function Rp(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o;return Object(ra.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=fa(t),r=fa(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):ih.resolve(null)})})}((i=fa(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Mf(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Sp(i,e,r||null),Cp(i,e),function(t,e){fa(fa(t).Tn).Xt(e)}(i.localStore,e)):ha(),s.label=4;case 4:return[4,Np(i,o)];case 5:return s.sent(),[3,7];case 6:aa("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Mp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ra.d)(this,function(c){switch(c.label){case 0:return Bp(n=fa(t)),Hp(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Lp(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,Hf(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Cf(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Ep(n,e),kd(n.localStore,e,!0)}),Sf(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Lp(n,a)];case 5:return c.sent(),function(t){var e=fa(t);e.ko.forEach(function(t,n){Sf(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Nc(ka.comparator)}(n),n.Uo=!1,[4,Hf(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Lp(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(ra.d)(this,function(g){switch(g.label){case 0:n=fa(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,Nd(n.localStore,Pu(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.No.get(h[l]),[4,Pp(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Pd(n.localStore,a)];case 8:return p=g.sent(),[4,Nd(n.localStore,p)];case 9:return u=g.sent(),[4,pp(n,Fp(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Fp(t){return Eu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Vp(t){var e=fa(t);return fa(fa(e.localStore).persistence).gn()}function Up(t,e,n,r){return Object(ra.b)(this,void 0,void 0,function(){var i,o,s;return Object(ra.d)(this,function(a){switch(a.label){case 0:return(i=fa(t)).Uo?(aa("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Dd(i.localStore)];case 3:return o=a.sent(),s=Qc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Np(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,kd(i.localStore,e,!0)];case 6:return a.sent(),Ep(i,e,r),[3,8];case 7:ha(),a.label=8;case 8:return[2]}})})}function qp(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(ra.d)(this,function(d){switch(d.label){case 0:if(!(r=Bp(t)).Uo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(aa("SyncEngine","Adding an already active target "+s),[3,5]):[4,Pd(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Nd(r.localStore,a)];case 3:return u=d.sent(),[4,pp(r,Fp(a),u.targetId,!1)];case 4:d.sent(),Cf(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ra.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,kd(r.localStore,t,!1).then(function(){Sf(r.remoteStore,t),Ep(r,t)}).catch(Jh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Bp(t){var e=fa(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ap.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vp.bind(null,e),e.xo.Tr=ep.bind(null,e.eventManager),e.xo.Ko=np.bind(null,e.eventManager),e}function Hp(t){var e=fa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_p.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wp.bind(null,e),e}var zp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return this.D=ff(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Cd(this.persistence,new wd,t.initialUser,this.D)},t.prototype.Go=function(t){return new Gd(Wd.Cs,this.D)},t.prototype.jo=function(t){return new of},t.prototype.terminate=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ra.c)(e,t),e.prototype.initialize=function(e){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Rd(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,Hp(this.Jo.syncEngine)];case 4:return n.sent(),[4,Mf(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Cd(this.persistence,new wd,t.initialUser,this.D)},e.prototype.zo=function(t){return new td(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=yd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fh.withCacheSize(this.cacheSizeBytes):Fh.DEFAULT;return new pd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,hf(),df(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new of},e}(zp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ra.c)(e,t),e.prototype.initialize=function(e){return Object(ra.b)(this,void 0,void 0,function(){var n,r=this;return Object(ra.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof rf?(this.sharedClientState.syncEngine={wi:Rp.bind(null,n),_i:Up.bind(null,n),mi:qp.bind(null,n),gn:Vp.bind(null,n),di:Dp.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(ra.b)(r,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return[4,Mp(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=hf();if(!rf.At(e))throw new Ta(Ea.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new rf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Gp),Wp=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n=this;return Object(ra.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bp(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=kp.bind(null,this.syncEngine),[4,Hf(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Xf},t.prototype.createDatastore=function(t){var e=ff(t.databaseInfo.databaseId),n=new lf(t.databaseInfo);return function(t,e,n){return new bf(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return bp(s.syncEngine,t,0)},o=af.At()?new af:new sf,new _f(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new dp(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return e=fa(t),aa("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Of(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Kp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),$p=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new rh,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new op(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n=this;return Object(ra.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ta(Ea.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ra.d)(this,function(u){switch(u.label){case 0:return n=fa(t),r=pl(n.D)+"/documents",i={documents:e.map(function(t){return ll(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){da(!!e.found);var n=hl(t,e.found.name),r=al(e.found.updateTime),i=new Hu({mapValue:{fields:e.found.fields}});return new eu(n,r,i,{})}(t,e):"missing"in e?function(t,e){da(!!e.missing),da(!!e.readTime);var n=hl(t,e.missing),r=al(e.readTime);return new nu(n,r)}(t,e):ha()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());da(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof nu||t instanceof eu?n.recordVersion(t):ha()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ec(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e=this;return Object(ra.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ka.fromPath(n);e.mutations.push(new Tc(r,e.precondition(r)))}),[4,function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return n=fa(t),r=pl(n.D)+"/documents",i={writes:e.map(function(t){return bl(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof eu)e=t.version;else{if(!(t instanceof nu))throw ha();e=qu.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ta(Ea.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?cc.updateTime(e):cc.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(qu.min()))throw new Ta(Ea.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cc.updateTime(e)}return cc.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Yp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new pf(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(ra.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(ra.d)(this,function(r){return t=new $p(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Oa(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ic(e)}return!1},t}(),Jp=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Kd.UNAUTHENTICATED,this.clientId=ga.u(),this.credentialListener=function(){},this.receivedInitialUser=new rh,this.credentials.setChangeListener(function(t){aa("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ta(Ea.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new rh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ra.b)(t,void 0,void 0,function(){var t,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Wf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Xp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(ra.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),aa("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(ra.b)(i,void 0,void 0,function(){return Object(ra.d)(this,function(t){switch(t.label){case 0:return[4,Sd(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Zp(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,tg(t)];case 1:return n=i.sent(),aa("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(ra.b)(this,void 0,void 0,function(){var n,r;return Object(ra.d)(this,function(i){switch(i.label){case 0:return(n=fa(t)).asyncQueue.verifyOperationInProgress(),aa("RemoteStore","RemoteStore received new credentials"),r=jf(n),n.Qr.add(3),[4,Of(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,wf(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function tg(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(aa("FirestoreClient","Using default OfflineComponentProvider"),[4,Xp(t,new zp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function eg(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(aa("FirestoreClient","Using default OnlineComponentProvider"),[4,Zp(t,new Wp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function ng(t){return tg(t).then(function(t){return t.persistence})}function rg(t){return tg(t).then(function(t){return t.localStore})}function ig(t){return eg(t).then(function(t){return t.remoteStore})}function og(t){return eg(t).then(function(t){return t.syncEngine})}function sg(t){return Object(ra.b)(this,void 0,void 0,function(){var e,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:return[4,eg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=fp.bind(null,e.syncEngine),n.onUnlisten=gp.bind(null,e.syncEngine),n)]}})})}function ag(t,e,n){var r=this;void 0===n&&(n={});var i=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(r,void 0,void 0,function(){var r;return Object(ra.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kp({next:function(o){e.enqueueAndForget(function(){return tp(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ta(Ea.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ta(Ea.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ip(Tu(n.path),o,{includeMetadataChanges:!0,uo:!0});return Zf(t,s)},[4,sg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function ug(t,e,n){var r=this;void 0===n&&(n={});var i=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(r,void 0,void 0,function(){var r;return Object(ra.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kp({next:function(n){e.enqueueAndForget(function(){return tp(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ta(Ea.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ip(n,o,{includeMetadataChanges:!0,uo:!0});return Zf(t,s)},[4,sg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var cg=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},lg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),hg=new Map,dg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},fg=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Kd.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),pg=function(){function t(t){var e=this;this.fc=null,this.currentUser=Kd.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(aa("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(da("string"==typeof n.accessToken),new dg(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return da(null===t||"string"==typeof t),new Kd(t)},t}(),gg=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=Kd.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),mg=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new gg(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(Kd.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function yg(t,e,n){if(!n)throw new Ta(Ea.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function vg(t,e,n,r){if(!0===e&&!0===r)throw new Ta(Ea.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function _g(t){if(!ka.isDocumentKey(t))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function wg(t){if(ka.isDocumentKey(t))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Og(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ha()}function Cg(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ta(Ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Og(t);throw new Ta(Ea.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Sg(t,e){if(e<=0)throw new Ta(Ea.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Eg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ta(Ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ta(Ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,vg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Tg=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Eg({}),this._settingsFrozen=!1,t instanceof lg?(this._databaseId=t,this._credentials=new fg):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ta(Ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lg(t.options.projectId)}(t),this._credentials=new pg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eg(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new fg;switch(t.type){case"gapi":var e=t.client;return da(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mg(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ta(Ea.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=hg.get(this))&&(aa("ComponentProvider","Removing Datastore"),hg.delete(this),t.terminate()),Promise.resolve();var t},t}(),xg=function(t){this._delegate=t},Ig=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ng(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),jg=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ng=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Tu(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ig(this.firestore,null,new ka(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(jg);function kg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof xg&&(t=t._delegate),yg("collection","path",e),t instanceof Tg)return wg(n=Ia.fromString.apply(Ia,Object(ra.f)([e],r))),new Ng(t,null,n);if(!(t instanceof Ig||t instanceof Ng))throw new Ta(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wg(n=Ia.fromString.apply(Ia,Object(ra.f)([t.path],r)).child(Ia.fromString(e))),new Ng(t.firestore,null,n)}function Ag(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof xg&&(t=t._delegate),1===arguments.length&&(e=ga.u()),yg("doc","path",e),t instanceof Tg)return _g(n=Ia.fromString.apply(Ia,Object(ra.f)([e],r))),new Ig(t,null,new ka(n));if(!(t instanceof Ig||t instanceof Ng))throw new Ta(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _g(n=t._path.child(Ia.fromString.apply(Ia,Object(ra.f)([e],r)))),new Ig(t.firestore,t instanceof Ng?t._converter:null,new ka(n))}function Pg(t,e){return t instanceof xg&&(t=t._delegate),e instanceof xg&&(e=e._delegate),(t instanceof Ig||t instanceof Ng)&&(e instanceof Ig||e instanceof Ng)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Dg(t,e){return t instanceof xg&&(t=t._delegate),e instanceof xg&&(e=e._delegate),t instanceof jg&&e instanceof jg&&t.firestore===e.firestore&&Ru(t._query,e._query)&&t._converter===e._converter}var Rg=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new pf(this,"async_queue_retry"),this.bc=function(){var e=df();e&&aa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=df();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=df();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(ra.b)(this,void 0,void 0,function(){var t,e=this;return Object(ra.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!ch(t=n.sent()))throw t;return aa("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,ua("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Qf.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&ha()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(ra.b)(this,void 0,void 0,function(){var t;return Object(ra.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Mg(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new rh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Lg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Rg,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(ra.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Vg(this),this._firestoreClient.terminate()},e}(Tg);function Fg(t){return t._firestoreClient||Vg(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vg(t){var e=t._freezeSettings(),n=function(t,e,n){return new cg(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Jp(t._credentials,t._queue,n)}function Ug(t,e,n){var r=this,i=new rh;return t.asyncQueue.enqueue(function(){return Object(ra.b)(r,void 0,void 0,function(){var r;return Object(ra.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Xp(t,n)];case 1:return o.sent(),[4,Zp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ea.FAILED_PRECONDITION||t.code===Ea.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function qg(t){if(t._initialized||t._terminated)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Bg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Na(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Hg=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Aa.fromBase64String(e))}catch(e){throw new Ta(Ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Aa.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),zg=function(t){this._methodName=t},Gg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ta(Ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ta(Ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ma(this._lat,t._lat)||ma(this._long,t._long)},t}(),Qg=/^__.*__$/,Wg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new bc(t,this.data,this.fieldMask,e,this.fieldTransforms):new yc(t,this.data,e,this.fieldTransforms)},t}(),Kg=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new bc(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function $g(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ha()}}var Yg=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return mm(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if($g(this.Fc)&&Qg.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Jg=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||ff(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Yg({Fc:t,methodName:e,Kc:n,path:Na.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function Xg(t){var e=t._freezeSettings(),n=ff(t._databaseId);return new Jg(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);dm("Data must be an object, but it was:",s,r);var a,u,c=lm(r,s);if(o.merge)a=new Bu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=fm(e,d[h],n);if(!s.contains(f))throw new Ta(Ea.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");ym(l,f)||l.push(f)}a=new Bu(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Wg(new Hu(c),a,u)}var tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(zg);function em(t,e,n){return new Yg({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var nm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype._toFieldTransform=function(t){return new ac(t.path,new Zu)},e.prototype.isEqual=function(t){return t instanceof e},e}(zg),rm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(ra.c)(e,t),e.prototype._toFieldTransform=function(t){var e=em(this,t,!0),n=this.jc.map(function(t){return cm(t,e)}),r=new tc(n);return new ac(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zg),im=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(ra.c)(e,t),e.prototype._toFieldTransform=function(t){var e=em(this,t,!0),n=this.jc.map(function(t){return cm(t,e)}),r=new nc(n);return new ac(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zg),om=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(ra.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new ic(t.D,Ku(t.D,this.Gc));return new ac(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(zg);function sm(t,e,n,r){var i=t.Wc(1,e,n);dm("Data must be an object, but it was:",i,r);var o=[],s=new zu;_a(r,function(t,r){var a=gm(e,t,n);r instanceof xg&&(r=r._delegate);var u=i.Bc(a);if(r instanceof tm)o.push(a);else{var c=cm(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Bu(o);return new Kg(s.v(),a,i.fieldTransforms)}function am(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[fm(e,r,n)],u=[i];if(o.length%2!=0)throw new Ta(Ea.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(fm(e,o[c])),u.push(o[c+1]);for(var l=[],h=new zu,d=a.length-1;d>=0;--d)if(!ym(l,a[d])){var f=a[d],p=u[d];p instanceof xg&&(p=p._delegate);var g=s.Bc(f);if(p instanceof tm)l.push(f);else{var m=cm(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Bu(l);return new Kg(h.v(),y,s.fieldTransforms)}function um(t,e,n,r){return void 0===r&&(r=!1),cm(n,t.Wc(r?4:3,e))}function cm(t,e){if(t instanceof xg&&(t=t._delegate),hm(t))return dm("Unsupported field value:",e,t),lm(t,e);if(t instanceof zg)return function(t,e){if(!$g(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=cm(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof xg&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ku(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=La.fromDate(t);return{timestampValue:il(e.D,n)}}if(t instanceof La)return n=new La(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:il(e.D,n)};if(t instanceof Gg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hg)return{bytesValue:ol(e.D,t._byteString)};if(t instanceof Ig){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ul(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Og(t))}(t,e)}function lm(t,e){var n={};return wa(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,function(t,r){var i=cm(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function hm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof La||t instanceof Gg||t instanceof Hg||t instanceof Ig||t instanceof zg)}function dm(t,e,n){if(!hm(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Og(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function fm(t,e,n){if(e instanceof xg&&(e=e._delegate),e instanceof Bg)return e._internalPath;if("string"==typeof e)return gm(t,e);throw mm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var pm=new RegExp("[~\\*/\\[\\]]");function gm(t,e,n){if(e.search(pm)>=0)throw mm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Bg.bind.apply(Bg,Object(ra.f)([void 0],e.split(".")))))._internalPath}catch(r){throw mm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function mm(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ta(Ea.INVALID_ARGUMENT,(a+=". ")+t+u)}function ym(t,e){return t.some(function(t){return t.isEqual(e)})}var bm=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ig(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new vm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(_m("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),vm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(bm);function _m(t,e){return"string"==typeof e?gm(t,e):e instanceof xg?e._delegate._internalPath:e._internalPath}var wm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Om=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(ra.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Cm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(_m("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(bm),Cm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Om),Sm=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new wm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Cm(n._firestore,n._userDataWriter,r.key,r,new wm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ta(Ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Cm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Cm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Em(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Em(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ha()}}function Tm(t,e){return t instanceof Om&&e instanceof Om?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Sm&&e instanceof Sm&&t._firestore===e._firestore&&Dg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function xm(t){if(Iu(t)&&0===t.explicitOrderBy.length)throw new Ta(Ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Im=function(){};function jm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(ra.c)(e,t),e.prototype._apply=function(t){var e=Xg(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Lm(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Mm(r,t,l[c]));a={arrayValue:{values:u}}}else a=Mm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Lm(s,o),a=um(n,"where",s,"in"===o||"not-in"===o);var h=cu.create(i,o,a);return function(t,e){if(e.g()){var n=Nu(t);if(null!==n&&!n.isEqual(e.field))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ju(t);null!==r&&Fm(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ta(Ea.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new jg(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Im),km=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(ra.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _u(e,n);return function(t,e){if(null===ju(t)){var n=Nu(t);null!==n&&Fm(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new jg(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Su(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Im),Am=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(ra.c)(e,t),e.prototype._apply=function(t){return new jg(t.firestore,t._converter,Du(t._query,this.Xc,this.Zc))},e}(Im),Pm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(ra.c)(e,t),e.prototype._apply=function(t){var e=Rm(t,this.type,this.ta,this.ea);return new jg(t.firestore,t._converter,function(t,e){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Im),Dm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(ra.c)(e,t),e.prototype._apply=function(t){var e=Rm(t,this.type,this.ta,this.ea);return new jg(t.firestore,t._converter,function(t,e){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Im);function Rm(t,e,n,r){if(n[0]instanceof xg&&(n[0]=n[0]._delegate),n[0]instanceof bm)return function(t,e,n,r,i){if(!r)throw new Ta(Ea.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Au(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Ka(e,r.key));else{var c=r.field(u.field);if(Fa(c))throw new Ta(Ea.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new bu(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Xg(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ta(Ea.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ku(t)&&-1!==c.indexOf("/"))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ia.fromString(c));if(!ka.isDocumentKey(l))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ka(l);a.push(Ka(e,h))}else{var d=um(n,r,c);a.push(d)}}return new bu(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Mm(t,e,n){if(n instanceof xg&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ku(e)&&-1!==n.indexOf("/"))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ia.fromString(n));if(!ka.isDocumentKey(r))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ka(t,new ka(r))}if(n instanceof Ig)return Ka(t,n._key);throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Og(n)+".")}function Lm(t,e){if(!Array.isArray(t)||0===t.length)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Fm(t,e,n){if(!n.isEqual(e))throw new Ta(Ea.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Vm=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),qa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ra(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ma(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ha()}},t.prototype.convertObject=function(t,e){var n=this,r={};return _a(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Gg(Ra(t.latitude),Ra(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Va(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ua(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Da(t);return new La(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ia.fromString(t);da(Pl(n));var r=new lg(n.get(1),n.get(3)),i=new ka(n.popFirst(5));return r.isEqual(e)||ua("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Um(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var qm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ra.c)(e,t),e.prototype.convertBytes=function(t){return new Hg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ig(this.firestore,null,e)},e}(Vm),Bm=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Xg(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Hm(t,this._firestore),i=Um(r._converter,e,n),o=Zg(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,cc.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Hm(t,this._firestore);return e instanceof xg&&(e=e._delegate),o="string"==typeof e||e instanceof Bg?am(this._dataReader,"WriteBatch.update",s._key,e,n,r):sm(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,cc.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Hm(t,this._firestore);return this._mutations=this._mutations.concat(new Ec(e._key,cc.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ta(Ea.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Hm(t,e){if(t instanceof xg&&(t=t._delegate),t.firestore!==e)throw new Ta(Ea.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var zm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ra.c)(e,t),e.prototype.convertBytes=function(t){return new Hg(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ig(this.firestore,null,e)},e}(Vm);function Gm(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Cg(t,Ig);var o=Cg(t.firestore,Lg),s=Xg(o);return e instanceof xg&&(e=e._delegate),Wm(o,[("string"==typeof e||e instanceof Bg?am(s,"updateDoc",t._key,e,n,r):sm(s,"updateDoc",t._key,e)).toMutation(t._key,cc.exists(!0))])}function Qm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof xg&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Mg(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Mg(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Ig)c=Cg(t.firestore,Lg),l=Tu(t._key.path),u={next:function(e){i[a]&&i[a](Km(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Cg(t,jg);c=Cg(f.firestore,Lg),l=f._query;var p=new zm(c);u={next:function(t){i[a]&&i[a](new Sm(c,p,f,t))},error:i[a+1],complete:i[a+2]},xm(t._query)}return function(t,e,n,r){var i=this,o=new Kp(r),s=new ip(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(i,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return e=Zf,[4,sg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(i,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return e=tp,[4,sg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Fg(c),l,h,u)}function Wm(t,e){return function(t,e){var n=this,r=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var n;return Object(ra.d)(this,function(i){switch(i.label){case 0:return n=mp,[4,og(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Fg(t),e)}function Km(t,e,n){var r=n.docs.get(e._key),i=new zm(t);return new Om(t,i,e._key,r,new wm(n.hasPendingWrites,n.fromCache),e._converter)}var $m=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(ra.c)(e,t),e.prototype.get=function(e){var n=this,r=Hm(e,this._firestore),i=new zm(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Om(n._firestore,i,r._key,t._document,new wm(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Xg(t)}return t.prototype.get=function(t){var e=this,n=Hm(t,this._firestore),r=new qm(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return ha();var i=t[0];if(i instanceof nu)return new bm(e._firestore,r,n._key,null,n._converter);if(i instanceof eu)return new bm(e._firestore,r,i.key,i,n._converter);throw ha()})},t.prototype.set=function(t,e,n){var r=Hm(t,this._firestore),i=Um(r._converter,e,n),o=Zg(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Hm(t,this._firestore);return e instanceof xg&&(e=e._delegate),o="string"==typeof e||e instanceof Bg?am(this._dataReader,"Transaction.update",s._key,e,n,r):sm(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Hm(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ym(){if("undefined"==typeof Uint8Array)throw new Ta(Ea.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Jm(){if("undefined"==typeof atob)throw new Ta(Ea.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.fromBase64String=function(t){return Jm(),new e(Hg.fromBase64String(t))},e.fromUint8Array=function(t){return Ym(),new e(Hg.fromUint8Array(t))},e.prototype.toBase64=function(){return Jm(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Ym(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(xg),Zm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){qg(t=Cg(t,Lg));var n=Fg(t),r=t._freezeSettings(),i=new Wp;return Ug(n,i,new Gp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){qg(t=Cg(t,Lg));var e=Fg(t),n=t._freezeSettings(),r=new Wp;return Ug(e,r,new Qp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ta(Ea.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new rh;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ra.b)(e,void 0,void 0,function(){var e;return Object(ra.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ra.b)(this,void 0,void 0,function(){return Object(ra.d)(this,function(e){switch(e.label){case 0:return sh.At()?[4,sh.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(yd(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),ty=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof lg||(i.sa=e),i}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Cg(t,Tg))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&ca("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ra.b)(e,void 0,void 0,function(){var e,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:return[4,ng(t)];case 1:return e=r.sent(),[4,ig(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=fa(t);return e.Qr.delete(0),wf(e)}(n))]}})})})}(Fg(Cg(this._delegate,Lg)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ra.b)(e,void 0,void 0,function(){var e,n;return Object(ra.d)(this,function(r){switch(r.label){case 0:return[4,ng(t)];case 1:return e=r.sent(),[4,ig(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(ra.b)(this,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return(e=fa(t)).Qr.add(0),[4,Of(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Fg(Cg(this._delegate,Lg)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&vg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(e,void 0,void 0,function(){var e;return Object(ra.d)(this,function(r){switch(r.label){case 0:return e=Op,[4,og(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Fg(Cg(this._delegate,Lg)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Kp(e);return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){fa(t).Zr.add(e),e.next()},[4,sg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var e;return Object(ra.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){fa(t).Zr.delete(e)},[4,sg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Fg(t=Cg(t,Lg)),Mg(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Ta(Ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new py(this,kg(this._delegate,t))}catch(t){throw sy(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new oy(this,Ag(this._delegate,t))}catch(t){throw sy(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new hy(this,function(t,e){if(t=Cg(t,Tg),yg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new jg(t,null,function(t){return new Su(Ia.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw sy(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var n;return Object(ra.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return eg(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Yp(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Fg(t),function(n){return e(new $m(t,n))})}(this._delegate,function(n){return t(new ny(e,n))})},e.prototype.batch=function(){var t=this;return Fg(this._delegate),new ry(new Bm(this._delegate,function(e){return Wm(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Ta(Ea.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ta(Ea.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(xg),ey=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ra.c)(e,t),e.prototype.convertBytes=function(t){return new Xm(new Hg(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return oy.ia(e,this.firestore,null)},e}(Vm),ny=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new ey(e),r}return Object(ra.c)(e,t),e.prototype.get=function(t){var e=this,n=gy(t);return this._delegate.get(n).then(function(t){return new cy(e._firestore,new Om(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=gy(t);return n?(bg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ra.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=gy(t);return this._delegate.delete(e),this},e}(xg),ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.set=function(t,e,n){var r=gy(t);return n?(bg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ra.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=gy(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(xg),iy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(ra.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Cm(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ly(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new ey(t),n),i.set(n,o)),o},e}(xg);iy.oa=new WeakMap;var oy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new ey(e),r}return Object(ra.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Ta(Ea.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ig(n._delegate,r,new ka(t)))},e.ia=function(t,n,r){return new e(n,new Ig(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new py(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new py(this.firestore,kg(this._delegate,t))}catch(t){throw sy(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof xg&&(t=t._delegate),t instanceof Ig&&Pg(this._delegate,t)},e.prototype.set=function(t,e){e=bg("DocumentReference.set",e);try{return function(t,e,n){t=Cg(t,Ig);var r=Cg(t.firestore,Lg),i=Um(t._converter,e,n);return Wm(r,[Zg(Xg(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,cc.none())])}(this._delegate,t,e)}catch(t){throw sy(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Gm(this._delegate,t):Gm.apply(void 0,Object(ra.f)([this._delegate,t,e],n))}catch(t){throw sy(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Wm(Cg((t=this._delegate).firestore,Lg),[new Ec(t._key,cc.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ay(e),i=uy(e,function(e){return new cy(t.firestore,new Om(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Qm(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Cg(t,Ig);var e=Cg(t.firestore,Lg),n=Fg(e),r=new zm(e);return function(t,e){var n=this,r=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var n;return Object(ra.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i;return Object(ra.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=fa(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof eu?n.resolve(i):i instanceof nu?n.resolve(null):n.reject(new Ta(Ea.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Wf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,rg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Om(e,r,t._key,n,new wm(n instanceof eu&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Cg(t,Ig);var e=Cg(t.firestore,Lg);return ag(Fg(e),t._key,{source:"server"}).then(function(n){return Km(e,t,n)})}(this._delegate):function(t){t=Cg(t,Ig);var e=Cg(t.firestore,Lg);return ag(Fg(e),t._key).then(function(n){return Km(e,t,n)})}(this._delegate)).then(function(t){return new cy(e.firestore,new Om(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?iy.ra(this.firestore,t):null))},e}(xg);function sy(t,e,n){return t.message=t.message.replace(e,n),t}function ay(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Mg(r))return r}return{}}function uy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Mg(t[0])?t[0]:Mg(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var cy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new oy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Tm(this._delegate,t._delegate)},e}(xg),ly=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(cy),hy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new ey(e),r}return Object(ra.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,jm(this._delegate,function(t,e,n){var r=e,i=_m("where",t);return new Nm(i,r,n)}(t,n,r)))}catch(t){throw sy(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,jm(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=_m("orderBy",t);return new km(r,n)}(t,n)))}catch(t){throw sy(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,jm(this._delegate,function(t){return Sg("limit",t),new Am("limit",t,"F")}(t)))}catch(t){throw sy(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,jm(this._delegate,function(t){return Sg("limitToLast",t),new Am("limitToLast",t,"L")}(t)))}catch(t){throw sy(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,jm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pm("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw sy(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,jm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pm("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw sy(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,jm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dm("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw sy(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,jm(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dm("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw sy(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Dg(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Cg(t,jg);var e=Cg(t.firestore,Lg),n=Fg(e),r=new zm(e);return function(t,e){var n=this,r=new rh;return t.asyncQueue.enqueueAndForget(function(){return Object(ra.b)(n,void 0,void 0,function(){var n;return Object(ra.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ra.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(ra.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ad(t,e,!0)];case 1:return a=u.sent(),r=new cp(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Wf(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,rg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Sm(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Cg(t,jg);var e=Cg(t.firestore,Lg),n=Fg(e),r=new zm(e);return ug(n,t._query,{source:"server"}).then(function(n){return new Sm(e,r,t,n)})}(this._delegate):function(t){t=Cg(t,jg);var e=Cg(t.firestore,Lg),n=Fg(e),r=new zm(e);return xm(t._query),ug(n,t._query).then(function(n){return new Sm(e,r,t,n)})}(this._delegate)).then(function(t){return new fy(e.firestore,new Sm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ay(e),i=uy(e,function(e){return new fy(t.firestore,new Sm(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Qm(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?iy.ra(this.firestore,t):null))},e}(xg),dy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ly(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(xg),fy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new hy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new ly(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new dy(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new ly(n._firestore,r))})},e.prototype.isEqual=function(t){return Tm(this._delegate,t._delegate)},e}(xg),py=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(ra.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new oy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new oy(this.firestore,void 0===t?Ag(this._delegate):Ag(this._delegate,t))}catch(t){throw sy(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Cg(t.firestore,Lg),r=Ag(t),i=Um(t._converter,e);return Wm(n,[Zg(Xg(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,cc.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new oy(e.firestore,t)})},e.prototype.isEqual=function(t){return Pg(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?iy.ra(this.firestore,t):null))},e}(hy);function gy(t){return t instanceof xg&&(t=t._delegate),Cg(t,Ig)}var my,yy=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Bg.bind.apply(Bg,Object(ra.f)([void 0],e))))||this}return Object(ra.c)(e,t),e.documentId=function(){return new e(Na.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof xg&&(t=t._delegate),t instanceof Bg&&this._delegate._internalPath.isEqual(t._internalPath)},e}(xg),by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ra.c)(e,t),e.serverTimestamp=function(){var t=new nm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new tm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rm("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new im("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new om("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(xg),vy=n("/6Yf"),_y={Firestore:ty,GeoPoint:Gg,Timestamp:La,Blob:Xm,Transaction:ny,WriteBatch:ry,DocumentReference:oy,DocumentSnapshot:cy,Query:hy,QueryDocumentSnapshot:ly,QuerySnapshot:fy,CollectionReference:py,FieldPath:yy,FieldValue:by,setLogLevel:function(t){oa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function wy(t,e){return function(t,e=cn.b){return new an.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Oy(t,e){return wy(t,e).pipe(Object(St.a)(t=>({payload:t,type:"query"})))}function Cy(t,e){return Oy(t,e).pipe(Object(Yn.a)(void 0),Object(Jn.a)(),Object(St.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Sy(t,e,n){return Cy(t,n).pipe(Object(pn.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ey(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ey(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ey(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Object(gn.a)(),Object(St.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ey(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Ty(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new vy.a("firestore",function(t){return function(t,e){return new ty(t,new Lg(t,e),new Zm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_y)))})(my=Xn.a),my.registerVersion("@firebase/firestore","2.2.1");class xy{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Cy(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(St.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(Yn.a)(void 0),Object(Jn.a)(),Object(En.a)(([t,e])=>e.length>0||!t),Object(St.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(pn.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ty(t);return Sy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Oy(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ot.a)(this.query.get(t)).pipe(Object(_n.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Iy(this.ref.doc(t),this.afs)}}class Iy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Dy(n,e);return new xy(r,i,this.afs)}snapshotChanges(){return wy(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(Yn.a)(void 0),Object(Jn.a)(),Object(St.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(St.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Ot.a)(this.ref.get(t)).pipe(Object(_n.b)(this.afs.schedulers.insideAngular))}}class jy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Cy(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(En.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Cy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(pn.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ty(t);return Sy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Oy(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ot.a)(this.query.get(t)).pipe(Object(_n.b)(this.afs.schedulers.insideAngular))}}const Ny=new r.r("angularfire2.enableFirestorePersistence"),ky=new r.r("angularfire2.firestore.persistenceSettings"),Ay=new r.r("angularfire2.firestore.settings"),Py=new r.r("angularfire2.firestore.use-emulator");function Dy(t,e=(t=>t)){return{query:e(t),ref:t}}let Ry=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new bn.d(o),this.keepUnstableUntilFirst=Object(bn.h)(this.schedulers);const c=Object(bn.g)(t,o,e);!Pn.a.auth&&u&&Object(bn.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(bn.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!B(i)){const e=()=>{try{return Object(Ot.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(my){return"undefined"!=typeof console&&console.warn(my),Object(ln.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ln.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Dy(n,e),o=this.schedulers.ngZone.run(()=>r);return new xy(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new jy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Iy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(bn.c),r.Sb(bn.b,8),r.Sb(Ny,8),r.Sb(Ay,8),r.Sb(r.C),r.Sb(r.A),r.Sb(ky,8),r.Sb(Py,8),r.Sb(Tn,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Sb)(bn.c),Object(r.Sb)(bn.b,8),Object(r.Sb)(Ny,8),Object(r.Sb)(Ay,8),Object(r.Sb)(r.C),Object(r.Sb)(r.A),Object(r.Sb)(ky,8),Object(r.Sb)(Py,8),Object(r.Sb)(Tn,8))},token:t,providedIn:"any"}),t})(),My=(()=>{class t{constructor(t){this.bd=t,this.pathColeccion="/usuarios",this.referenciaAlaColeccion=t.collection(this.pathColeccion)}AgregarUno(t){return this.referenciaAlaColeccion.add(Object.assign({},t))}TraerTodos(){return this.referenciaAlaColeccion}BuscarUsuarioCorreo(t){return this.bd.collection(this.pathColeccion,e=>e.where("correo","==",t.correo))}BuscarPorNombreUsuario(t){return this.bd.collection(this.pathColeccion,e=>e.where("nombreUsuario","==",t.nombreUsuario))}BorrarUno(t){return this.referenciaAlaColeccion.doc(t).delete()}ModificarUno(t,e){return this.referenciaAlaColeccion.doc(t).update(e)}BuscarUnoLogin(t){return this.bd.collection(this.pathColeccion,e=>e.where("correo","==",t.correo).where("contrasenia","==",t.contrasenia))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Ry))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ly(t,e){if(1&t&&(r.Ob(0,"div"),r.Ob(1,"section",22),r.Ob(2,"div",23),r.mc(3),r.Ob(4,"span",24),r.mc(5),r.Nb(),r.Nb(),r.Ob(6,"div",25),r.Mb(7,"img",26),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.Zb().$implicit;r.Ab(3),r.oc(" ",t.mensaje," "),r.Ab(2),r.nc(t.horaYMin)}}function Fy(t,e){if(1&t&&(r.Ob(0,"section",27),r.Ob(1,"div",25),r.Mb(2,"img",28),r.Nb(),r.Ob(3,"div",29),r.mc(4),r.Ob(5,"span",30),r.mc(6),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.Zb().$implicit;r.Ab(4),r.oc(" ",t.mensaje," "),r.Ab(2),r.nc(t.horaYMin)}}function Vy(t,e){if(1&t&&(r.Ob(0,"div"),r.Ob(1,"section",19),r.kc(2,Ly,8,2,"div",20),r.Nb(),r.kc(3,Fy,7,2,"ng-template",null,21,r.lc),r.Nb()),2&t){const t=e.$implicit,n=r.gc(4),i=r.Zb();r.Ab(2),r.cc("ngIf",i.usuarioLogin==t.correo)("ngIfElse",n)}}let Uy=(()=>{class t{constructor(t,e){this.MensajeService=t,this.miServicioUsuario=e,this.rutaChat="adad",this.unMensaje=new un,this.date=new Date,this.item$=new an.a,this.usuarioLogin=localStorage.getItem("usuarioLogin")}ngOnInit(){this.MensajeService.CambiarRuta(this.rutaChat),this.item$=this.MensajeService.ObtenerTodos().valueChanges()}Enviar(){var t,e,n,r;this.unMensaje.mensaje=null!==(e=null===(t=$("#textMensaje").val())||void 0===t?void 0:t.toString())&&void 0!==e?e:"",this.unMensaje.correo=null!==(r=null===(n=localStorage.getItem("usuarioLogin"))||void 0===n?void 0:n.toString())&&void 0!==r?r:"",this.unMensaje.horaYMin=this.date.getHours()+":"+this.date.getMinutes(),$("#textMensaje").val(""),this.MensajeService.AgregarUno(this.unMensaje).then(()=>{$("#chatMensajes").scrollTop(99999)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb($n),r.Lb(My))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-chat"]],inputs:{rutaChat:"rutaChat"},decls:22,vars:3,consts:[["href","//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css","rel","stylesheet","id","bootstrap-css"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content","bg-secondary"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-white"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger"],[1,"modal-body"],[1,"chat","w-100"],[1,"card"],["id","chatMensajes",1,"card-body","msg_card_body"],[4,"ngFor","ngForOf"],["action",""],[1,"card-footer"],[1,"input-group"],["type","text","id","textMensaje","placeholder","Escribe tu mensaje",1,"form-control","type_msg"],[1,"input-group-append"],[1,"input-group-text","send_btn",3,"click"],[1,"fas","fa-location-arrow"],["id","mensajesUsuarios"],[4,"ngIf","ngIfElse"],["mensajesDeOtros",""],[1,"d-flex","justify-content-end","mb-4"],[1,"msg_cotainer_send"],[1,"msg_time_send"],[1,"img_cont_msg"],["src","../../../../assets/imagenes/personas/descargar (3).jpg",1,"rounded-circle","user_img_msg"],[1,"d-flex","justify-content-start","mb-4"],["src","../../../../assets/imagenes/personas/descargar (2).jpg",1,"rounded-circle","user_img_msg"],[1,"msg_cotainer"],[1,"msg_time"]],template:function(t,e){1&t&&(r.Mb(0,"link",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"div",3),r.Ob(4,"div",4),r.Ob(5,"h1",5),r.mc(6,"CHAT"),r.Nb(),r.Ob(7,"button",6),r.mc(8,"X"),r.Nb(),r.Nb(),r.Ob(9,"div",7),r.Ob(10,"div",8),r.Ob(11,"div",9),r.Ob(12,"div",10),r.kc(13,Vy,5,2,"div",11),r.ac(14,"async"),r.Nb(),r.Ob(15,"form",12),r.Ob(16,"section",13),r.Ob(17,"div",14),r.Mb(18,"input",15),r.Ob(19,"div",16),r.Ob(20,"button",17),r.Vb("click",function(){return e.Enviar()}),r.Mb(21,"i",18),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.Ab(13),r.cc("ngForOf",r.bc(14,1,e.item$)))},directives:[k,Le,oe,Pe,P],pipes:[U],styles:[".msg_card_body[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px;border-radius:100x;background:#000}.msg_card_body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3eff4f}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;background:#7f7fd5;background:linear-gradient(90deg,#91eae4,#86a8e7,#7f7fd5)}.chat[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.card[_ngcontent-%COMP%]{height:500px;border-radius:15px!important;background-color:rgba(0,0,0,.4)!important}.contacts_body[_ngcontent-%COMP%]{padding:.75rem 0!important;white-space:nowrap}.contacts_body[_ngcontent-%COMP%], .msg_card_body[_ngcontent-%COMP%]{overflow-y:auto}.card-header[_ngcontent-%COMP%]{border-radius:15px 15px 0 0!important;border-bottom:0!important}.card-footer[_ngcontent-%COMP%]{border-radius:0 0 15px 15px!important;border-top:0!important}.container[_ngcontent-%COMP%]{align-content:center}.search[_ngcontent-%COMP%]{border-radius:15px 0 0 15px!important;background-color:rgba(0,0,0,.3)!important;border:0!important;color:#fff!important}.search[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:0!important}.type_msg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.3)!important;border:0!important;color:#fff!important;height:60px!important;overflow-y:auto}.type_msg[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:0!important}.attach_btn[_ngcontent-%COMP%]{border-radius:15px 0 0 15px!important;background-color:rgba(0,0,0,.3)!important;border:0!important;color:#fff!important;cursor:pointer}.search_btn[_ngcontent-%COMP%], .send_btn[_ngcontent-%COMP%]{border-radius:0 15px 15px 0!important;background-color:rgba(0,0,0,.3)!important;border:0!important;color:#fff!important;cursor:pointer}.contacts[_ngcontent-%COMP%]{list-style:none;padding:0}.contacts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%!important;padding:5px 10px;margin-bottom:15px!important}.active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.3)}.user_img[_ngcontent-%COMP%]{height:70px;width:70px}.user_img[_ngcontent-%COMP%], .user_img_msg[_ngcontent-%COMP%]{border:1.5px solid #f5f6fa}.user_img_msg[_ngcontent-%COMP%]{height:40px;width:40px}.img_cont[_ngcontent-%COMP%]{position:relative;height:70px;width:70px}.img_cont_msg[_ngcontent-%COMP%]{height:40px;width:40px}.online_icon[_ngcontent-%COMP%]{position:absolute;height:15px;width:15px;background-color:#4cd137;border-radius:50%;bottom:.2em;right:.4em;border:1.5px solid #fff}.offline[_ngcontent-%COMP%]{background-color:#c23616!important}.user_info[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;margin-left:15px}.user_info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#fff}.user_info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;color:hsla(0,0%,100%,.6)}.video_cam[_ngcontent-%COMP%]{margin-left:50px;margin-top:5px}.video_cam[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:20px;cursor:pointer;margin-right:20px}.msg_cotainer[_ngcontent-%COMP%]{margin-left:10px;background-color:#82ccdd}.msg_cotainer[_ngcontent-%COMP%], .msg_cotainer_send[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;border-radius:25px;padding:10px;position:relative}.msg_cotainer_send[_ngcontent-%COMP%]{margin-right:10px;background-color:#78e08f}.msg_time[_ngcontent-%COMP%]{left:0}.msg_time[_ngcontent-%COMP%], .msg_time_send[_ngcontent-%COMP%]{position:absolute;bottom:-15px;color:hsla(0,0%,100%,.5);font-size:10px}.msg_time_send[_ngcontent-%COMP%]{right:0}.msg_head[_ngcontent-%COMP%]{position:relative}#action_menu_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;color:#fff;cursor:pointer;font-size:20px}.action_menu[_ngcontent-%COMP%]{z-index:1;position:absolute;padding:15px 0;background-color:rgba(0,0,0,.5);color:#fff;border-radius:15px;top:30px;right:15px;display:none}.action_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.action_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;padding:10px 15px;margin-bottom:5px}.action_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.action_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:rgba(0,0,0,.2)}@media(max-width:576px){.contacts_card[_ngcontent-%COMP%]{margin-bottom:15px!important}}"]}),t})(),qy=(()=>{class t{constructor(){this.tablero=[0,0,0,0,0,0,0,0,0],this.contador=0,this.estadoPartida=!0,this.ruta="",this.jugador1=new sn,this.jugador2=new sn}ngOnInit(){this.ruta="holaMUNDO/ta-te-ti"}ElegirCasilla(t){this.estadoPartida&&(this.jugador1.seleccion=parseInt(t),this.ValidarRespuesta(this.jugador1.seleccion)&&(this.tablero[this.jugador1.seleccion]=1,$("#celda"+on[this.jugador1.seleccion]).attr("src","../../../../../assets/imagenes/Ta-te-ti/ImagenX.svg"),$("#celda"+on[this.jugador1.seleccion]).css("visibility","visible"),this.Ganaste(1)?alert("Ganaste"):this.GenerarRespuestaMaquina()))}GenerarRespuestaMaquina(){let t=!1;do{this.jugador2.seleccion=Math.floor(8*Math.random())+0,this.ValidarRespuesta(this.jugador2.seleccion)?(this.tablero[this.jugador2.seleccion]=-1,$("#celda"+on[this.jugador2.seleccion]).attr("src","../../../../../assets/imagenes/Ta-te-ti/ImagenO.svg"),$("#celda"+on[this.jugador2.seleccion]).css("visibility","visible"),t=!0,this.Ganaste(-1)&&alert("Perdiste")):this.contador>=8&&(t=!0,alert("Empate"))}while(!t)}ValidarRespuesta(t){let e=!0;return 1!=this.tablero[t]&&-1!=this.tablero[t]||(e=!1),e}Ganaste(t){let e=!1;return this.contador++,console.log(this.contador),this.tablero[0]==t&&this.tablero[1]==t&&this.tablero[2]==t&&(e=!0),this.tablero[3]==t&&this.tablero[4]==t&&this.tablero[5]==t&&(e=!0),this.tablero[6]==t&&this.tablero[7]==t&&this.tablero[8]==t&&(e=!0),this.tablero[0]==t&&this.tablero[3]==t&&this.tablero[6]==t&&(e=!0),this.tablero[1]==t&&this.tablero[4]==t&&this.tablero[7]==t&&(e=!0),this.tablero[2]==t&&this.tablero[5]==t&&this.tablero[8]==t&&(e=!0),this.tablero[0]==t&&this.tablero[4]==t&&this.tablero[8]==t&&(e=!0),this.tablero[2]==t&&this.tablero[4]==t&&this.tablero[6]==t&&(e=!0),e&&(this.estadoPartida=!1),e}Reiniciar(){for(let t=0;t<this.tablero.length;t++)this.tablero[t]=0,$("#celda"+on[t]).css("visibility","hidden");this.contador=0,this.estadoPartida=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-ta-te-ti"]],decls:39,vars:1,consts:[[3,"rutaChat"],[1,"container"],[1,"table","bg-secondary","h-100"],[1,"text-center",2,"border","solid white 5px"],[1,"btn","w-100","h-100",3,"click"],["id","celdaUnoUno","width","50px","height","50px",2,"visibility","hidden"],["id","celdaUnoDos","width","50px","height","50px",2,"visibility","hidden"],["id","celdaUnoTres","width","50px","height","50px",2,"visibility","hidden"],["id","celdaDosUno","width","50px","height","50px",2,"visibility","hidden"],["id","celdaDosDos","width","50px","height","50px",2,"visibility","hidden"],["id","celdaDosTres","width","50px","height","50px",2,"visibility","hidden"],["id","celdaTresUno","width","50px","height","50px",2,"visibility","hidden"],["id","celdaTresDos","width","50px","height","50px",2,"visibility","hidden"],["id","celdaTresTres","width","50px","height","50px",2,"visibility","hidden"],[1,"btn","btn-outline-danger","btn-block",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"h1"),r.mc(1,"TA-TE-TI"),r.Nb(),r.Ob(2,"p"),r.mc(3,"Elije una casilla para empezar"),r.Nb(),r.Mb(4,"app-chat",0),r.Ob(5,"section",1),r.Ob(6,"table",2),r.Ob(7,"tr"),r.Ob(8,"td",3),r.Ob(9,"a",4),r.Vb("click",function(){return e.ElegirCasilla("0")}),r.Mb(10,"img",5),r.Nb(),r.Nb(),r.Ob(11,"td",3),r.Ob(12,"a",4),r.Vb("click",function(){return e.ElegirCasilla("1")}),r.Mb(13,"img",6),r.Nb(),r.Nb(),r.Ob(14,"td",3),r.Ob(15,"a",4),r.Vb("click",function(){return e.ElegirCasilla("2")}),r.Mb(16,"img",7),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"tr"),r.Ob(18,"td",3),r.Ob(19,"a",4),r.Vb("click",function(){return e.ElegirCasilla("3")}),r.Mb(20,"img",8),r.Nb(),r.Nb(),r.Ob(21,"td",3),r.Ob(22,"a",4),r.Vb("click",function(){return e.ElegirCasilla("4")}),r.Mb(23,"img",9),r.Nb(),r.Nb(),r.Ob(24,"td",3),r.Ob(25,"a",4),r.Vb("click",function(){return e.ElegirCasilla("5")}),r.Mb(26,"img",10),r.Nb(),r.Nb(),r.Nb(),r.Ob(27,"tr"),r.Ob(28,"td",3),r.Ob(29,"a",4),r.Vb("click",function(){return e.ElegirCasilla("6")}),r.Mb(30,"img",11),r.Nb(),r.Nb(),r.Ob(31,"td",3),r.Ob(32,"a",4),r.Vb("click",function(){return e.ElegirCasilla("7")}),r.Mb(33,"img",12),r.Nb(),r.Nb(),r.Ob(34,"td",3),r.Ob(35,"a",4),r.Vb("click",function(){return e.ElegirCasilla("8")}),r.Mb(36,"img",13),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(37,"button",14),r.Vb("click",function(){return e.Reiniciar()}),r.mc(38,"REINICIAR"),r.Nb(),r.Nb()),2&t&&(r.Ab(4),r.cc("rutaChat",e.ruta))},directives:[Uy],styles:[""]}),t})();var By=n("2Vo4"),Hy=n("itXk"),zy=n("sVev"),Gy=n("GyhO"),Qy=n("NXyV"),Wy=n("EY2u"),Ky=n("EQ5u"),$y=n("IzEk"),Yy=n("JIr8"),Jy=n("bOdf"),Xy=n("NJ9Y"),Zy=n("5+tZ"),tb=n("vkgz"),eb=n("BFxc"),nb=n("x+ZX"),rb=n("nYR2"),ib=n("bHdf");class ob{constructor(t,e){this.id=t,this.url=e}}class sb extends ob{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ab extends ob{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ub extends ob{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cb extends ob{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lb extends ob{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hb extends ob{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class db extends ob{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fb extends ob{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pb extends ob{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gb{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mb{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yb{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bb{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vb{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _b{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wb{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ob="primary";class Cb{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Sb(t){return new Cb(t)}function Eb(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Tb(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xb(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ib(t[i],e[i]))return!1;return!0}function Ib(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function jb(t){return Array.prototype.concat.apply([],t)}function Nb(t){return t.length>0?t[t.length-1]:null}function kb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ab(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Ot.a)(Promise.resolve(t)):Object(ln.a)(t)}function Pb(t,e,n){return n?function(t,e){return xb(t,e)}(t.queryParams,e.queryParams)&&Db(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ib(t[n],e[n]))}(t.queryParams,e.queryParams)&&Rb(t.root,e.root)}function Db(t,e){if(!Ub(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Db(t.children[n],e.children[n]))return!1}return!0}function Rb(t,e){return Mb(t,e,e.segments)}function Mb(t,e,n){if(t.segments.length>n.length)return!!Ub(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ub(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Rb(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ub(t.segments,r)&&!!t.children.primary&&Mb(t.children.primary,e,i)}}class Lb{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sb(this.queryParams)),this._queryParamMap}toString(){return Hb.serialize(this)}}class Fb{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zb(this)}}class Vb{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Sb(this.parameters)),this._parameterMap}toString(){return Jb(this)}}function Ub(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class qb{}class Bb{parse(t){const e=new nv(t);return new Lb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Gb(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Wb(e)}=${Wb(t)}`).join("&"):`${Wb(e)}=${Wb(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Hb=new Bb;function zb(t){return t.segments.map(t=>Jb(t)).join("/")}function Gb(t,e){if(!t.hasChildren())return zb(t);if(e){const e=t.children.primary?Gb(t.children.primary,!1):"",n=[];return kb(t.children,(t,e)=>{e!==Ob&&n.push(`${e}:${Gb(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return kb(t.children,(t,r)=>{r===Ob&&(n=n.concat(e(t,r)))}),kb(t.children,(t,r)=>{r!==Ob&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Ob?[Gb(t.children.primary,!1)]:[`${n}:${Gb(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${zb(t)}/${e[0]}`:`${zb(t)}/(${e.join("//")})`}}function Qb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wb(t){return Qb(t).replace(/%3B/gi,";")}function Kb(t){return Qb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $b(t){return decodeURIComponent(t)}function Yb(t){return $b(t.replace(/\+/g,"%20"))}function Jb(t){return`${Kb(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Kb(t)}=${Kb(e[t])}`).join("")}`;var e}const Xb=/^[^\/()?;=#]+/;function Zb(t){const e=t.match(Xb);return e?e[0]:""}const tv=/^[^=?&#]+/,ev=/^[^?&#]+/;class nv{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fb([],{}):new Fb([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Fb(t,e)),n}parseSegment(){const t=Zb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Vb($b(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Zb(this.remaining);t&&(n=t,this.capture(n))}t[$b(e)]=$b(n)}parseQueryParam(t){const e=function(t){const e=t.match(tv);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ev);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Yb(e),i=Yb(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Zb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ob);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Fb([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class rv{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=iv(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=iv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ov(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ov(t,this._root).map(t=>t.value)}}function iv(t,e){if(t===e.value)return e;for(const n of e.children){const e=iv(t,n);if(e)return e}return null}function ov(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ov(t,n);if(r.length)return r.unshift(e),r}return[]}class sv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function av(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class uv extends rv{constructor(t,e){super(t),this.snapshot=e,pv(this,t)}toString(){return this.snapshot.toString()}}function cv(t,e){const n=function(t,e){const n=new dv([],{},{},"",{},Ob,e,null,t.root,-1,{});return new fv("",new sv(n,[]))}(t,e),r=new By.a([new Vb("",{})]),i=new By.a({}),o=new By.a({}),s=new By.a({}),a=new By.a(""),u=new lv(r,i,s,a,o,Ob,e,n.root);return u.snapshot=n.root,new uv(new sv(u,[]),n)}class lv{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(St.a)(t=>Sb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(St.a)(t=>Sb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hv(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class dv{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fv extends rv{constructor(t,e){super(e),this.url=t,pv(this,e)}toString(){return gv(this._root)}}function pv(t,e){e.value._routerState=t,e.children.forEach(e=>pv(t,e))}function gv(t){const e=t.children.length>0?` { ${t.children.map(gv).join(", ")} } `:"";return`${t.value}${e}`}function mv(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xb(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),xb(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xb(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),xb(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yv(t,e){return xb(t.params,e.params)&&function(t,e){return Ub(t,e)&&t.every((t,n)=>xb(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||yv(t.parent,e.parent))}function bv(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return bv(t,e,r);return bv(t,e)})}(t,e,n);return new sv(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return vv(e,t),t}{const n=new lv(new By.a((r=e.value).url),new By.a(r.params),new By.a(r.queryParams),new By.a(r.fragment),new By.a(r.data),r.outlet,r.component,r),i=e.children.map(e=>bv(t,e));return new sv(n,i)}}var r}function vv(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)vv(t.children[n],e.children[n])}function _v(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function wv(t){return"object"==typeof t&&null!=t&&t.outlets}function Ov(t,e,n,r,i){let o={};return r&&kb(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Lb(n.root===t?e:Cv(n.root,t,e),o,i)}function Cv(t,e,n){const r={};return kb(t.children,(t,i)=>{r[i]=t===e?n:Cv(t,e,n)}),new Fb(t.segments,r)}class Sv{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&_v(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(wv);if(r&&r!==Nb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ev{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Tv(t,e,n){if(t||(t=new Fb([],{})),0===t.segments.length&&t.hasChildren())return xv(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(wv(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!kv(a,u,e))return o;r+=2}else{if(!kv(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Fb(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Fb(t.segments.slice(r.pathIndex),t.children),xv(e,0,i)}return r.match&&0===i.length?new Fb(t.segments,{}):r.match&&!t.hasChildren()?Iv(t,e,n):r.match?xv(t,0,i):Iv(t,e,n)}function xv(t,e,n){if(0===n.length)return new Fb(t.segments,{});{const r=function(t){return wv(t[0])?t[0].outlets:{[Ob]:t}}(n),i={};return kb(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Tv(t.children[r],e,n))}),kb(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Fb(t.segments,i)}}function Iv(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(wv(o)){const t=jv(o.outlets);return new Fb(r,t)}if(0===i&&_v(n[0])){r.push(new Vb(t.segments[e].path,Nv(n[0]))),i++;continue}const s=wv(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_v(a)?(r.push(new Vb(s,Nv(a))),i+=2):(r.push(new Vb(s,{})),i++)}return new Fb(r,{})}function jv(t){const e={};return kb(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Iv(new Fb([],{}),0,t))}),e}function Nv(t){const e={};return kb(t,(t,n)=>e[n]=`${t}`),e}function kv(t,e,n){return t==n.path&&xb(e,n.parameters)}class Av{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),mv(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=av(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kb(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=av(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=av(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new _b(t.value.snapshot))}),t.children.length&&this.forwardEvent(new bb(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(mv(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Pv(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Pv(t){mv(t.value),t.children.forEach(Pv)}class Dv{constructor(t,e){this.routes=t,this.module=e}}function Rv(t){return"function"==typeof t}function Mv(t){return t instanceof Lb}const Lv=Symbol("INITIAL_VALUE");function Fv(){return Object(fn.a)(t=>Object(Hy.b)(t.map(t=>t.pipe(Object($y.a)(1),Object(Yn.a)(Lv)))).pipe(Object(pn.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Lv)return t;if(r===Lv&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Mv(r))return r}return t},t)},Lv),Object(En.a)(t=>t!==Lv),Object(St.a)(t=>Mv(t)?t:!0===t),Object($y.a)(1)))}let Vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Mb(0,"router-outlet")},directives:function(){return[P_]},encapsulation:2}),t})();function Uv(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];qv(r,Bv(e,r))}}function qv(t,e){t.children&&Uv(t.children,e)}function Bv(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Hv(t){const e=t.children&&t.children.map(Hv),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ob&&(n.component=Vv),n}function zv(t){return t.outlet||Ob}function Gv(t,e){const n=t.filter(t=>zv(t)===e);return n.push(...t.filter(t=>zv(t)!==e)),n}const Qv={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Wv(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Qv):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Tb)(n,t,e);if(!i)return Object.assign({},Qv);const o={};kb(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Kv(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>$v(t,e,n)&&zv(n)!==Ob)}(t,n,r)){const i=new Fb(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&zv(o)!==Ob){const n=new Fb([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[zv(o)]=n}return i}(t,e,r,new Fb(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>$v(t,e,n))}(t,n,r)){const o=new Fb(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if($v(t,n,a)&&!i[zv(a)]){const n=new Fb([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[zv(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Fb(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function $v(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Yv(t,e,n,r){return!!(zv(t)===r||r!==Ob&&$v(e,n,t))&&("**"===t.path||Wv(e,t,n).matched)}function Jv(t,e,n){return 0===e.length&&!t.children[n]}class Xv{constructor(t){this.segmentGroup=t||null}}class Zv{constructor(t){this.urlTree=t}}function t_(t){return new an.a(e=>e.error(new Xv(t)))}function e_(t){return new an.a(e=>e.error(new Zv(t)))}function n_(t){return new an.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class r_{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Kv(this.urlTree.root,[],[],this.config).segmentGroup,e=new Fb(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ob).pipe(Object(St.a)(t=>this.createUrlTree(i_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(Yy.a)(t=>{if(t instanceof Zv)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Xv)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ob).pipe(Object(St.a)(e=>this.createUrlTree(i_(e),t.queryParams,t.fragment))).pipe(Object(Yy.a)(t=>{if(t instanceof Xv)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Fb([],{[Ob]:t}):t;return new Lb(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(St.a)(t=>new Fb([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Ot.a)(r).pipe(Object(Jy.a)(r=>{const i=n.children[r],o=Gv(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(St.a)(t=>({segment:t,outlet:r})))}),Object(pn.a)((t,e)=>(t[e.outlet]=e.segment,t),{}),Object(Xy.a)())}expandSegment(t,e,n,r,i,o){return Object(Ot.a)(n).pipe(Object(Jy.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Object(Yy.a)(t=>{if(t instanceof Xv)return Object(ln.a)(null);throw t}))),Object(On.a)(t=>!!t),Object(Yy.a)((t,n)=>{if(t instanceof zy.a||"EmptyError"===t.name){if(Jv(e,r,i))return Object(ln.a)(new Fb([],{}));throw new Xv(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Yv(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):t_(e):t_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?e_(i):this.lineralizeSegments(n,i).pipe(Object(Zy.b)(n=>{const i=new Fb(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Wv(e,r,i);if(!s)return t_(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?e_(l):this.lineralizeSegments(r,l).pipe(Object(Zy.b)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ln.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(St.a)(t=>(n._loadedConfig=t,new Fb(r,{})))):Object(ln.a)(new Fb(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Wv(e,n,r);if(!o)return t_(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Zy.b)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Kv(e,s,u,o),l=new Fb(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(St.a)(t=>new Fb(s,t)));if(0===o.length&&0===c.length)return Object(ln.a)(new Fb(s,{}));const h=zv(n)===i;return this.expandSegment(r,l,o,c,h?Ob:i,!0).pipe(Object(St.a)(t=>new Fb(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ln.a)(new Dv(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ln.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Zy.b)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(St.a)(t=>(e._loadedConfig=t,t))):function(t){return new an.a(e=>e.error(Eb(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ln.a)(new Dv([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ln.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Rv(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Rv(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ab(o)});return Object(ln.a)(i).pipe(Fv(),Object(tb.a)(t=>{if(!Mv(t))return;const e=Eb(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(St.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ln.a)(n);if(r.numberOfChildren>1||!r.children.primary)return n_(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Lb(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kb(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return kb(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Fb(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function i_(t){const e={};for(const n of Object.keys(t.children)){const r=i_(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Fb(t.segments.concat(e.segments),e.children)}return t}(new Fb(t.segments,e))}class o_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class s_{constructor(t,e){this.component=t,this.route=e}}function a_(t,e,n){const r=t._root;return c_(r,e?e._root:null,n,[r.value])}function u_(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function c_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=av(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ub(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ub(t.url,e.url)||!xb(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yv(t,e)||!xb(t.queryParams,e.queryParams);case"paramsChange":default:return!yv(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new o_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),c_(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new s_(a.outlet.component,s))}else s&&l_(e,a,i),i.canActivateChecks.push(new o_(r)),c_(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),kb(o,(t,e)=>l_(t,n.getContext(e),i)),i}function l_(t,e,n){const r=av(t),i=t.value;kb(r,(t,r)=>{l_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new s_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class h_{}function d_(t){return new an.a(e=>e.error(t))}class f_{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Kv(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ob);if(null===e)return null;const n=new dv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ob,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new sv(n,e),i=new fv(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=hv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Gv(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!p_(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Ob?-1:e.value.outlet===Ob?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Jv(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Yv(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Nb(n).parameters:{};i=new dv(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(t),zv(t),t.component,t,g_(e),m_(e)+n.length,b_(t))}else{const r=Wv(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new dv(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(t),zv(t),t.component,t,g_(e),m_(e)+o.length,b_(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Kv(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new sv(i,t)]}if(0===a.length&&0===c.length)return[new sv(i,[])];const l=zv(t)===r,h=this.processSegment(a,u,c,l?Ob:r);return null===h?null:[new sv(i,h)]}}function p_(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function g_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function y_(t){return t.data||{}}function b_(t){return t.resolve||{}}function v_(t){return Object(fn.a)(e=>{const n=t(e);return n?Object(Ot.a)(n).pipe(Object(St.a)(()=>e)):Object(ln.a)(e)})}class __ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const w_=new r.r("ROUTES");class O_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(St.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Dv(jb(i.injector.get(w_,void 0,r.q.Self|r.q.Optional)).map(Hv),i)}),Object(Yy.a)(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ky.a(n,()=>new vn.a).pipe(Object(nb.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Ot.a)(this.loader.load(t)):Ab(t()).pipe(Object(Zy.b)(t=>t instanceof r.w?Object(ln.a)(t):Object(Ot.a)(this.compiler.compileModuleAsync(t))))}}class C_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new S_,this.attachRef=null}}class S_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new C_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class E_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function T_(t){throw t}function x_(t,e,n){return e.parse("/")}function I_(t,e){return Object(ln.a)(null)}let j_=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new vn.a,this.errorHandler=T_,this.malformedUriErrorHandler=x_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:I_,afterPreactivation:I_},this.urlHandlingStrategy=new E_,this.routeReuseStrategy=new __,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Lb(new Fb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new O_(s,a,t=>this.triggerEvent(new gb(t)),t=>this.triggerEvent(new mb(t))),this.routerState=cv(this.currentUrlTree,this.rootComponentType),this.transitions=new By.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(En.a)(t=>0!==t.id),Object(St.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(fn.a)(t=>{let n=!1,r=!1;return Object(ln.a)(t).pipe(Object(tb.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(fn.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ln.a)(t).pipe(Object(fn.a)(t=>{const n=this.transitions.getValue();return e.next(new sb(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Wy.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Object(fn.a)(t=>function(t,e,n,r,i){return new r_(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(St.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(tb.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Zy.b)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new f_(t,e,n,r,i,o).recognize();return null===s?d_(new h_):Object(ln.a)(s)}catch(my){return d_(my)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(St.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(tb.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new lb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new sb(n,this.serializeUrl(r),i,o);e.next(a);const u=cv(r,this.rootComponentType).snapshot;return Object(ln.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Wy.a}),v_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(tb.a)(t=>{const e=new hb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(St.a)(t=>Object.assign(Object.assign({},t),{guards:a_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Zy.b)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ln.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Ot.a)(t).pipe(Object(Zy.b)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ln.a)(!0);const s=o.map(o=>{const s=u_(o,e,i);let a;if(function(t){return t&&Rv(t.canDeactivate)}(s))a=Ab(s.canDeactivate(t,e,n,r));else{if(!Rv(s))throw new Error("Invalid CanDeactivate guard");a=Ab(s(t,e,n,r))}return a.pipe(Object(On.a)())});return Object(ln.a)(s).pipe(Fv())}(t.component,t.route,n,e,r)),Object(On.a)(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Zy.b)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Ot.a)(e).pipe(Object(Jy.a)(e=>Object(Gy.a)(function(t,e){return null!==t&&e&&e(new yb(t)),Object(ln.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new vb(t)),Object(ln.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Object(Qy.a)(()=>{const i=e.guards.map(i=>{const o=u_(i,e.node,n);let s;if(function(t){return t&&Rv(t.canActivateChild)}(o))s=Ab(o.canActivateChild(r,t));else{if(!Rv(o))throw new Error("Invalid CanActivateChild guard");s=Ab(o(r,t))}return s.pipe(Object(On.a)())});return Object(ln.a)(i).pipe(Fv())}));return Object(ln.a)(i).pipe(Fv())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ln.a)(!0);const i=r.map(r=>Object(Qy.a)(()=>{const i=u_(r,e,n);let o;if(function(t){return t&&Rv(t.canActivate)}(i))o=Ab(i.canActivate(e,t));else{if(!Rv(i))throw new Error("Invalid CanActivate guard");o=Ab(i(e,t))}return o.pipe(Object(On.a)())}));return Object(ln.a)(i).pipe(Fv())}(t,e.route,n))),Object(On.a)(t=>!0!==t,!0))}(r,o,t,e):Object(ln.a)(n)),Object(St.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(tb.a)(t=>{if(Mv(t.guardsResult)){const e=Eb(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new db(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(En.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new ub(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),v_(t=>{if(t.guards.canActivateChecks.length)return Object(ln.a)(t).pipe(Object(tb.a)(t=>{const e=new fb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(fn.a)(t=>{let n=!1;return Object(ln.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Zy.b)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ln.a)(t);let o=0;return Object(Ot.a)(n).pipe(Object(Jy.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ln.a)({});const o={};return Object(Ot.a)(i).pipe(Object(Zy.b)(i=>function(t,e,n,r){const i=u_(t,e,r);return Ab(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(tb.a)(t=>{o[i]=t}))),Object(eb.a)(1),Object(Zy.b)(()=>Object.keys(o).length===i.length?Object(ln.a)(o):Wy.a))}(t._resolve,t,e,r).pipe(Object(St.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),hv(t,n).resolve),null)))}(t.route,e,r,i)),Object(tb.a)(()=>o++),Object(eb.a)(1),Object(Zy.b)(e=>o===n.length?Object(ln.a)(t):Wy.a))})),Object(tb.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new ub(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(tb.a)(t=>{const e=new pb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),v_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(St.a)(t=>{const e=function(t,e,n){const r=bv(t,e._root,n?n._root:void 0);return new uv(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(tb.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(St.a)(t=>(new Av(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(tb.a)({next(){n=!0},complete(){n=!0}}),Object(rb.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new ub(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object(Yy.a)(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Mv(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ub(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new cb(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Fu){t.reject(Fu)}}var i;return Wy.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Uv(t),this.config=t.map(Hv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ov(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Sv(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kb(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Sv(n,e,r)}(n);if(o.toRoot())return Ov(e.root,new Fb([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ev(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ev(t,t===e.root,0)}const r=_v(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ev(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?xv(s.segmentGroup,s.index,o.commands):Tv(s.segmentGroup,s.index,o.commands);return Ov(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Mv(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(my){e=this.malformedUriErrorHandler(my,this.urlSerializer,t)}return e}isActive(t,e){if(Mv(t))return Pb(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Pb(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ab(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.N),r.Sb(qb),r.Sb(S_),r.Sb(w),r.Sb(r.s),r.Sb(r.x),r.Sb(r.i),r.Sb(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),N_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new vn.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:A_(this.skipLocationChange),replaceUrl:A_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:A_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(j_),r.Lb(lv),r.Tb("tabindex"),r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Vb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),k_=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new vn.a,this.subscription=t.events.subscribe(t=>{t instanceof ab&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:A_(this.skipLocationChange),replaceUrl:A_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:A_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(j_),r.Lb(lv),r.Lb(m))},t.\u0275dir=r.Gb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Vb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Rb("href",e.href,r.ic),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function A_(t){return""===t||!!t}let P_=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Ob,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new D_(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(S_),r.Lb(r.Q),r.Lb(r.j),r.Tb("name"),r.Lb(r.h))},t.\u0275dir=r.Gb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class D_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===lv?this.route:t===S_?this.childContexts:this.parent.get(t,e)}}class R_{}class M_{preload(t,e){return Object(ln.a)(null)}}let L_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new O_(e,n,e=>t.triggerEvent(new gb(e)),e=>t.triggerEvent(new mb(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(En.a)(t=>t instanceof ab),Object(Jy.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Ot.a)(n).pipe(Object(ib.a)(),Object(St.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ln.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Zy.b)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(j_),r.Sb(r.x),r.Sb(r.i),r.Sb(r.s),r.Sb(R_))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),F_=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ab&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new wb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(j_),r.Sb(H),r.Sb(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const V_=new r.r("ROUTER_CONFIGURATION"),U_=new r.r("ROUTER_FORROOT_GUARD"),q_=[w,{provide:qb,useClass:Bb},{provide:j_,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new j_(null,t,e,n,r,i,s,jb(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[qb,S_,w,r.s,r.x,r.i,w_,V_,[class{},new r.B],[class{},new r.B]]},S_,{provide:lv,useFactory:function(t){return t.routerState.root},deps:[j_]},{provide:r.x,useClass:r.K},L_,M_,class{preload(t,e){return e().pipe(Object(Yy.a)(()=>Object(ln.a)(null)))}},{provide:V_,useValue:{enableTracing:!1}}];function B_(){return new r.z("Router",j_)}let H_=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[q_,W_(e),{provide:U_,useFactory:Q_,deps:[[j_,new r.B,new r.J]]},{provide:V_,useValue:n||{}},{provide:m,useFactory:G_,deps:[a,[new r.p(b),new r.B],V_]},{provide:F_,useFactory:z_,deps:[j_,H,V_]},{provide:R_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:M_},{provide:r.z,multi:!0,useFactory:B_},[K_,{provide:r.d,multi:!0,useFactory:$_,deps:[K_]},{provide:J_,useFactory:Y_,deps:[K_]},{provide:r.b,multi:!0,useExisting:J_}]]}}static forChild(e){return{ngModule:t,providers:[W_(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(U_,8),r.Sb(j_,8))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})();function z_(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new F_(t,e,n)}function G_(t,e,n={}){return n.useHash?new _(t,e):new v(t,e)}function Q_(t){return"guarded"}function W_(t){return[{provide:r.a,multi:!0,useValue:t},{provide:w_,multi:!0,useValue:t}]}let K_=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new vn.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(j_),r=this.injector.get(V_);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ln.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(V_),n=this.injector.get(L_),i=this.injector.get(F_),o=this.injector.get(j_),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function $_(t){return t.appInitializer.bind(t)}function Y_(t){return t.bootstrapListener.bind(t)}const J_=new r.r("Router Initializer");class X_{constructor(){this.nombreUsuario="",this.edad=0,this.correo="",this.contrasenia="",this.juegos=[],this.partidasGanadas=0,this.partidasJugadas=0,this.mejorTiempo=""}}let Z_=(()=>{class t{constructor(t){this.fireAuth=t,this.estaLogiado=!1,this.usuarioVigente="",t.authState.subscribe(t=>this.estaLogiado=t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(An))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tw=function(){return{standalone:!0}};let ew=(()=>{class t{constructor(t,e,n){this.servicioUsuario=t,this.router=e,this.servicioAutentificacion=n,this.unUsuario=new X_}ngOnInit(){}Login(){var t,e,n,r;this.unUsuario.correo=null!==(e=null===(t=$("#textCorreo").val())||void 0===t?void 0:t.toString())&&void 0!==e?e:"",this.unUsuario.contrasenia=null!==(r=null===(n=$("#textContrase\xf1a").val())||void 0===n?void 0:n.toString())&&void 0!==r?r:"",this.servicioUsuario.BuscarUnoLogin(this.unUsuario).valueChanges().subscribe(t=>{1==t.length?(localStorage.setItem("usuarioLogin",this.unUsuario.correo),location.href="/home/juegos"):window.alert("Error usuario o contrase\xf1a invalido")})}InicioRapido(){$("#textCorreo").val("pepe@gmail.com"),$("#textContrase\xf1a").val("123456")}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(My),r.Lb(j_),r.Lb(Z_))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-login"]],decls:29,vars:6,consts:[[1,"container"],[2,"font-size","30px"],["action","",1,"form-control","h-100","pb-3","bg-primary"],["for","textCorreo",1,"text-white"],[1,"form-row"],[1,"col","input-group","mb-2"],["for","textCorreo",1,"mt-1","fas","fa-envelope","input-group-text"],["type","text","id","textCorreo","placeholder","Ingrese su correo",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],["for","textContrase\xf1a",1,"text-white"],["for","textContrase\xf1a",1,"mt-1","fas","fa-key","input-group-text"],["type","password","id","textContrase\xf1a","placeholder","Ingrese su correo",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-success","btn-block",3,"click"],[1,"btn","btn-warning","btn-block",3,"click"],["routerLink","/registro"]],template:function(t,e){1&t&&(r.Mb(0,"br"),r.Ob(1,"section",0),r.Ob(2,"h6",1),r.mc(3,"Login"),r.Nb(),r.Ob(4,"form",2),r.Ob(5,"label",3),r.mc(6,"Correo:"),r.Nb(),r.Ob(7,"div",4),r.Ob(8,"div",5),r.Mb(9,"label",6),r.Ob(10,"input",7),r.Vb("ngModelChange",function(t){return e.unUsuario.correo=t}),r.Nb(),r.Nb(),r.Nb(),r.Ob(11,"label",8),r.mc(12,"Contrase\xf1a:"),r.Nb(),r.Ob(13,"div",4),r.Ob(14,"div",5),r.Mb(15,"label",9),r.Ob(16,"input",10),r.Vb("ngModelChange",function(t){return e.unUsuario.contrasenia=t}),r.Nb(),r.Nb(),r.Nb(),r.Mb(17,"br"),r.Ob(18,"button",11),r.Vb("click",function(){return e.Login()}),r.mc(19,"Ingresar"),r.Nb(),r.Ob(20,"button",12),r.Vb("click",function(){return e.InicioRapido()}),r.mc(21,"Inicio Rapido"),r.Nb(),r.Nb(),r.Mb(22,"br"),r.Ob(23,"p"),r.mc(24,"No esta registrado?"),r.Nb(),r.Ob(25,"p"),r.mc(26,"Puede registrarse tocando "),r.Ob(27,"a",13),r.mc(28,"aqui"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.Ab(10),r.cc("ngModel",e.unUsuario.correo)("ngModelOptions",r.dc(4,tw)),r.Ab(6),r.cc("ngModel",e.unUsuario.contrasenia)("ngModelOptions",r.dc(5,tw)))},directives:[Le,oe,Pe,kt,ie,Me,k_],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),t})();const nw=function(){return{standalone:!0}};let rw=(()=>{class t{constructor(t,e){this.servicioUsuario=t,this.router=e,this.nuevoUsuario=new X_}Registro(){""!=this.nuevoUsuario.contrasenia&&""!=this.nuevoUsuario.correo?this.servicioUsuario.BuscarUsuarioCorreo(this.nuevoUsuario).valueChanges().subscribe(t=>{0==t.length?this.servicioUsuario.BuscarPorNombreUsuario(this.nuevoUsuario).valueChanges().subscribe(t=>{0==t.length?this.servicioUsuario.AgregarUno(this.nuevoUsuario).then(()=>{localStorage.setItem("usuarioLogin",this.nuevoUsuario.correo),location.href="home/juegos"}):alert("ya exite")}):alert("ya exite")}):alert("faltan correo o contrase\xf1a")}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(My),r.Lb(j_))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-registro"]],decls:39,vars:12,consts:[[1,"container"],[2,"font-size","30px"],["action","",1,"form-control","h-100","pb-3","bg-primary"],["for","textUsuario",1,"text-white"],[1,"form-row"],[1,"col","input-group","mb-2"],["for","textUsuario",1,"mt-1","fas","fa-user","input-group-text"],["type","text","id","textUsuario","placeholder","Ingrese su nombre de usuario",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],["for","textEdad",1,"text-white"],["for","textEdad",1,"mt-1","pt-2","fas","fa-lg","fa-walking","input-group-text"],["type","number","id","textEdad","placeholder","Ingrese su edad",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],["for","textCorreo",1,"text-white"],["for","textCorreo",1,"mt-1","fas","fa-envelope","input-group-text"],["type","text","id","textCorreo","placeholder","Ingrese su correo",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],["for","textContrase\xf1a",1,"text-white"],["for","textContrase\xf1a",1,"mt-1","fas","fa-key","input-group-text"],["type","password","id","textContrase\xf1a","placeholder","Ingrese su contrase\xf1a",1,"form-control","form-text",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-success","btn-block",3,"click"],["routerLink","/login"]],template:function(t,e){1&t&&(r.Ob(0,"section",0),r.Mb(1,"br"),r.Ob(2,"h6",1),r.mc(3,"Crear Cuenta"),r.Nb(),r.Ob(4,"form",2),r.Ob(5,"label",3),r.mc(6,"Nombre Usuario:"),r.Nb(),r.Ob(7,"div",4),r.Ob(8,"div",5),r.Mb(9,"label",6),r.Ob(10,"input",7),r.Vb("ngModelChange",function(t){return e.nuevoUsuario.nombreUsuario=t}),r.Nb(),r.Nb(),r.Nb(),r.Ob(11,"label",8),r.mc(12,"Edad:"),r.Nb(),r.Ob(13,"div",4),r.Ob(14,"div",5),r.Mb(15,"label",9),r.Ob(16,"input",10),r.Vb("ngModelChange",function(t){return e.nuevoUsuario.edad=t}),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"label",11),r.mc(18,"Correo:"),r.Nb(),r.Ob(19,"div",4),r.Ob(20,"div",5),r.Mb(21,"label",12),r.Ob(22,"input",13),r.Vb("ngModelChange",function(t){return e.nuevoUsuario.correo=t}),r.Nb(),r.Nb(),r.Nb(),r.Ob(23,"label",14),r.mc(24,"Contrase\xf1a:"),r.Nb(),r.Ob(25,"div",4),r.Ob(26,"div",5),r.Mb(27,"label",15),r.Ob(28,"input",16),r.Vb("ngModelChange",function(t){return e.nuevoUsuario.contrasenia=t}),r.Nb(),r.Nb(),r.Nb(),r.Mb(29,"br"),r.Ob(30,"button",17),r.Vb("click",function(){return e.Registro()}),r.mc(31,"Registrarse!!!"),r.Nb(),r.Nb(),r.Mb(32,"br"),r.Ob(33,"p"),r.mc(34,"Ya tiene una cuenta?"),r.Nb(),r.Ob(35,"p"),r.mc(36,"Puede ingresar tocando "),r.Ob(37,"a",18),r.mc(38,"aqui"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.Ab(10),r.cc("ngModel",e.nuevoUsuario.nombreUsuario)("ngModelOptions",r.dc(8,nw)),r.Ab(6),r.cc("ngModel",e.nuevoUsuario.edad)("ngModelOptions",r.dc(9,nw)),r.Ab(6),r.cc("ngModel",e.nuevoUsuario.correo)("ngModelOptions",r.dc(10,nw)),r.Ab(6),r.cc("ngModel",e.nuevoUsuario.contrasenia)("ngModelOptions",r.dc(11,nw)))},directives:[Le,oe,Pe,kt,ie,Me,Ve,k_],styles:[""]}),t})(),iw=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Ob(0,"p"),r.mc(1,"page-not-found works!"),r.Nb())},styles:[""]}),t})(),ow=(()=>{class t{constructor(){this.ruta="/home/chat",this.mostrarChat=!1}ngOnInit(){}AbrirChat(){this.mostrarChat=!this.mostrarChat}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-home"]],decls:17,vars:0,consts:[[1,"footer","bg-dark","fixed-bottom"],[1,"container"],[1,"row","pt-3"],[1,"col-2","text-left"],["data-toggle","modal","data-target","#modalScore",1,"btn","btn-primary"],[1,"fas","fa-user"],[1,"col-8","text-center"],["routerLink","/home/juegos"],[1,"btn","btn-primary"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-controller"],["d","M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"],["d","M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"],[1,"col-2","text-right"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chat-fill"],["d","M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9.06 9.06 0 0 0 8 15z"]],template:function(t,e){1&t&&(r.Mb(0,"router-outlet"),r.Ob(1,"footer",0),r.Ob(2,"div",1),r.Ob(3,"section",2),r.Ob(4,"div",3),r.Ob(5,"button",4),r.Mb(6,"span",5),r.Nb(),r.Nb(),r.Ob(7,"div",6),r.Ob(8,"a",7),r.Ob(9,"button",8),r.Yb(),r.Ob(10,"svg",9),r.Mb(11,"path",10),r.Mb(12,"path",11),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Xb(),r.Ob(13,"div",12),r.Ob(14,"button",13),r.Vb("click",function(){return e.AbrirChat()}),r.Yb(),r.Ob(15,"svg",14),r.Mb(16,"path",15),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb())},directives:[P_,k_],styles:[".footer[_ngcontent-%COMP%]{width:100%;height:70px}"]}),t})();class sw{constructor(){this.name="",this.score=""}}var aw=function(t){return t[t.piedra=0]="piedra",t[t.papel=1]="papel",t[t.tijera=2]="tijera",t}({});class uw{constructor(){this.seleccion=aw.piedra,this.victorias=0}}let cw=(()=>{class t{constructor(t){this.bd=t,this.rutaDeLaColeccion="/Score",this.referenciaAlaColeccion=this.bd.list(this.rutaDeLaColeccion)}CambiarRuta(t){this.referenciaAlaColeccion=this.bd.list(t)}AgregarUno(t){return this.referenciaAlaColeccion.push(t)}ObtenerTodos(){return this.referenciaAlaColeccion}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Kn))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lw(t,e){if(1&t&&(r.Ob(0,"tr"),r.Ob(1,"td"),r.mc(2),r.Nb(),r.Ob(3,"td"),r.mc(4),r.Nb(),r.Nb()),2&t){const t=e.$implicit;r.Ab(2),r.nc(t.name),r.Ab(2),r.nc(t.score)}}function hw(t,e){if(1&t&&(r.Ob(0,"div"),r.Ob(1,"div",3),r.Ob(2,"div",4),r.Ob(3,"table",5),r.Ob(4,"thead"),r.Ob(5,"tr",6),r.Ob(6,"td",7),r.Ob(7,"h2"),r.mc(8,"Scores"),r.Nb(),r.Nb(),r.Nb(),r.Ob(9,"tr"),r.Ob(10,"th",8),r.mc(11,"Nombre"),r.Nb(),r.Ob(12,"th",8),r.mc(13,"Score"),r.Nb(),r.Nb(),r.Nb(),r.Ob(14,"tbody"),r.kc(15,lw,5,2,"tr",9),r.ac(16,"async"),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"div",10),r.Ob(18,"button",11),r.mc(19,"Cerrar"),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.Zb();r.Ab(15),r.cc("ngForOf",r.bc(16,1,t.item$))}}let dw=(()=>{class t{constructor(t){this.servicioScore=t,this.rutaScore="",this.item$=new an.a}ngOnInit(){this.item$=this.servicioScore.ObtenerTodos().valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(cw))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-score"]],inputs:{rutaScore:"rutaScore"},decls:3,vars:1,consts:[["id","modalScore","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-backdrop","static","data-keyboard","false",1,"modal","fade"],["role","document",1,"modal-dialog"],[4,"ngIf"],[1,"modal-content"],[1,"modal-body"],[1,"table","table-striped","table-bordered","dt-responsive","nowrap"],["height","100"],["colspan","5","align","center"],["scope","col","align","center"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.kc(2,hw,20,3,"div",2),r.Nb(),r.Nb()),2&t&&(r.Ab(2),r.cc("ngIf",!0))},directives:[P,k],pipes:[U],styles:[""]}),t})();const fw="../../../assets/imagenes/piedra-papel-tijera";let pw=(()=>{class t{constructor(){this.rutaScore="score/piedraPapelTijera",this.ruta="",this.jugador1=new uw,this.jugador2=new uw}ngOnInit(){this.ruta="holaMUNDO/piedra-papel-tijera"}Piedra(){$("#imagenQueCambia").attr("src",fw+"/piedra.png"),this.jugador1.seleccion=aw.piedra}Papel(){$("#imagenQueCambia").attr("src",fw+"/papel.png"),this.jugador1.seleccion=aw.papel}Tijera(){$("#imagenQueCambia").attr("src",fw+"/tijera.png"),this.jugador1.seleccion=aw.tijera}GenerarRespuestaMaquina(){this.jugador2.seleccion=Math.floor(3*Math.random())+0}Jugar(){if(this.GenerarRespuestaMaquina(),this.jugador1.seleccion==aw.piedra)switch(this.jugador2.seleccion){case aw.piedra:$("#imagenQueCambia").attr("src",fw+"/piedra-piedra.jpg"),this.Empate();break;case aw.papel:$("#imagenQueCambia").attr("src",fw+"/piedra-papel.jpg"),this.GanoJugador2();break;case aw.tijera:$("#imagenQueCambia").attr("src",fw+"/piedra-tijera.jpg"),this.GanoJugador1()}else if(this.jugador1.seleccion==aw.papel)switch(this.jugador2.seleccion){case aw.piedra:$("#imagenQueCambia").attr("src",fw+"/papel-piedra.jpg"),this.GanoJugador1();break;case aw.papel:$("#imagenQueCambia").attr("src",fw+"/papel-papel.jpg"),this.Empate();break;case aw.tijera:$("#imagenQueCambia").attr("src",fw+"/papel-tijera.jpg"),this.GanoJugador2()}else if(this.jugador1.seleccion==aw.tijera)switch(this.jugador2.seleccion){case aw.piedra:$("#imagenQueCambia").attr("src",fw+"/tijera-piedra.jpg"),this.GanoJugador2();break;case aw.papel:$("#imagenQueCambia").attr("src",fw+"/tijera-papel.jpg"),this.GanoJugador1();break;case aw.tijera:$("#imagenQueCambia").attr("src",fw+"/tijera-tijera.jpeg"),this.Empate()}}GanoJugador1(){this.jugador1.victorias++,$("#resultado").html("Ganaste!!! <br>Jugador1= "+aw[this.jugador1.seleccion]+"<br>Jugador2= "+aw[this.jugador2.seleccion])}GanoJugador2(){this.jugador2.victorias++,$("#resultado").html("Perdiste!!! <br>Jugador1= "+aw[this.jugador1.seleccion]+"<br>Jugador2= "+aw[this.jugador2.seleccion])}Empate(){$("#resultado").html("Empate!!!  <br>Jugador1= "+aw[this.jugador1.seleccion]+"<br>Jugador2= "+aw[this.jugador2.seleccion])}GuardarScore(){var t;let e=new sw;e.name=null!==(t=localStorage.getItem("usuarioLogin"))&&void 0!==t?t:"Desconocido",e.score="jugador 1:"+this.jugador1+"  jugador 2:"+this.jugador2.victorias}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-piedra-papel-tijera"]],decls:30,vars:4,consts:[[3,"rutaChat"],[3,"rutaScore"],[1,"container"],[1,"row"],[1,"col-1"],[1,"mt-4",2,"font-size","50px","position","relative =50"],[1,"col"],["align","center",1,"mt-5"],["id","",1,"bg-secondary","form-control","h-100","w-100"],["src","../../../assets/imagenes/piedra-papel-tijera/inicial.png","id","imagenQueCambia","width","80%","height","423px"],[1,"btn","animarImagen",2,"border-radius","50%",3,"click"],["src","../../../assets/imagenes/piedra-papel-tijera/piedra.png","width","60%"],[1,"btn","animarImagen",3,"click"],["src","../../../assets/imagenes/piedra-papel-tijera/papel.png","width","60%"],["src","../../../assets/imagenes/piedra-papel-tijera/tijera.png","width","60%"],[1,"btn","btn-success","btn-block","mt-4",3,"click"],[1,"mt-4",2,"font-size","50px"],["id","resultado",1,"bg-secondary","mt-3","form-control","h-100","text-white","animarResultado"]],template:function(t,e){1&t&&(r.Mb(0,"app-chat",0),r.Ob(1,"section"),r.Mb(2,"app-score",1),r.Nb(),r.Ob(3,"section",2),r.Ob(4,"section",3),r.Ob(5,"section",4),r.Ob(6,"p",5),r.mc(7),r.Nb(),r.Nb(),r.Ob(8,"section",6),r.Ob(9,"div",7),r.Ob(10,"section",8),r.Mb(11,"img",9),r.Nb(),r.Ob(12,"div",3),r.Ob(13,"div",6),r.Ob(14,"span",10),r.Vb("click",function(){return e.Piedra()}),r.Mb(15,"img",11),r.Nb(),r.Nb(),r.Ob(16,"div",6),r.Ob(17,"span",12),r.Vb("click",function(){return e.Papel()}),r.Mb(18,"img",13),r.Nb(),r.Nb(),r.Ob(19,"div",6),r.Ob(20,"span",12),r.Vb("click",function(){return e.Tijera()}),r.Mb(21,"img",14),r.Nb(),r.Nb(),r.Nb(),r.Ob(22,"button",15),r.Vb("click",function(){return e.Jugar()}),r.mc(23,"Jugar"),r.Nb(),r.Nb(),r.Nb(),r.Ob(24,"section",4),r.Ob(25,"p",16),r.mc(26),r.Nb(),r.Nb(),r.Nb(),r.Ob(27,"section",17),r.Ob(28,"p"),r.mc(29,"Presiona jugar para empezar"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.cc("rutaChat",e.ruta),r.Ab(2),r.cc("rutaScore",e.rutaScore),r.Ab(5),r.nc(e.jugador1.victorias),r.Ab(19),r.nc(e.jugador2.victorias))},directives:[Uy,dw],styles:[".animarImagen[_ngcontent-%COMP%]:hover{display:inline-block;margin:0 .5rem;animation:shakeX;animation-duration:1.5s}.animarResultado[_ngcontent-%COMP%]{display:inline-block;margin:0 .5rem;animation-timing-function:ease;animation:fadeInDown;animation-duration:1.5s}"]}),t})(),gw=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-juegos"]],decls:18,vars:0,consts:[[1,"container",2,"overflow-y","scroll","height","800px","width","auto"],[1,"table","table-sm"],[1,"text-center"],["routerLink","/home/piedra-papel-tijera"],["src","../../../assets/imagenes/Juegos/Piedra-papel-o-tijera.jpg","width","80%"],["routerLink","/home/ta-te-ti"],["src","../../../assets/imagenes/Juegos/ta-te-ti.jpg","width","80%"],["routerLink","/home/memoTest"],["src","../../../assets/imagenes/Memotest/icon.png","width","80%"],["routerLink","/home/recuerdaLaSecuencia"],["src","../../../assets/imagenes/Juegos/Pac-man.jpg ","width","80%"]],template:function(t,e){1&t&&(r.Ob(0,"section",0),r.Ob(1,"table",1),r.Ob(2,"tr"),r.Ob(3,"td",2),r.Ob(4,"a",3),r.Mb(5,"img",4),r.Nb(),r.Nb(),r.Nb(),r.Ob(6,"tr"),r.Ob(7,"td",2),r.Ob(8,"a",5),r.Mb(9,"img",6),r.Nb(),r.Nb(),r.Nb(),r.Ob(10,"tr"),r.Ob(11,"td",2),r.Ob(12,"a",7),r.Mb(13,"img",8),r.Nb(),r.Nb(),r.Nb(),r.Ob(14,"tr"),r.Ob(15,"td",2),r.Ob(16,"a",9),r.Mb(17,"img",10),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb())},directives:[k_],styles:[""]}),t})(),mw=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-quien-soy"]],decls:14,vars:0,consts:[[2,"background-color","rgb(52, 97, 182)"],["align","center",1,"pt-5"],[1,"form-control","h-100",2,"width","30%","max-width","400px","min-width","300px","background-color","rgb(224, 224, 224)"],[2,"color","rgb(0, 0, 0)"],["href","https://github.com/agustinrv"],["src","assets/imagenes/agustinRivola.jpg","border","5",2,"width","200px","border-radius","25px","border-color","white"],[2,"color","rgb(0, 0, 0)","margin","1%"]],template:function(t,e){1&t&&(r.Ob(0,"body",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"h2",3),r.mc(4,"Agustin Rivola 4A"),r.Nb(),r.Ob(5,"a",4),r.mc(6,"Github"),r.Nb(),r.Mb(7,"br"),r.Mb(8,"img",5),r.Mb(9,"br"),r.Mb(10,"br"),r.Ob(11,"p",6),r.mc(12,' Soy un Alumno de la UTN. En este sitio podran encontrar distos juegos como "piedra,papel o tijera", "ta-te-ti","MemoTest" y un chat para hablar .Todo esto forma parte de un trabajo practico .Que te diviertas!!! '),r.Nb(),r.Mb(13,"br"),r.Nb(),r.Nb(),r.Nb())},styles:[""]}),t})(),yw=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-usuario"]],decls:52,vars:0,consts:[[1,"container-fluid"],["src","../../../assets/imagenes/Paisajes/descargar (2).jpg","alt","","width","100%","height","200px"],[1,"container"],["src","../../../assets/imagenes/personas/descargar (2).jpg","width","120px",1,"rounded-circle","mx-auto","d-block"],["align","center"],["for",""],[1,"ml-2","btn","btn-primary"],[1,"table","table-sm","table-dark","table-hover"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Mb(1,"img",1),r.Nb(),r.Mb(2,"br"),r.Ob(3,"div",2),r.Mb(4,"img",3),r.Mb(5,"br"),r.Mb(6,"br"),r.Ob(7,"div",4),r.Ob(8,"label",5),r.mc(9,"El_Fedelobo"),r.Nb(),r.Ob(10,"button",6),r.mc(11," Editar"),r.Nb(),r.Nb(),r.Nb(),r.Mb(12,"br"),r.Mb(13,"br"),r.Mb(14,"br"),r.Ob(15,"div",2),r.Ob(16,"table",7),r.Ob(17,"tr"),r.Ob(18,"td"),r.mc(19,"Juego 1"),r.Nb(),r.Ob(20,"td"),r.mc(21,"Partidas Ganadas"),r.Nb(),r.Ob(22,"td"),r.mc(23,"Mejor Tiempo"),r.Nb(),r.Nb(),r.Ob(24,"tr"),r.Ob(25,"td"),r.mc(26,"Juego 2"),r.Nb(),r.Ob(27,"td"),r.mc(28,"Partidas Ganadas"),r.Nb(),r.Ob(29,"td"),r.mc(30,"Mejor Tiempo"),r.Nb(),r.Nb(),r.Ob(31,"tr"),r.Ob(32,"td"),r.mc(33,"Juego 3"),r.Nb(),r.Ob(34,"td"),r.mc(35,"Partidas Ganadas"),r.Nb(),r.Ob(36,"td"),r.mc(37,"Mejor Tiempo"),r.Nb(),r.Nb(),r.Ob(38,"tr"),r.Ob(39,"td"),r.mc(40,"Juego 4"),r.Nb(),r.Ob(41,"td"),r.mc(42,"Partidas Ganadas"),r.Nb(),r.Ob(43,"td"),r.mc(44,"Mejor Tiempo"),r.Nb(),r.Nb(),r.Ob(45,"tr"),r.Ob(46,"td"),r.mc(47,"Juego 5"),r.Nb(),r.Ob(48,"td"),r.mc(49,"Partidas Ganadas"),r.Nb(),r.Ob(50,"td"),r.mc(51,"Mejor Tiempo"),r.Nb(),r.Nb(),r.Nb(),r.Nb())},styles:[""]}),t})();class bw{}class vw{}class _w{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof _w?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new _w;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof _w?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ww{encodeKey(t){return Ow(t)}encodeValue(t){return Ow(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ow(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Cw{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ww,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Cw({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Sw(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Ew(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Tw(t){return"undefined"!=typeof FormData&&t instanceof FormData}class xw{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new _w),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Cw,this.urlWithParams=e}serializeBody(){return null===this.body?null:Sw(this.body)||Ew(this.body)||Tw(this.body)||"string"==typeof this.body?this.body:this.body instanceof Cw?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Tw(this.body)?null:Ew(this.body)?this.body.type||null:Sw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Cw?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new xw(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Iw=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class jw{constructor(t,e=200,n="OK"){this.headers=t.headers||new _w,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Nw extends jw{constructor(t={}){super(t),this.type=Iw.ResponseHeader}clone(t={}){return new Nw({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class kw extends jw{constructor(t={}){super(t),this.type=Iw.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new kw({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Aw extends jw{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Pw(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Dw=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof xw)r=t;else{let i,o;i=n.headers instanceof _w?n.headers:new _w(n.headers),n.params&&(o=n.params instanceof Cw?n.params:new Cw({fromObject:n.params})),r=new xw(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(ln.a)(r).pipe(Object(Jy.a)(t=>this.handler.handle(t)));if(t instanceof xw||"events"===n.observe)return i;const o=i.pipe(Object(En.a)(t=>t instanceof kw));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(St.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Cw).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Pw(n,e))}post(t,e,n={}){return this.request("POST",t,Pw(n,e))}put(t,e,n={}){return this.request("PUT",t,Pw(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(bw))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class Rw{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Mw=new r.r("HTTP_INTERCEPTORS");let Lw=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Fw=/^\)\]\}',?\n/;class Vw{}let Uw=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),qw=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new an.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new _w(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Nw({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Fw,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new kw({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Aw({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Aw({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Iw.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Iw.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Iw.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Vw))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Bw=new r.r("XSRF_COOKIE_NAME"),Hw=new r.r("XSRF_HEADER_NAME");class zw{}let Gw=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=I(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s),r.Sb(r.C),r.Sb(Bw))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),Qw=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(zw),r.Sb(Hw))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),Ww=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Mw,[]);this.chain=t.reduceRight((t,e)=>new Rw(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(vw),r.Sb(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),Kw=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Qw,useClass:Lw}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Bw,useValue:e.cookieName}:[],e.headerName?{provide:Hw,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[Qw,{provide:Mw,useExisting:Qw,multi:!0},{provide:zw,useClass:Gw},{provide:Bw,useValue:"XSRF-TOKEN"},{provide:Hw,useValue:"X-XSRF-TOKEN"}]}),t})(),$w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[Dw,{provide:bw,useClass:Ww},qw,{provide:vw,useExisting:qw},Uw,{provide:Vw,useExisting:Uw}],imports:[[Kw.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Yw=(()=>{class t{constructor(t){this.http=t}getMoviesImages(){return this.http.get("https://api.themoviedb.org/3/movie/popular?api_key=ce777ef40b977d3a92e65264a1fd9e75")}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Dw))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Jw(t,e){if(1&t&&(r.Ob(0,"p",21),r.mc(1),r.Nb()),2&t){const t=r.Zb();r.Ab(1),r.oc(" Tiempo: ",t.tiempo," ")}}function Xw(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",22),r.Ob(1,"h1"),r.mc(2,"Precione para empezar"),r.Nb(),r.Ob(3,"a",23),r.Vb("click",function(){return r.hc(t),r.Zb().empezarJuego()}),r.Mb(4,"img",24),r.Nb(),r.Mb(5,"br"),r.Nb()}}function Zw(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",27),r.Vb("click",function(){r.hc(t);const n=e.index;return r.Zb(2).voltear(n)}),r.Mb(1,"img",28),r.Nb()}if(2&t){const t=e.$implicit;r.Cb(t.clase),r.Ab(1),r.cc("src",t.mostrar?t.path:t.atras,r.ic)}}function tO(t,e){if(1&t&&(r.Ob(0,"div",25),r.kc(1,Zw,2,3,"div",26),r.Nb()),2&t){const t=r.Zb();r.Ab(1),r.cc("ngForOf",t.cartas)}}let eO=(()=>{class t{constructor(t,e){this.movieApi=t,this.servicioScore=e,this.imgCarta="https://image.tmdb.org/t/p/w500",this.imgBack="../../../../assets/imagen/back.jpg",this.ruta="holaMUNDO/MemoTest",this.rutaScore="score/memoTest",this.gano=!1,this.nuevoScore=new sw,this.mensaje=null,this.colorMensaje="#000000",this.dadasVueltas=0,this.animando=!1,this.aRevisar=[],this.inicio=!1,this.dificultad=null,this.termino=!1,this.contador=0,this.cartas=[],this.btnEmpezar="Empezar",this.segundos=0,this.minutos=0,this.intervalo=null,this.tiempo="",this.juegoterminado=!0}ngOnInit(){this.movieApi.getMoviesImages().subscribe(t=>{this.infoPeliculas=t.results})}seleccionaDificultad(t=null){switch(this.btnEmpezar="Empezar",this.mensaje="",this.dificultad=t,this.cartas=[],t){case"facil":this.cartas.push({id:6,path:this.imgCarta+this.infoPeliculas[5].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:6,path:this.imgCarta+this.infoPeliculas[5].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:5,path:this.imgCarta+this.infoPeliculas[4].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:5,path:this.imgCarta+this.infoPeliculas[4].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:4,path:this.imgCarta+this.infoPeliculas[3].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:4,path:this.imgCarta+this.infoPeliculas[3].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:3,path:this.imgCarta+this.infoPeliculas[2].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:3,path:this.imgCarta+this.infoPeliculas[2].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:2,path:this.imgCarta+this.infoPeliculas[1].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:2,path:this.imgCarta+this.infoPeliculas[1].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:1,path:this.imgCarta+this.infoPeliculas[0].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1},{id:1,path:this.imgCarta+this.infoPeliculas[0].poster_path,atras:this.imgBack,mostrar:!1,clase:"carta",animado:!1,correcta:!1,volteada:!1});break;default:this.cartas=[]}this.cartas=this.mezclar(this.cartas)}revisar(){this.cartas[this.aRevisar[0]].id==this.cartas[this.aRevisar[1]].id?(this.cartas[this.aRevisar[0]].correcta=!0,this.cartas[this.aRevisar[1]].correcta=!0):(this.cartas[this.aRevisar[0]].volteada=!1,this.cartas[this.aRevisar[1]].volteada=!1,this.animar(this.aRevisar[0]),this.animar(this.aRevisar[1]));let t=!0;for(let e=0;e<this.cartas.length;e++)if(!this.cartas[e].correcta){t=!1;break}this.dadasVueltas=0,this.aRevisar=[],t&&this.victoria()}victoria(){var t;this.nuevoScore.name=null!==(t=localStorage.getItem("usuarioLogin"))&&void 0!==t?t:"Desconocido",this.nuevoScore.score=this.tiempo,this.mensaje="Ganaste!! Tu tiempo: "+this.tiempo,this.colorMensaje="#FFF",this.inicio=!1,this.btnEmpezar="Reiniciar",this.gano=!0,this.AbrirModalGano(!0),this.servicioScore.AgregarUno(this.nuevoScore),this.resetTimer()}voltear(t){return Object(ra.b)(this,void 0,void 0,function*(){this.dadasVueltas<2&&!this.animando&&(this.cartas[t].volteada||(this.aRevisar.push(t),this.animar(t),setTimeout(()=>{this.animando=!1},1e3),this.cartas[t].volteada=!0,this.dadasVueltas++,2==this.dadasVueltas&&setTimeout(()=>{this.revisar()},1e3)))})}animar(t){this.inicio&&!this.cartas[t].animado&&(this.cartas[t].clase="carta-animada",this.cartas[t].animado=!0,setTimeout(()=>{this.cartas[t].mostrar=!this.cartas[t].mostrar},400),setTimeout(()=>{this.cartas[t].clase="carta",this.cartas[t].animado=!1},1e3))}empezarJuego(){this.seleccionaDificultad("facil"),this.mensaje=null,this.inicio=!0,this.reiniciarImagenes(),this.empezarTimer()}reiniciarImagenes(){for(let t=0;t<this.cartas.length;t++)this.cartas[t].mostrar=!1,this.cartas[t].animado=!1,this.cartas[t].correcta=!1,this.cartas[t].volteada=!1}empezarTimer(){this.intervalo=setInterval(()=>{this.segundos++,this.tiempo="0"+this.minutos+":"+this.segundos,60===this.segundos&&(this.minutos++,this.segundos=0)},1e3)}resetTimer(){this.minutos=0,this.segundos=0,clearInterval(this.intervalo)}mostrarOcultarCartas(){for(let t=0;t<this.cartas.length;t++)this.animar(t)}cambiarDificultad(){this.dificultad=null,this.inicio=!1}mezclar(t){let e,n,r,i=[];for(t.forEach(t=>{i.push(t)}),r=i.length-1;r>0;r--)e=Math.floor(Math.random()*(r+1)),n=i[r],i[r]=i[e],i[e]=n;return i}AbrirModalGano(t){var e;(null!==(e=document.getElementById("botonGano"))&&void 0!==e?e:"").click()}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Yw),r.Lb(cw))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-memotest"]],decls:29,vars:6,consts:[[3,"rutaChat"],[1,"container"],["style","color: white;","class","mensaje-p",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"margin-top","10%"],["id","juego","class","mt-4",4,"ngIf"],[2,"visibility","hidden"],["id","botonGano","data-toggle","modal","data-target","#modalGano",1,"btn","btn-primary"],[3,"rutaScore"],["id","modalGano","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-backdrop","static","data-keyboard","false",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content","bg-primary"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-white"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"modal-body"],[1,"row"],["data-dismiss","modal",1,"col"],["data-toggle","modal","data-target","#modalScore",1,"btn","btn-block","btn-success"],[1,"row","mt-3"],[1,"btn","btn-block","btn-danger",3,"click"],[1,"mensaje-p",2,"color","white"],[1,"text-center"],[1,"btn",2,"height","600px","width","500px",3,"click"],["src","assets/play.svg",1,"imagen"],["id","juego",1,"mt-4"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["alt","carta",1,"mt-2",2,"width","200px","height","200px",3,"src"]],template:function(t,e){1&t&&(r.Mb(0,"app-chat",0),r.Ob(1,"div",1),r.kc(2,Jw,2,1,"p",2),r.Ob(3,"div",1),r.kc(4,Xw,6,0,"div",3),r.Nb(),r.Ob(5,"div",4),r.kc(6,tO,2,1,"div",5),r.Nb(),r.Nb(),r.Ob(7,"div",6),r.Ob(8,"button",7),r.mc(9,"Mostrar Modal"),r.Nb(),r.Nb(),r.Ob(10,"section"),r.Mb(11,"app-score",8),r.Nb(),r.Ob(12,"section",9),r.Ob(13,"div",10),r.Ob(14,"div",11),r.Ob(15,"div",12),r.Ob(16,"h1",13),r.mc(17),r.Nb(),r.Ob(18,"button",14),r.mc(19,"X"),r.Nb(),r.Nb(),r.Ob(20,"section",15),r.Ob(21,"div",16),r.Ob(22,"div",17),r.Ob(23,"button",18),r.mc(24,"Ver score"),r.Nb(),r.Nb(),r.Nb(),r.Ob(25,"div",19),r.Ob(26,"div",17),r.Ob(27,"button",20),r.Vb("click",function(){return e.empezarJuego()}),r.mc(28,"Volver a jugar"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.cc("rutaChat",e.ruta),r.Ab(2),r.cc("ngIf",e.inicio),r.Ab(2),r.cc("ngIf",null==e.dificultad),r.Ab(2),r.cc("ngIf",null!=e.dificultad),r.Ab(5),r.cc("rutaScore",e.rutaScore),r.Ab(6),r.oc("Ganaste!!! tu tiempo fue: ",e.tiempo,""))},directives:[Uy,P,dw,k],styles:["#juego[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto auto auto auto}@keyframes jello-horizontal{0%{transform:scaleX(1)}30%{transform:scale3d(1.25,.75,1)}40%{transform:scale3d(.75,1.25,1)}50%{transform:scale3d(1.15,.85,1)}65%{transform:scale3d(.95,1.05,1)}75%{transform:scale3d(1.05,.95,1)}to{transform:scaleX(1)}}.imagen[_ngcontent-%COMP%]:hover{animation:jello-horizontal .9s both;display:inline-block}@keyframes rotate-diagonal-1{0%{transform:rotate3d(1,1,0,0deg)}50%{transform:rotate3d(1,1,0,-180deg)}to{transform:rotate3d(1,1,0,-1turn)}}.carta-animada[_ngcontent-%COMP%]{animation:rotate-diagonal-1 .4s linear both}@keyframes girar{0%{transform:rotateY(0deg)}50%{transform:rotateY(180deg)}to{transform:rotateY(1turn)}}"]}),t})(),nO=(()=>{class t{constructor(t){this.router=t}canActivate(t,e){return this.ChequearUsuario()}ChequearUsuario(){let t=!1;return localStorage.getItem("usuarioLogin")?t=!0:this.router.navigate(["/login"]),t}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(j_))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class rO{constructor(){this.nombre="",this.apellido="",this.edad=0,this.telefono=0,this.gustoDePagina=1,this.jugastePiedraPapelTijera=!1,this.jugasteTaTeTi=!1,this.jugasteMemoTest=!1,this.jugasteRecuerdaLaSecuencia=!1,this.cualTeGustoMas=""}}let iO=(()=>{class t{constructor(t){this.bd=t,this.rutaDeLaColeccion="/encuesta",this.referenciaAlaColeccion=t.collection(this.rutaDeLaColeccion)}AgregarRespuesta(t){return this.referenciaAlaColeccion.add(Object.assign({},t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Ry))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function oO(t,e){1&t&&(r.Ob(0,"small",34),r.mc(1," \u274c "),r.Nb())}function sO(t,e){if(1&t&&(r.Ob(0,"span"),r.kc(1,oO,2,0,"small",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("nombre"))?null:e.hasError("required"))}}function aO(t,e){1&t&&(r.Ob(0,"small",34),r.mc(1," \u274c "),r.Nb())}function uO(t,e){if(1&t&&(r.Ob(0,"span"),r.kc(1,aO,2,0,"small",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("apellido"))?null:e.hasError("required"))}}function cO(t,e){1&t&&(r.Ob(0,"small",34),r.mc(1," \u274c "),r.Nb())}function lO(t,e){if(1&t&&(r.Ob(0,"span"),r.kc(1,cO,2,0,"small",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("edad"))?null:e.hasError("required"))}}function hO(t,e){1&t&&(r.Ob(0,"h4",34),r.mc(1," *Edad minima 18 a\xf1os "),r.Nb())}function dO(t,e){if(1&t&&(r.Ob(0,"span"),r.kc(1,hO,2,0,"h4",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("edad"))?null:e.hasError("min"))}}function fO(t,e){1&t&&(r.Ob(0,"small",34),r.mc(1," \u274c "),r.Nb())}function pO(t,e){if(1&t&&(r.Ob(0,"div"),r.kc(1,fO,2,0,"small",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("telefono"))?null:e.hasError("required"))}}function gO(t,e){1&t&&(r.Ob(0,"small",34),r.mc(1," *Debe seleccionar una opcion. "),r.Nb())}function mO(t,e){if(1&t&&(r.Ob(0,"div"),r.kc(1,gO,2,0,"small",33),r.Nb()),2&t){const t=r.Zb();let e=null;r.Ab(1),r.cc("ngIf",null==(e=t.encuestaForm.get("cualesJugaste"))?null:e.hasError("required"))}}const yO=function(){return{standalone:!0}};let bO=(()=>{class t{constructor(t){this.servicioEncuesta=t,this.preguntas=new rO,this.encuestaForm=new je({nombre:new Ie("",[Lt.required]),apellido:new Ie("",[Lt.required]),edad:new Ie("",[Lt.required,Lt.min(18),Lt.max(99)]),telefono:new Ie("",[Lt.required,Lt.pattern("^[0-9]*$"),Lt.maxLength(10)])})}ngOnInit(){}AgregarRespuesta(){var t,e,n,r;this.preguntas.nombre=null===(t=this.encuestaForm.get("nombre"))||void 0===t?void 0:t.value,this.preguntas.apellido=null===(e=this.encuestaForm.get("apellido"))||void 0===e?void 0:e.value,this.preguntas.edad=null===(n=this.encuestaForm.get("edad"))||void 0===n?void 0:n.value,this.preguntas.telefono=null===(r=this.encuestaForm.get("telefono"))||void 0===r?void 0:r.value,this.servicioEncuesta.AgregarRespuesta(this.preguntas),alert("Gracias por responder!!")}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(iO))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-preguntar-al-usuario"]],decls:84,vars:36,consts:[[1,"container","mt-3","w-50"],[1,"form-control","h-100","bg-primary","text-white",3,"formGroup"],[1,"row"],[1,"col-5"],["for",""],[4,"ngIf"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control"],["type","text","placeholder","Apellido","formControlName","apellido",1,"form-control"],[1,"col"],["type","text","min","18","max","99","maxlength","2","required","","formControlName","edad",1,"form-control"],["type","number","maxlength","10","required","","formControlName","telefono",1,"form-control"],["align","center"],["type","range","min","1","max","10","id","playHours",1,"col-md-8","mb-4",2,"background-color","-internal-light-dark(rgb(196, 11, 11), rgb(235, 8, 8))",3,"ngModel","ngModelOptions","ngModelChange"],[2,"background-color","white"],[1,"form-check"],["type","checkbox","id","checkPiedraPapelTijera","value","true",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","checkPiedraPapelTijera",1,"form-check-label"],["type","checkbox","id","checkTaTeTi","value","true",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","checkTaTeTi",1,"form-check-label"],["type","checkbox","id","checkMemotest","value","true",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","checkMemotest",1,"form-check-label"],["type","checkbox","id","checkRecuerdaLaSecuencia","value","true",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","checkRecuerdaLaSecuencia",1,"form-check-label"],["type","radio","formControlname","juego","id","radioPiedraPapelTijera","value","PiedraPapelTijera",3,"ngModel","ngModelOptions","ngModelChange"],["for","radioPiedraPapelTijera"],["type","radio","formControlname","juego","id","radioTaTeTi","value","TaTeTi",3,"ngModel","ngModelOptions","ngModelChange"],["for","radioTaTeTi"],["type","radio","formControlname","juego","id","radioMemoTest","value","MemoTest",3,"ngModel","ngModelOptions","ngModelChange"],["for","radioMemoTest"],["type","radio","formControlname","juego","id","radioRecuerdalaSecuencia","value","recuerdaLaSecuencia",3,"ngModel","ngModelOptions","ngModelChange"],["for","radioRecuerdalaSecuencia"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){if(1&t&&(r.Ob(0,"section",0),r.Ob(1,"form",1),r.Ob(2,"div",2),r.Ob(3,"div",3),r.Ob(4,"label",4),r.mc(5,"Nombre:"),r.Nb(),r.kc(6,sO,2,1,"span",5),r.Mb(7,"input",6),r.Nb(),r.Ob(8,"div",3),r.Ob(9,"label",4),r.mc(10,"Apellido:"),r.Nb(),r.kc(11,uO,2,1,"span",5),r.Mb(12,"input",7),r.Nb(),r.Nb(),r.Ob(13,"div",2),r.Ob(14,"div",8),r.Ob(15,"label",4),r.mc(16,"Edad"),r.Nb(),r.kc(17,lO,2,1,"span",5),r.kc(18,dO,2,1,"span",5),r.Mb(19,"input",9),r.Nb(),r.Nb(),r.Ob(20,"div",2),r.Ob(21,"div",8),r.Ob(22,"label",4),r.mc(23,"Numero de telefono"),r.Nb(),r.kc(24,pO,2,1,"div",5),r.Mb(25,"input",10),r.Nb(),r.Nb(),r.Ob(26,"div",2),r.Ob(27,"div",8),r.Ob(28,"label",4),r.mc(29,"Te Gusto la pagina?"),r.Nb(),r.Ob(30,"div",11),r.Ob(31,"h1"),r.mc(32),r.Nb(),r.Ob(33,"input",12),r.Vb("ngModelChange",function(t){return e.preguntas.gustoDePagina=t}),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(34,"div"),r.Mb(35,"hr",13),r.Nb(),r.Ob(36,"div",2),r.Ob(37,"div",8),r.Ob(38,"label"),r.mc(39,"Que juegos jugaste?"),r.Nb(),r.Mb(40,"br"),r.Ob(41,"div"),r.Ob(42,"div",14),r.Ob(43,"input",15),r.Vb("ngModelChange",function(t){return e.preguntas.jugastePiedraPapelTijera=t}),r.Nb(),r.Ob(44,"label",16),r.mc(45," Piedra papel o tijera"),r.Nb(),r.Nb(),r.Ob(46,"div",14),r.Ob(47,"input",17),r.Vb("ngModelChange",function(t){return e.preguntas.jugasteTaTeTi=t}),r.Nb(),r.Ob(48,"label",18),r.mc(49,"Ta-te-ti"),r.Nb(),r.Nb(),r.Ob(50,"div",14),r.Ob(51,"input",19),r.Vb("ngModelChange",function(t){return e.preguntas.jugasteMemoTest=t}),r.Nb(),r.Ob(52,"label",20),r.mc(53," Memotest"),r.Nb(),r.Nb(),r.Ob(54,"div",14),r.Ob(55,"input",21),r.Vb("ngModelChange",function(t){return e.preguntas.jugasteRecuerdaLaSecuencia=t}),r.Nb(),r.Ob(56,"label",22),r.mc(57," Recuerda la secuencia"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.kc(58,mO,2,1,"div",5),r.Nb(),r.Ob(59,"div"),r.Mb(60,"hr",13),r.Nb(),r.Ob(61,"div",2),r.Ob(62,"div",8),r.Ob(63,"label",4),r.mc(64,"Cual te gusto mas?"),r.Nb(),r.Mb(65,"br"),r.Ob(66,"input",23),r.Vb("ngModelChange",function(t){return e.preguntas.cualTeGustoMas=t}),r.Nb(),r.Ob(67,"label",24),r.mc(68,"Piedra papel o tijera"),r.Nb(),r.Mb(69,"br"),r.Ob(70,"input",25),r.Vb("ngModelChange",function(t){return e.preguntas.cualTeGustoMas=t}),r.Nb(),r.Ob(71,"label",26),r.mc(72,"Ta-te-ti"),r.Nb(),r.Mb(73,"br"),r.Ob(74,"input",27),r.Vb("ngModelChange",function(t){return e.preguntas.cualTeGustoMas=t}),r.Nb(),r.Ob(75,"label",28),r.mc(76,"Memotest"),r.Nb(),r.Mb(77,"br"),r.Ob(78,"input",29),r.Vb("ngModelChange",function(t){return e.preguntas.cualTeGustoMas=t}),r.Nb(),r.Ob(79,"label",30),r.mc(80,"Recuerda la secuencia"),r.Nb(),r.Nb(),r.Nb(),r.Ob(81,"section",31),r.Ob(82,"button",32),r.Vb("click",function(){return e.AgregarRespuesta()}),r.mc(83,"Enviar"),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){let t=null,n=null,i=null,o=null,s=null,a=null;r.Ab(1),r.cc("formGroup",e.encuestaForm),r.Ab(5),r.cc("ngIf",(null==(t=e.encuestaForm.get("nombre"))?null:t.errors)&&((null==(t=e.encuestaForm.get("nombre"))?null:t.dirty)||(null==(t=e.encuestaForm.get("nombre"))?null:t.touched))),r.Ab(5),r.cc("ngIf",(null==(n=e.encuestaForm.get("apellido"))?null:n.errors)&&((null==(n=e.encuestaForm.get("apellido"))?null:n.dirty)||(null==(n=e.encuestaForm.get("apellido"))?null:n.touched))),r.Ab(6),r.cc("ngIf",(null==(i=e.encuestaForm.get("edad"))?null:i.errors)&&((null==(i=e.encuestaForm.get("edad"))?null:i.dirty)||(null==(i=e.encuestaForm.get("edad"))?null:i.touched))),r.Ab(1),r.cc("ngIf",(null==(o=e.encuestaForm.get("edad"))?null:o.errors)&&((null==(o=e.encuestaForm.get("edad"))?null:o.dirty)||(null==(o=e.encuestaForm.get("edad"))?null:o.touched))),r.Ab(6),r.cc("ngIf",(null==(s=e.encuestaForm.get("telefono"))?null:s.errors)&&((null==(s=e.encuestaForm.get("telefono"))?null:s.dirty)||(null==(s=e.encuestaForm.get("telefono"))?null:s.touched))),r.Ab(8),r.nc(e.preguntas.gustoDePagina),r.Ab(1),r.cc("ngModel",e.preguntas.gustoDePagina)("ngModelOptions",r.dc(27,yO)),r.Ab(10),r.cc("ngModel",e.preguntas.jugastePiedraPapelTijera)("ngModelOptions",r.dc(28,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.jugasteTaTeTi)("ngModelOptions",r.dc(29,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.jugasteMemoTest)("ngModelOptions",r.dc(30,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.jugasteRecuerdaLaSecuencia)("ngModelOptions",r.dc(31,yO)),r.Ab(3),r.cc("ngIf",(null==(a=e.encuestaForm.get("cualesJugaste"))?null:a.errors)&&((null==(a=e.encuestaForm.get("cualesJugaste"))?null:a.dirty)||(null==(a=e.encuestaForm.get("cualesJugaste"))?null:a.touched))),r.Ab(8),r.cc("ngModel",e.preguntas.cualTeGustoMas)("ngModelOptions",r.dc(32,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.cualTeGustoMas)("ngModelOptions",r.dc(33,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.cualTeGustoMas)("ngModelOptions",r.dc(34,yO)),r.Ab(4),r.cc("ngModel",e.preguntas.cualTeGustoMas)("ngModelOptions",r.dc(35,yO)),r.Ab(4),r.cc("disabled",!e.encuestaForm.valid)}},directives:[Le,oe,Ke,P,kt,ie,Ye,tn,Xe,Ve,Ge,Me,It,He],styles:["@media screen and (-webkit-min-device-pixel-ratio:0){input[type=range][_ngcontent-%COMP%]{overflow:hidden;width:100%;-webkit-appearance:none;background-color:#9a905d}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{height:10px;-webkit-appearance:none;color:#13bba4;margin-top:-1px}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{width:10px;-webkit-appearance:none;height:10px;cursor:ew-resize;background:#434343;box-shadow:-500px 0 0 500px #07fc27}}"]}),t})();n("7uu2"),n("sx9y"),n("TGZE"),n("T3pr"),n("neMA"),n("uwfA"),n("4XzM");var vO=n("CqXF"),_O=n("f29J"),wO=n("GjHo"),OO=n("3E0/"),CO=n("coGc"),SO=n("Kj3r");const EO=[440,493.88,523.25,587.33],TO=new window.AudioContext;function xO(){const t=[];for(let e=0;e<100;e++)t.push(Math.floor(1e4*Math.random()%4));return console.log("solution",t),t}class IO{constructor(t=1,e=!1,n=0){this.level=t,this.previousWasLost=e,this.startedAt=n}loose(t){return new IO(1,!0,t+1)}win(t){return new IO(this.level+1,!1,t+1)}}const jO=function(t){return{"game-on":t}},NO=function(t){return{active:t}},kO=[{path:"",redirectTo:"home/juegos",pathMatch:"full"},{path:"home",component:ow,children:[{path:"",component:ow},{path:"usuario",component:yw,canActivate:[nO]},{path:"juegos",component:gw},{path:"piedra-papel-tijera",component:pw},{path:"memoTest",component:eO},{path:"ta-te-ti",component:qy},{path:"recuerdaLaSecuencia",component:(()=>{class t{constructor(){this.solution=xO(),this.start$=new an.a,this.turn$=new an.a,this.message$=new an.a,this.activePad$=new an.a}ngOnInit(){this.start$=an.a.fromEvent(document.querySelector(".play"),"click").pipe(Object($y.a)(1),Object(vO.a)(new IO)),this.start$.subscribe(t=>console.log("start",t));const t=an.a.fromEvent(document.querySelectorAll(".pad"),"click").pipe(Object(St.a)(t=>t.srcElement.getAttribute("data-pad")));this.turn$=this.start$.pipe(Object(_O.a)(t.pipe(Object(pn.a)((t,e,n)=>function(t,e,n,r){return null===n?e:n===t[r-e.startedAt]?r-e.startedAt==e.level-1?e.win(r):e:e.loose(r)}(this.solution,t,e,n),new IO),Object(gn.a)(),Object(tb.a)(t=>{t.previousWasLost&&(this.solution=xO())}))),Object(dn.a)()),this.turn$.subscribe(t=>console.log(t)),this.message$=this.start$.pipe(Object(vO.a)("GO"),Object(_O.a)(this.turn$.pipe(Object(St.a)(t=>t.previousWasLost?":-(":":-)"))),Object(fn.a)(t=>an.a.interval(1e3).pipe(Object(Yn.a)(0),Object(wO.a)(":-("===t?an.a.of(t,"GO",null):an.a.of(t,null)),Object(St.a)(([t,e])=>e)))),this.activePad$=this.turn$.pipe(Object(OO.a)(0),Object(fn.a)(e=>an.a.merge(t,an.a.from(this.solution).pipe(Object($y.a)(e.level),Object(CO.a)(()=>this.message$.pipe(Object(Yn.a)(""),Object(SO.a)(1001))),Object(Jy.a)(t=>an.a.of(t).pipe(Object(OO.a)(600)))))),Object(Jy.a)(t=>an.a.of(t,null).pipe(Object(CO.a)(t=>null===t?an.a.timer(400):an.a.of(!0)))),Object(tb.a)(t=>function(t){if(null!==t){const e=TO.createOscillator();e.type="sine",e.frequency.setValueAtTime(EO[t],TO.currentTime),e.connect(TO.destination),e.start(),setTimeout(()=>e.stop(),200)}}(t)),Object(dn.a)())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["app-simon-dice"]],decls:24,vars:31,consts:[[3,"ngClass"],[1,"play"],[1,"game"],[1,"turn"],[1,"board"],[1,"pads"],[1,"pad-row"],["data-pad","0",1,"pad","pad-0",3,"ngClass"],["data-pad","1",1,"pad","pad-1",3,"ngClass"],["data-pad","2",1,"pad","pad-2",3,"ngClass"],["data-pad","3",1,"pad","pad-3",3,"ngClass"],[1,"message"]],template:function(t,e){if(1&t&&(r.Ob(0,"div",0),r.ac(1,"async"),r.Ob(2,"button",1),r.mc(3,"PLAY"),r.Nb(),r.Ob(4,"div",2),r.Ob(5,"div",3),r.mc(6),r.ac(7,"async"),r.Nb(),r.Ob(8,"div",4),r.Ob(9,"div",5),r.Ob(10,"div",6),r.Mb(11,"button",7),r.ac(12,"async"),r.Mb(13,"button",8),r.ac(14,"async"),r.Nb(),r.Ob(15,"div",6),r.Mb(16,"button",9),r.ac(17,"async"),r.Mb(18,"button",10),r.ac(19,"async"),r.Nb(),r.Nb(),r.Nb(),r.Ob(20,"div",11),r.Ob(21,"span"),r.mc(22),r.ac(23,"async"),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){let t=null;r.cc("ngClass",r.ec(21,jO,r.bc(1,7,e.start$))),r.Ab(6),r.oc("Niveau ",(null==(t=r.bc(7,9,e.turn$))?null:t.level)||1,""),r.Ab(5),r.cc("ngClass",r.ec(23,NO,0===r.bc(12,11,e.activePad$))),r.Ab(2),r.cc("ngClass",r.ec(25,NO,1===r.bc(14,13,e.activePad$))),r.Ab(3),r.cc("ngClass",r.ec(27,NO,2===r.bc(17,15,e.activePad$))),r.Ab(2),r.cc("ngClass",r.ec(29,NO,3===r.bc(19,17,e.activePad$))),r.Ab(4),r.nc(r.bc(23,19,e.message$))}},directives:[j],pipes:[U],styles:["[_nghost-%COMP%]{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#b2dfdb}[_nghost-%COMP%]   .pad[_ngcontent-%COMP%]{cursor:pointer;width:200px;height:200px;margin:8px;border:0;outline:0;transition:opacity .2s ease;opacity:.8}[_nghost-%COMP%]   .pad.active[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .pad-0[_ngcontent-%COMP%]{background:#ffc107}[_nghost-%COMP%]   .pad-1[_ngcontent-%COMP%]{background:#f44336}[_nghost-%COMP%]   .pad-2[_ngcontent-%COMP%]{background:#2196f3}[_nghost-%COMP%]   .pad-3[_ngcontent-%COMP%]{background:#4caf50}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]{margin-top:-128px;position:relative;display:none}[_nghost-%COMP%]   .board[_ngcontent-%COMP%]{width:400px;height:400px;position:relative;border-radius:100%;overflow:hidden;border:16px solid #263238;background:#263238;box-shadow:0 6px 30px -6px #5e305e}[_nghost-%COMP%]   .pads[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;left:-16px;top:-16px}[_nghost-%COMP%]   .pad-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .play[_ngcontent-%COMP%]{padding:16px 48px;background:#ffeb3b;font-size:32px;cursor:pointer}[_nghost-%COMP%]   .play[_ngcontent-%COMP%]:active{background:#fdd835}[_nghost-%COMP%]   .turn[_ngcontent-%COMP%]{width:100%;height:64px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%], [_nghost-%COMP%]   .turn[_ngcontent-%COMP%]{font-size:32px;margin:64px 0;text-align:center}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{background:#eceff1;height:128px;position:absolute;top:calc(50% - 78px);border-radius:100%;width:128px;left:calc(50% - 78px);display:flex;align-items:center;justify-content:center;border:16px solid #263238}[_nghost-%COMP%]   .game-on[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .game-on[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]{display:block}"]}),t})()}]},{path:"quienSoy",component:mw},{path:"encuesta",component:bO},{path:"registro",component:rw},{path:"login",component:ew},{path:"**",component:iw}];let AO=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[H_.forRoot(kO)],H_]}),t})();function PO(t,e){1&t&&(r.Ob(0,"div"),r.Ob(1,"a",4),r.Ob(2,"button",10),r.mc(3,"Login"),r.Nb(),r.Nb(),r.Ob(4,"a",11),r.Ob(5,"a",12),r.mc(6,"Registrarse"),r.Nb(),r.Nb(),r.Nb())}function DO(t,e){if(1&t){const t=r.Pb();r.Ob(0,"a",4),r.Ob(1,"button",13),r.Vb("click",function(){return r.hc(t),r.Zb().LogOut()}),r.mc(2,"Log Out"),r.Nb(),r.Nb()}}let RO=(()=>{class t{constructor(t,e){this.servicioAutentificacion=t,this.router=e,this.title="salaDeJuegos"}ngOnInit(){this.usuarioLogin=localStorage.getItem("usuarioLogin"),this.usuarioLogin||this.router.navigateByUrl("login")}LogOut(){localStorage.removeItem("usuarioLogin"),location.href="login"}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Z_),r.Lb(j_))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-dark"],[1,"navbar-collapse"],["routerLink","home/juegos",1,"btn","btn-outline-danger"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","quienSoy",1,"text-primary","ml-3"],["claa","nav-item"],["routerLink","encuesta",1,"text-primary","ml-3"],[4,"ngIf","ngIfElse"],["salir",""],["routerLink","login",1,"btn","btn-outline-primary"],[1,"nav-item","ml-3"],["routerLink","registro",1,"btn","btn-outline-success"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(t,e){if(1&t&&(r.Ob(0,"header"),r.Ob(1,"nav",0),r.Ob(2,"div",1),r.Ob(3,"button",2),r.mc(4,"Sala de Juegos"),r.Nb(),r.Ob(5,"ul",3),r.Ob(6,"li",4),r.Ob(7,"a",5),r.mc(8,"Quien soy?"),r.Nb(),r.Nb(),r.Ob(9,"li",6),r.Ob(10,"a",7),r.mc(11,"Encuesta"),r.Nb(),r.Nb(),r.Nb(),r.kc(12,PO,7,0,"div",8),r.kc(13,DO,3,0,"ng-template",null,9,r.lc),r.Nb(),r.Nb(),r.Nb(),r.Mb(15,"router-outlet")),2&t){const t=r.gc(14);r.Ab(12),r.cc("ngIf",0==e.usuarioLogin||null==e.usuarioLogin)("ngIfElse",t)}},directives:[N_,k_,P,P_],styles:[""]}),t})();const MO={apiKey:"AIzaSyA-xxixWsXZlyVh_NMFHJWGP-8iC3LBpr8",authDomain:"tp-saladejuegos-2e572.firebaseapp.com",projectId:"tp-saladejuegos-2e572",storageBucket:"tp-saladejuegos-2e572.appspot.com",messagingSenderId:"798053443792",appId:"1:798053443792:web:a66dc873074ce05d3256d5",measurementId:"G-G8KEJDJJ4M"};class LO{}const FO="*";function VO(t,e=null){return{type:2,steps:t,options:e}}function UO(t){return{type:6,styles:t,offset:null}}function qO(t){Promise.resolve(null).then(t)}class BO{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class HO{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?qO(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function zO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function GO(t){switch(t.length){case 0:return new BO;case 1:return t[0];default:return new HO(t)}}function QO(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case FO:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function WO(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&KO(n,"start",t)));break;case"done":t.onDone(()=>r(n&&KO(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&KO(n,"destroy",t)))}}function KO(t,e,n){const r=n.totalTime,i=$O(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function $O(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function YO(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function JO(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let XO=(t,e)=>!1,ZO=(t,e)=>!1,tC=(t,e,n)=>[];const eC=zO();(eC||"undefined"!=typeof Element)&&(XO=(t,e)=>t.contains(e),ZO=(()=>{if(eC||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ZO}})(),tC=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let nC=null,rC=!1;function iC(t){nC||(nC=("undefined"!=typeof document?document.body:null)||{},rC=!!nC.style&&"WebkitAppearance"in nC.style);let e=!0;return nC.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in nC.style,!e&&rC)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in nC.style),e}const oC=ZO,sC=XO,aC=tC;function uC(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let cC=(()=>{class t{validateStyleProperty(t){return iC(t)}matchesElement(t,e){return oC(t,e)}containsElement(t,e){return sC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new BO(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),lC=(()=>{class t{}return t.NOOP=new cC,t})();const hC="ng-enter",dC="ng-leave",fC="ng-trigger",pC=".ng-trigger",gC="ng-animating",mC=".ng-animating";function yC(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bC(parseFloat(e[1]),e[2])}function bC(t,e){switch(e){case"s":return 1e3*t;default:return t}}function vC(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=bC(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=bC(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function _C(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function wC(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else _C(t,n);return n}function OC(t,e,n){return n?e+":"+n+";":""}function CC(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=OC(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=OC(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function SC(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=AC(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),zO()&&CC(t))}function EC(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=AC(e);t.style[n]=""}),zO()&&CC(t))}function TC(t){return Array.isArray(t)?1==t.length?t[0]:VO(t):t}const xC=new RegExp("{{\\s*(.+?)\\s*}}","g");function IC(t){let e=[];if("string"==typeof t){let n;for(;n=xC.exec(t);)e.push(n[1]);xC.lastIndex=0}return e}function jC(t,e,n){const r=t.toString(),i=r.replace(xC,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function NC(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const kC=/-+([a-z0-9])/g;function AC(t){return t.replace(kC,(...t)=>t[1].toUpperCase())}function PC(t,e){return 0===t||0===e}function DC(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=MC(t,e)})}}return e}function RC(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function MC(t,e){return window.getComputedStyle(t)[e]}const LC="*";function FC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(qC(i,s)),"<"!=o[0]||i==LC&&s==LC||e.push(qC(s,i))}(t,n,e)):n.push(t),n}const VC=new Set(["true","1"]),UC=new Set(["false","0"]);function qC(t,e){const n=VC.has(t)||UC.has(t),r=VC.has(e)||UC.has(e);return(i,o)=>{let s=t==LC||t==i,a=e==LC||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?VC.has(t):UC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?VC.has(e):UC.has(e)),s&&a}}const BC=new RegExp("s*:selfs*,?","g");function HC(t,e,n){return new zC(t).build(e,n)}class zC{constructor(t){this._driver=t}build(t,e){const n=new GC(e);return this._resetContextStyleTimingState(n),RC(this,TC(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(QC(t)){const e=t;Object.keys(e).forEach(t=>{IC(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=NC(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=RC(this,TC(t.animation),e);return{type:1,matchers:FC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:WC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>RC(this,t,e)),options:WC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=RC(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:WC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return KC(vC(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=KC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||vC(r,e),KC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:UO({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=UO(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==FO?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(QC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=IC(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(QC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(QC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:RC(this,TC(t.animation),e),options:WC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:WC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:WC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(BC,"")),[t=t.replace(/@\*/g,pC).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,mC),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,YO(e.collectedStyles,e.currentQuerySelector,{});const s=RC(this,TC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:WC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:vC(t.timings,e.errors,!0);return{type:12,animation:RC(this,TC(t.animation),e),timings:n,options:null}}}class GC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function QC(t){return!Array.isArray(t)&&"object"==typeof t}function WC(t){var e;return t?(t=_C(t)).params&&(t.params=(e=t.params)?_C(e):null):t={},t}function KC(t,e,n){return{duration:t,delay:e,easing:n}}function $C(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class YC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const JC=new RegExp(":enter","g"),XC=new RegExp(":leave","g");function ZC(t,e,n,r,i,o={},s={},a,u,c=[]){return(new tS).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class tS{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new YC;const l=new nS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),RC(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[$C(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?yC(n.duration):null,o=null!=n.delay?yC(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),RC(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=eS);const t=yC(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>RC(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?yC(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),RC(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return vC(e.params?jC(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?yC(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=eS);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),RC(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;RC(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const eS={};class nS{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new rS(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=yC(n.duration)),null!=n.delay&&(r.delay=yC(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=jC(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new nS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=eS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new iS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(JC,"."+this._enterClassName)).replace(XC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class rS{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new rS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||FO,this._currentKeyframe[t]=FO}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=FO})):wC(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=jC(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:FO),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=wC(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==FO&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?NC(t.values()):[],o=e.size?NC(e.values()):[];if(n){const t=r[0],e=_C(t);t.offset=0,e.offset=1,r=[t,e]}return $C(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class iS extends rS{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=wC(t[0],!1);a.offset=0,i.push(a);const u=wC(t[0],!1);u.offset=oS(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=wC(t[r],!1);s.offset=oS((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return $C(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function oS(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class sS{}class aS extends sS{normalizePropertyName(t,e){return AC(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(uS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const uS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cS(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const lS={};class hS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||lS,d=this.buildStyles(n,s&&s.params||lS,l),f=a&&a.params||lS,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,b="void"===r,v={params:Object.assign(Object.assign({},h),f)},_=c?[]:ZC(t,e,this.ast.animation,i,o,d,p,v,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return cS(e,this._triggerName,n,r,b,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=YO(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=YO(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const O=NC(g.values());return cS(e,this._triggerName,n,r,b,d,p,_,O,m,y,w)}}class dS{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=_C(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=jC(o,r,e)),n[t]=o})}}),n}}class fS{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new dS(t.style,t.options&&t.options.params||{})}),pS(this.states,"true","1"),pS(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new hS(t,e,this.states))}),this.fallbackTransition=new hS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function pS(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const gS=new YC;class mS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=HC(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=QO(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=ZC(this._driver,e,i,hC,dC,{},{},n,gS,r),o.forEach(t=>{const e=YO(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,FO)})});const a=GO(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=$O(e,"","","");return WO(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const yS="ng-animate-queued",bS="ng-animate-disabled",vS=".ng-animate-disabled",_S=[],wS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class CS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=_C(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const SS="void",ES=new CS(SS);class TS{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,PS(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=YO(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=YO(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(PS(t,fC),PS(t,"ng-trigger-"+e),a[e]=ES),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new IS(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(PS(t,fC),PS(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new CS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=ES),u.value!==SS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{EC(t,n),SC(t,r)})}return}const c=YO(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(PS(t,yS),o.onStart(()=>{DS(t,yS)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,pC,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,SS,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&GO(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||ES,a=new CS(SS),u=new IS(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==wS||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){PS(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=$O(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,WO(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class xS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new TS(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(jS(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!jS(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),PS(t,bS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),DS(t,bS))}removeNode(t,e,n,r){if(jS(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return jS(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,pC,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,mC,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return GO(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=wS,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,vS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,vS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)PS(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?GO(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new YC,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=AS(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=hC+p++;f.set(e,n),t.forEach(t=>PS(t,n))});const g=[],m=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const b=new Map,v=AS(h,Array.from(m));v.forEach((t,e)=>{const n=dC+p++;b.set(e,n),t.forEach(t=>PS(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>DS(t,n))}),v.forEach((t,e)=>{const n=b.get(e);t.forEach(t=>DS(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=b.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>EC(i,p.fromStyles)),e.onDestroy(()=>SC(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>EC(i,p.fromStyles)),e.onDestroy(()=>SC(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>YO(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const O=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,O))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{YO(O,e,[]).push(t),t.destroy()})});const S=g.filter(t=>LS(t,a,u)),E=new Map;kS(E,this.driver,y,u,FO).forEach(t=>{LS(t,a,u)&&S.push(t)});const T=new Map;d.forEach((t,e)=>{kS(T,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=E.get(t),n=T.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const x=[],I=[],j={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>SC(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=j;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,O,i,T,E);if(o.setRealPlayer(n),t===j)x.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=GO(e)),r.push(o)}}else EC(e,s.fromStyles),o.onDestroy(()=>SC(e,s.toStyles)),I.push(o),c.has(e)&&r.push(o)}),I.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=GO(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<g.length;N++){const t=g[N],e=t.__ng_removed;if(DS(t,dC),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,mC,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?RS(this,t,r):this.processLeaveNode(t)}return g.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==SS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=YO(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}EC(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new BO(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return MS(t,e),e}((n.get(h)||_S).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=QO(0,this._normalizer,0,e.keyframes,g,m),b=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new IS(t,s,h);e.setRealPlayer(b),u.push(e)}return b});u.forEach(t=>{YO(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>PS(t,gC));const d=GO(h);return d.onDestroy(()=>{c.forEach(t=>DS(t,gC)),SC(a,e.toStyles)}),l.forEach(t=>{YO(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new BO(t.duration,t.delay)}}class IS{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new BO,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>WO(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){YO(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function jS(t){return t&&1===t.nodeType}function NS(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function kS(t,e,n,r,i){const o=[];n.forEach(t=>o.push(NS(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=OS,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>NS(t,o[a++])),s}function AS(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function PS(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function DS(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function RS(t,e,n){GO(n).onDone(()=>t.processLeaveNode(e))}function MS(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof HO?MS(r.players,e):e.push(r)}}function LS(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class FS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new xS(t,e,n),this._timelineEngine=new mS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=HC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new fS(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=JO(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=JO(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function VS(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=qS(e[0]),e.length>1&&(r=qS(e[e.length-1]))):e&&(n=qS(e)),n||r?new US(t,n,r):null}let US=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&SC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(SC(this._element,this._initialStyles),this._endStyles&&(SC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(EC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(EC(this._element,this._endStyles),this._endStyles=null),SC(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function qS(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];BS(i)&&(e=e||{},e[i]=t[i])}return e}function BS(t){return"display"===t||"position"===t}const HS="animation",zS="animationend";class GS{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=JS(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),YS(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),$S(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){QS(this._element,this._name,"paused")}resume(){QS(this._element,this._name,"running")}setPosition(t){const e=WS(this._element,this._name);this._position=t*this._duration,YS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),$S(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=JS(t,"").split(","),r=KS(n,e);r>=0&&(n.splice(r,1),YS(t,"",n.join(",")))}(this._element,this._name))}}function QS(t,e,n){YS(t,"PlayState",n,WS(t,e))}function WS(t,e){const n=JS(t,"");return n.indexOf(",")>0?KS(n.split(","),e):KS([n],e)}function KS(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function $S(t,e,n){n?t.removeEventListener(zS,e):t.addEventListener(zS,e)}function YS(t,e,n,r){const i=HS+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function JS(t,e){return t.style[HS+e]||""}class XS{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new GS(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:MC(this.element,n))})}this.currentSnapshot=t}}class ZS extends BO{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=uC(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class tE{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return iC(t)}matchesElement(t,e){return oC(t,e)}containsElement(t,e){return sC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>uC(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof XS),u={};PC(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=DC(t,e,u));if(0==n)return new ZS(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=VS(t,e),f=new XS(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class eE{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:MC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class nE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rE().toString()),this._cssKeyframesDriver=new tE}validateStyleProperty(t){return iC(t)}matchesElement(t,e){return oC(t,e)}containsElement(t,e){return sC(t,e)}query(t,e,n){return aC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof eE);PC(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=VS(t,e=DC(t,e=e.map(t=>wC(t,!1)),u));return new eE(t,e,a,l)}}function rE(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let iE=(()=>{class t extends LO{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.R.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?VO(t):t;return aE(this._renderer,null,e,"register",[n]),new oE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.F),r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class oE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sE(this._id,t,e||{},this._renderer)}}class sE{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return aE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function aE(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const uE="@",cE="@.disabled";let lE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new hE("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new dE(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.F),r.Sb(FS),r.Sb(r.A))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class hE{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==uE&&e==cE?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class dE extends hE{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==uE?"."==e.charAt(1)&&e==cE?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==uE){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=uE&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let fE=(()=>{class t extends FS{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s),r.Sb(lC),r.Sb(sS))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const pE=[{provide:lC,useFactory:function(){return"function"==typeof rE()?new nE:new tE}},{provide:new r.r("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:LO,useClass:iE},{provide:sS,useFactory:function(){return new aS}},{provide:FS,useClass:fE},{provide:r.F,useFactory:function(t,e,n){return new lE(t,e,n)},deps:[ut,FS,r.A]}];let gE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:pE,imports:[wt]}),t})(),mE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t,bootstrap:[RO]}),t.\u0275inj=r.Ib({providers:[],imports:[[wt,AO,nn,bn.a.initializeApp(MO),gE,$w,rn]]}),t})();Object(r.T)(),vt().bootstrapModule(mE).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zp1y:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("l7GE"),i=n("ZUHj");function o(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new s(t,n))}}class s{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new a(t,this.observables,this.project))}}class a extends r.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let o=0;o<r;o++){let t=e[o];this.add(Object(i.a)(this,t,void 0,o))}}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);